<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scopeå‚æ•°æµ‹è¯• - ç¼–ç  vs ä¸ç¼–ç </title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; }
        .test-section { margin: 20px 0; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .test-link { 
            display: block; margin: 10px 0; padding: 15px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white; text-decoration: none; border-radius: 5px; 
            transition: transform 0.2s;
        }
        .test-link:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .description { font-size: 14px; margin-top: 8px; opacity: 0.9; }
        .current-params { background: #e7f3ff; padding: 15px; border-radius: 5px; border-left: 4px solid #007acc; }
        .highlight { background: #fff3cd; padding: 10px; border-radius: 4px; border-left: 4px solid #ffc107; }
    </style>
</head>
<body>
    <h1>ğŸ”§ Scopeå‚æ•°ä¼ é€’æ–¹å¼æµ‹è¯•</h1>
    <div class="highlight">
        <strong>æµ‹è¯•ç›®æ ‡ï¼š</strong> éªŒè¯æ˜¯å¦URLç¼–ç å½±å“äº†"æ³¥æ²™çŸ¥è¯†"å‚æ•°çš„æ­£ç¡®ä¼ é€’
    </div>
    
    <div class="test-section">
        <h2>ğŸ“Š å½“å‰é¡µé¢å‚æ•°è§£æç»“æœ</h2>
        <div id="current-params" class="current-params">
            æ­£åœ¨è§£æå‚æ•°...
        </div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ§ª æµ‹è¯•é“¾æ¥ - URLç¼–ç  vs ç›´æ¥ä¼ é€’</h2>
        
        <h3>æ–¹æ³•1: URLç¼–ç æ–¹å¼ï¼ˆå½“å‰ä½¿ç”¨ï¼‰</h3>
        <a href="http://localhost:10101/?q=æ’æ²™æ´è¿ç”¨é™åˆ¶æ¡ä»¶&scope=%E6%B3%A5%E6%B2%99%E7%9F%A5%E8%AF%86" class="test-link">
            <strong>ğŸ”— ç¼–ç ä¼ é€’ï¼š</strong> scope=%E6%B3%A5%E6%B2%99%E7%9F%A5%E8%AF%86
            <div class="description">ä½¿ç”¨encodeURIComponentç¼–ç çš„"æ³¥æ²™çŸ¥è¯†"</div>
        </a>
        
        <h3>æ–¹æ³•2: ç›´æ¥ä¸­æ–‡æ–¹å¼ï¼ˆæ–°æµ‹è¯•ï¼‰</h3>
        <a href="http://localhost:10101/?q=æ’æ²™æ´è¿ç”¨é™åˆ¶æ¡ä»¶&scope=æ³¥æ²™çŸ¥è¯†" class="test-link">
            <strong>ğŸ¯ ç›´æ¥ä¼ é€’ï¼š</strong> scope=æ³¥æ²™çŸ¥è¯†
            <div class="description">ç›´æ¥ä½¿ç”¨ä¸­æ–‡ï¼Œä¸è¿›è¡ŒURLç¼–ç </div>
        </a>
        
        <h3>æ–¹æ³•3: æ§åˆ¶ç»„æµ‹è¯•</h3>
        <a href="http://localhost:10101/?q=æ’æ²™æ´è¿ç”¨é™åˆ¶æ¡ä»¶&scope=å­¦æœ¯" class="test-link">
            <strong>ğŸ“š å­¦æœ¯èŒƒå›´ï¼š</strong> scope=å­¦æœ¯
            <div class="description">æµ‹è¯•å…¶ä»–ä¸­æ–‡èŒƒå›´å‚æ•°</div>
        </a>
        
        <a href="http://localhost:10101/?q=æ’æ²™æ´è¿ç”¨é™åˆ¶æ¡ä»¶" class="test-link">
            <strong>ğŸŒ é»˜è®¤èŒƒå›´ï¼š</strong> æ— scopeå‚æ•°
            <div class="description">ä½¿ç”¨é»˜è®¤çš„å…¨ç½‘æœç´¢</div>
        </a>
    </div>
    
    <div class="test-section">
        <h2>ğŸ” å‚æ•°ç¼–ç æµ‹è¯•å·¥å…·</h2>
        <div>
            <button onclick="testEncoding()">æµ‹è¯•ç¼–ç /è§£ç </button>
            <div id="encoding-test" style="margin-top: 10px;"></div>
        </div>
    </div>
    
    <script>
        // è§£æå½“å‰é¡µé¢å‚æ•°
        const urlParams = new URLSearchParams(window.location.search);
        const q = urlParams.get('q');
        const scope = urlParams.get('scope');
        
        // æ˜¾ç¤ºå½“å‰å‚æ•°
        function displayCurrentParams() {
            const paramsDiv = document.getElementById('current-params');
            paramsDiv.innerHTML = `
                <h3>å½“å‰URLå‚æ•°ï¼š</h3>
                <p><strong>æŸ¥è¯¢è¯ (q):</strong> ${q || 'æ— '}</p>
                <p><strong>æœç´¢èŒƒå›´ (scope):</strong> ${scope || 'æ— '}</p>
                <p><strong>åŸå§‹URL:</strong> ${window.location.href}</p>
                <p><strong>scopeç¼–ç æ£€æµ‹:</strong> ${scope ? (scope === decodeURIComponent(scope) ? 'æœªç¼–ç æˆ–å·²è§£ç ' : 'ç¼–ç çŠ¶æ€') : 'æ— å‚æ•°'}</p>
            `;
        }
        
        // æµ‹è¯•ç¼–ç åŠŸèƒ½
        function testEncoding() {
            const testText = 'æ³¥æ²™çŸ¥è¯†';
            const encoded = encodeURIComponent(testText);
            const decoded = decodeURIComponent(encoded);
            
            document.getElementById('encoding-test').innerHTML = `
                <div style="background: #f8f9fa; padding: 10px; border-radius: 4px;">
                    <p><strong>åŸå§‹æ–‡æœ¬:</strong> ${testText}</p>
                    <p><strong>ç¼–ç å:</strong> ${encoded}</p>
                    <p><strong>è§£ç å:</strong> ${decoded}</p>
                    <p><strong>ç¼–ç æ˜¯å¦ç›¸ç­‰:</strong> ${testText === decoded ? 'âœ… æ˜¯' : 'âŒ å¦'}</p>
                </div>
            `;
        }
        
        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºå‚æ•°
        displayCurrentParams();
        
        // è‡ªåŠ¨æµ‹è¯•ç¼–ç 
        testEncoding();
        
        console.log('ğŸ”§ Scopeå‚æ•°æµ‹è¯•é¡µé¢');
        console.log('å½“å‰scopeå‚æ•°:', scope);
        console.log('URLSearchParams.get()è§£æç»“æœ:', scope);
    </script>
</body>
</html>
</body>
</html>
