(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[96339],{67200:function(e,t,n){"use strict";n.r(t),n.d(t,{ErrorBoundary:function(){return l}});var r=n(2473),s=n(53929),i=n(49699),a=n(57437),o=n(2265),c=n(7870),l=function(e){(0,s._)(o,e);var t=(0,i._)(o);function o(e){var n;return(0,r._)(this,o),(n=t.call(this,e)).state={hasError:!1,error:null,info:null},n}var l=o.prototype;return l.componentDidCatch=function(e,t){this.setState({hasError:!0,error:e,info:t})},l.clearAndSaveData=function(){try{(0,c.CP)(JSON.stringify(localStorage),"chatgpt-next-web-snapshot.json")}finally{localStorage.clear(),location.reload()}},l.sendReport=function(){var e=this;"undefined"!=typeof navigator&&n.e(62297).then(n.t.bind(n,62297,23)).then(function(t){var n,r=new t.default(navigator.userAgent),s={os:r.os(),mobile:r.mobile(),tablet:r.tablet(),phone:r.phone()};"userAgentData"in navigator&&(n=navigator.userAgentData),(0,c.dW)("metalaw_component_error",{userAgent:navigator.userAgent,url:location.href,error:e.state.error,errorInfo:e.state.info,mobileInfo:s,userAgentData:n})})},l.render=function(){return this.state.hasError?(this.sendReport(),(0,a.jsx)("div",{className:"error",children:(0,a.jsx)("div",{children:"噢，似乎遇到了一点问题，请刷新界面尝试解决该问题。"})})):this.props.children},o}(o.Component)},52310:function(e,t,n){"use strict";n.d(t,{x:function(){return h}});var r,s=n(5194),i=n(1780),a=n(46796),o=n(85735),c=n(57437),l=n(54632),u=n(94746);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var p=function(e){return u.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",width:24,height:25,fill:"none",viewBox:"0 0 24 25"},e),r||(r=u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7.5h10a6 6 0 0 1 0 12H4m0-12 4-4m-4 4 4 4"})))},f=n(46387);function h(e){var t=e.onClick,n=e.sx,r=(0,a._)(e,["onClick","sx"]);return(0,c.jsxs)(l.Z,(0,i._)((0,s._)({variant:"text",color:"primary",sx:[{borderRadius:0,height:42}].concat((0,o._)(Array.isArray(n)?n:[n])),onClick:t},r),{children:[(0,c.jsx)(p,{}),(0,c.jsx)(f.Z,{component:"span",fontSize:16,fontWeight:500,sx:{ml:1,color:"inherit"},children:"返回"})]}))}},96339:function(e,t,n){"use strict";n.d(t,{CO:function(){return en},x3:function(){return er}});var r,s,i,a,o,c=n(2403),l=n(50059),u=n(5853),d=n(57437),p=n(67200),f=n(23656),h=n.n(f),m=n(2265),x=n(32333),g=n(53410),v=n(19643),w=n(78693),y=n(46387),_=n(8350),j=n(59832),b=n(23760),C=n(25590),S=n(52310),k=n(94746);function Z(){return(Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var H=function(e){return k.createElement("svg",Z({xmlns:"http://www.w3.org/2000/svg",width:41,height:41,fill:"none",viewBox:"0 0 41 41"},e),r||(r=k.createElement("circle",{cx:20.5,cy:20.367,r:20,fill:"#3B82F6"})),s||(s=k.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.5 25.867h.01m-3.81 4.5h7.6c1.12 0 1.68 0 2.108-.218a2 2 0 0 0 .874-.874c.218-.427.218-.987.218-2.108v-13.6c0-1.12 0-1.68-.218-2.107a2 2 0 0 0-.874-.875c-.428-.218-.988-.218-2.108-.218h-7.6c-1.12 0-1.68 0-2.108.218a2 2 0 0 0-.874.874c-.218.428-.218.988-.218 2.108v13.6c0 1.12 0 1.68.218 2.108a2 2 0 0 0 .874.874c.428.218.988.218 2.108.218m4.3-4.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0"})))};function N(){return(N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var T=function(e){return k.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",width:41,height:41,fill:"none",viewBox:"0 0 41 41"},e),i||(i=k.createElement("circle",{cx:20.5,cy:20.367,r:20,fill:"#47B881"})),a||(a=k.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M25.5 18.367v-2a5 5 0 0 0-10 0v2m5 4.5v2m-3.2 4.5h6.4c1.68 0 2.52 0 3.162-.326a3 3 0 0 0 1.311-1.312c.327-.641.327-1.481.327-3.162v-1.4c0-1.68 0-2.52-.327-3.161a3 3 0 0 0-1.311-1.312c-.642-.327-1.482-.327-3.162-.327h-6.4c-1.68 0-2.52 0-3.162.327a3 3 0 0 0-1.311 1.312c-.327.641-.327 1.481-.327 3.161v1.4c0 1.68 0 2.52.327 3.162a3 3 0 0 0 1.311 1.312c.642.326 1.482.326 3.162.326"})))},P=n(7870),I=n(22322),E=n(48365),D=n(85721),M=n(92664),R=n(38305),W=n(74591),q=n(26058),U=n(22629),A=n(23006),B=n.n(A),L=n(74634),O=n(63655),F=n(54632),Q=n(75825),V=n(79943),z=n(36570),J=n(38068),$=n(84203),G=n(68956),K=n(11183),X=n(10431);function Y(e){var t,n,r=(0,b.LM)(),s=(0,U.a2)(),i=(0,l._)((0,W.G1)(),2),a=i[0],o=i[1],f=(0,E.Q$)(),j=(0,l._)((0,m.useState)(!1),2),k=j[0],Z=j[1],N=(0,l._)((0,m.useState)(!1),2),I=N[0],A=N[1],B=(0,m.useCallback)(function(e){return(0,W.x1)(f,e)},[]),L=(0,q.ND)(),J=(0,m.useCallback)(function(){return B(["invite_code"]).invite_code||sessionStorage.getItem("visiteCode")||(null==L?void 0:L.inviteCode)||"dummy"},[B]);(0,W.xH)();var $=(0,W.p1)({inviteCode:J,loginWay:a,getFormValue:B,source:"pc"}),G=$.getPhoneCode,K=$.validCodeControl,Y=$.cfVerifySuccess,et=$.submit,en=(0,V.WS)(),er=(0,m.useCallback)((t=(0,c._)(function(t){var n,i;return(0,u.Jh)(this,function(a){switch(a.label){case 0:if(t.preventDefault(),k)return[2];if((0,P.dW)("login-form-submit",{client:(0,q.Fk)()}),!Y)return(0,P.dW)("cf-verify-failed",{client:(0,q.Fk)()}),[2];if(!f.current.validate().every(function(e){return 0===e.hitRules.length}))return[3,6];Z(!0),a.label=1;case 1:return a.trys.push([1,4,5,6]),[4,et()];case 2:return a.sent(),z.ZP.lastLoginTime.set(Date.now()),[4,r.updateUserInfo(function(){(0,U.NI)(s).then(function(t){if((0,P.oh)("login-in"),(0,P.dW)("login-in","accountOrCaptcha-long-in"),t){var n,r,s,i=sessionStorage.getItem("after-copy-show-sessionId");i&&t[i]?(null===(r=e.loginSuccess)||void 0===r||r.call(e),sessionStorage.removeItem("after-copy-show-sessionId"),en.push((0,P.gY)(Q.l.Search,{id:t[i]}))):(null===(s=e.loginSuccess)||void 0===s||s.call(e),e.redirectUrl&&(location.href=e.redirectUrl))}else null===(n=e.loginSuccess)||void 0===n||n.call(e),e.redirectUrl&&(location.href=e.redirectUrl)}),(0,X.Q)()})];case 3:return a.sent(),[3,6];case 4:return n=a.sent(),(0,P.dW)("login-failed",n.toString()),null===(i=e.loginFailed)||void 0===i||i.call(e,n),[3,6];case 5:return Z(!1),[7];case 6:return[2]}})}),function(e){return t.apply(this,arguments)}),[en,et,r,e]),es=(0,l._)((0,m.useState)("86"),2),ei=es[0],ea=es[1],eo=(0,l._)((0,m.useState)([]),2),ec=eo[0],el=eo[1];return(0,m.useEffect)(function(){el([R.n,{validate:function(e){e.focused;var t=e.value;return(e.empty,e.dirty,e.contextProps,"86"===ei)?/^1\d{10}$/.test(t):/^[+]?(0*(9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)-(\d{1,14}))$/.test(ei+"-"+t)},isSkip:function(e){var t=e.focused,n=e.dirty,r=e.empty,s=e.value;return/@/.test(s)||!n||r||t},message:"请输入正确格式的手机号"}])},[ei]),(0,d.jsx)(p.ErrorBoundary,{children:(0,d.jsx)(x.Z,{open:!0,sx:{zIndex:9999},children:(0,d.jsxs)(g.Z,{className:h()["login-content"],children:[(0,d.jsxs)(v.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,d.jsx)(S.x,{className:(0,P.zk)({"display-hidden":[W.jh.signUp,W.jh.wxQRCode].includes(a)}),onClick:function(){I?A(!1):o(W.jh.wxQRCode)}}),(0,d.jsx)(C.P,{sx:{position:"relative",m:-1,left:"-3px",top:"-7px",color:"var(--black)"},onClick:function(){var t;(0,P.dW)("close-login-dialog",""),null===(t=e.onClose)||void 0===t||t.call(e)}})]}),!I&&(0,d.jsxs)(v.Z,{spacing:4.375,sx:{m:"auto"},children:[e.showTips?(0,d.jsx)(w.Z,{sx:{textAlign:"center",marginTop:"20px",fontSize:"18px"},dangerouslySetInnerHTML:{__html:(n=a===W.jh.wxQRCode?"微信扫码，":"",e.tipsHtml?n+e.tipsHtml:n+"登录后，可继续<b>免费</b>使用")}}):(0,d.jsx)(y.Z,{mt:2,fontSize:24,fontWeight:"bold",textAlign:"center",children:a===W.jh.signUp?"绑定手机号":a===W.jh.wxQRCode?"微信扫码登录":a===W.jh.account?"账号密码登录":a===W.jh.phoneCode?"手机验证登录":""}),a===W.jh.wxQRCode&&(0,d.jsxs)(v.Z,{spacing:4.375,sx:{"&[class][class]":{mx:"auto",width:175}},children:[(0,d.jsx)(W.Ai,{redirectUri:e.redirectUrl||"https://metaso.cn",loadError:function(){}}),(0,d.jsxs)(v.Z,{direction:"row",justifyContent:"space-between",children:[(0,d.jsx)(ee,{icon:(0,d.jsx)(H,{}),text:"手机验证",onClick:function(){o(W.jh.phoneCode)}}),(0,d.jsx)(ee,{icon:(0,d.jsx)(T,{}),text:"账号密码",onClick:function(){o(W.jh.account)}})]})]}),["account","phoneCode","signUp"].includes(a)&&(0,d.jsx)(W.po.Boundary,{children:(0,d.jsx)(E.mG,{disabled:k||!Y,_ref:f,onSubmit:er,children:(0,d.jsxs)(v.Z,{spacing:4.375,sx:{px:3.75},children:[(0,d.jsxs)(v.Z,{spacing:2.5,children:[a===W.jh.account&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(E.xf,{name:"account",cnName:"邮箱/手机号",children:(0,d.jsxs)(D.W,{children:[(0,d.jsx)(M.H,{autoFocus:!0,type:"text",inputMode:"email",required:!0,id:"desktop-login-account",placeholder:"输入邮箱/手机号"}),(0,d.jsx)(R.R,{rules:W.qh})]})}),(0,d.jsx)(E.xf,{name:"password",cnName:"密码",children:(0,d.jsxs)(D.W,{children:[(0,d.jsx)(M.H,{type:"password",required:!0,id:"desktop-login-pwd",placeholder:"输入登录密码"}),(0,d.jsx)(R.R,{rules:[R.n]})]})})]}),[W.jh.phoneCode,W.jh.signUp].includes(a)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(E.xf,{name:"wrapper",children:(0,d.jsxs)(D.W,{children:[(0,d.jsxs)(E.xf,{name:"country_code",cnName:"国家区号",value:ei,onChange:function(e){ea(e),f.current.validate(["phone"])},defaultValue:"86",children:[(0,d.jsx)(M.H,{autoComplete:"tel-country-code",sx:{pr:0},sxs:{wrapper:{pr:0,flex:"none",width:"2.5em"}},id:"desktop-login-cc",type:"text",placeholder:"86"}),(0,d.jsx)(R.R,{})]}),(0,d.jsx)(_.Z,{sx:{my:.6},orientation:"vertical",flexItem:!0}),(0,d.jsxs)(E.xf,{name:"phone",cnName:"手机号",children:[(0,d.jsx)(M.H,{autoFocus:!0,type:"tel",inputMode:"tel",id:"desktop-login-phone",pattern:"[0-9]",required:!0,autoComplete:"tel-national",placeholder:"手机号"}),(0,d.jsx)(R.R,{rules:ec})]})]})}),(0,d.jsx)(E.xf,{name:"verification",cnName:"验证码",children:(0,d.jsxs)(D.W,{sx:{backgroundColor:"var(--white)"},children:[(0,d.jsx)(M.H,{autoComplete:"one-time-code",inputMode:"numeric",pattern:"\\d{4}",id:"desktop-login-sms",required:!0,placeholder:"短信验证码"}),(0,d.jsx)(W.Yq,{sx:{flex:" none",p:.2,mr:1,alignSelf:"center",color:"rgb(21, 112, 239) !important"},onTap:function(e){e&&G()}}),(0,d.jsx)(R.R,{rules:W.mn})]})}),a===W.jh.signUp&&K&&(0,d.jsx)(E.xf,{name:"invite_code",cnName:"邀请码",value:(null==L?void 0:L.inviteCode)||"dummy",disabled:!!(null==L?void 0:L.inviteCode),children:(0,d.jsxs)(D.W,{children:[(0,d.jsx)(M.H,{autoComplete:"off",id:"desktop-login-ic",placeholder:"邀请码"}),(0,d.jsx)(R.R,{rules:[R.n]})]})})]}),(0,d.jsx)(W.Mm,{disabled:a!==W.jh.account&&!Y,onClick:er,children:a===W.jh.phoneCode?"登录/注册":a===W.jh.account?"登 录":a===W.jh.signUp?"立即加入":""}),a===W.jh.account&&(0,d.jsx)(F.Z,{className:h()["forget-box"],children:(0,d.jsx)("span",{onClick:function(){A(!0),(0,P.dW)("forget-password-clicked","")},children:"忘记密码?"})})]}),(0,d.jsx)(w.Z,{sx:{position:"relative",mt:4.375},children:(0,d.jsxs)(E.xf,{name:"条款",cnName:"条款",children:[(0,d.jsx)(W.dg,{id:"desktop-login-policy"}),(0,d.jsx)(R.R,{rules:[{validate:function(e){return"checked"===e.value},isSkip:!0,message:"请勾选同意"}]})]})})]})})})]}),I&&(0,d.jsx)(O.default,{goLogin:function(){A(!1)},isH5:!1})]})})})}function ee(e){return(0,d.jsxs)(w.Z,{sx:{cursor:"pointer"},onClick:e.onClick,children:[(0,d.jsx)(j.Z,{children:e.icon}),(0,d.jsx)(y.Z,{sx:{userSelect:"none"},mt:1,fontSize:14,color:"#8e8e8e",children:e.text})]})}var et={logDesc:""},en=(0,m.memo)(function(){var e,t=(0,l._)((0,m.useState)(!1),2),n=t[0],r=t[1],s=(0,$.d6)({});o=r;var i=null===(e=(0,q.ZD)())||void 0===e?void 0:e.isMiniWebView,a=(0,L.F)(),p=(0,V.WS)(),f=et.showTips,h=et.redirectUrl,x=et.tipsHtml;(0,m.useEffect)(function(){n&&(i?(0,c._)(function(){var e;return(0,u.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,K.mH)()];case 1:return null===(e=t.sent().miniProgram)||void 0===e||e.navigateTo({url:h?"/pages/Login?cb="+h:"/pages/Login"}),o(!1),[2]}})})():a&&s.current.path!==Q.l.H5Login&&(z.ZP.loginData.set(et),p.push(Q.l.H5Login),o(!1)))},[n]);var g=(0,m.useCallback)(function(){(0,I.y)("登录成功",{variant:"success",autoHideDuration:3e3}),o(!1),et.callback&&et.callback()},[]),v=(0,m.useCallback)(function(e){e&&(0,I.y)(e,{variant:"error",autoHideDuration:3e3})},[]),y=(0,m.useCallback)(function(){(0,J.q)("user-close-register-dialog"),localStorage.removeItem("keepSession"),o(!1)},[]);return(0,d.jsx)(w.Z,{className:"meta-login-root",sx:{position:"fixed",zIndex:100,top:0,left:0},children:n&&!a&&!i&&(0,d.jsx)(Y,{loginSuccess:g,loginFailed:v,redirectUrl:h,showTips:f,tipsHtml:x,onClose:y})})});function er(e){return es.apply(this,arguments)}function es(){return(es=(0,c._)(function(e){var t,n,r,s,i,a,c,l;return(0,u.Jh)(this,function(u){return(0,G.gF)()?e.tipsHtml&&e.showTips&&(0,I.y)((0,d.jsx)("div",{dangerouslySetInnerHTML:{__html:e.tipsHtml}}),{variant:"warning"}):(n=!!(null===(t=(0,q.ZD)())||void 0===t?void 0:t.isMiniWebView),e&&e.redirectUrl&&n&&(e.redirectUrl=encodeURIComponent(e.redirectUrl.replace(location.origin,""))),s=(r=B()({},z.ZP.loginData.defaultValue,e)).showTips,i=r.redirectUrl,a=r.tipsHtml,c=r.target,l=r.callback,(0,P.dW)("show-login-dialog",{desc:null==e?void 0:e.logDesc,client:(0,q.Fk)()}),Object.assign(et,{redirectUrl:i,showTips:s,tipsHtml:a,callback:l,target:c}),(0,P.oh)("show-login-dialog"),o(!0)),[2]})})).apply(this,arguments)}en.displayName="SingletonLoginDialog"},63655:function(e,t,n){"use strict";n.r(t),n.d(t,{ResetPasswdType:function(){return i},default:function(){return P}});var r,s,i,a=n(2403),o=n(5194),c=n(1780),l=n(50059),u=n(5853),d=n(57437),p=n(2265),f=n(78693),h=n(8350),m=n(97118),x=n.n(m),g=n(48365),v=n(38305),w=n(85721),y=n(92664),_=n(74591),j=n(41023),b=n(39207),C=n(23760),S=n(82984),k=n(94746);function Z(){return(Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var H=function(e){return k.createElement("svg",Z({xmlns:"http://www.w3.org/2000/svg",width:96,height:97,fill:"none",viewBox:"0 0 96 97"},e),s||(s=k.createElement("path",{fill:"#17B26A",d:"M41.292 57.391 30.989 47.09q-1.317-1.317-3.354-1.318-2.036 0-3.354 1.318-1.317 1.319-1.317 3.354 0 2.037 1.317 3.354l13.656 13.657q1.438 1.437 3.355 1.437 1.916 0 3.354-1.437L71.719 40.38q1.317-1.319 1.317-3.354 0-2.037-1.317-3.355-1.319-1.317-3.354-1.317-2.037 0-3.355 1.317zM48 96.683q-9.943 0-18.688-3.776T14.1 82.667Q7.629 76.2 3.859 67.454T.083 48.766q0-9.943 3.776-18.687T14.1 14.865q6.469-6.468 15.213-10.24Q38.058.855 48 .85q9.943.001 18.687 3.776t15.214 10.24q6.469 6.47 10.245 15.214t3.77 18.687q0 9.943-3.775 18.688T81.9 82.667q-6.469 6.47-15.214 10.245-8.745 3.776-18.687 3.77"})))},N=n(89831),T=n(7870);function P(e){var t=(0,l._)((0,p.useState)("86"),2),r=t[0],s=t[1],i=(0,l._)((0,p.useState)([]),2),m=i[0],k=i[1],Z=(0,l._)((0,p.useState)("reset_passwd_by_phone"),2),P=Z[0],I=Z[1],E=(0,l._)((0,p.useState)(!1),2),D=E[0],M=E[1],R=(0,l._)((0,p.useState)(),2),W=R[0],q=R[1];(0,p.useEffect)(function(){(0,T.dW)("reset-passwd",{type:P})},[P]),(0,p.useEffect)(function(){s("86")},[P]),(0,p.useEffect)(function(){(0,a._)(function(){return(0,u.Jh)(this,function(e){switch(e.label){case 0:return[4,n.e(89965).then(n.bind(n,89965))];case 1:return q(new(e.sent()).JSEncrypt),[2]}})})()},[]),(0,p.useEffect)(function(){k([v.n,{validate:function(e){e.focused;var t=e.value;return(e.empty,e.dirty,e.contextProps,"86"===r)?/^1\d{10}$/.test(t):/(?:\(?[0\+]?\d{1,3}\)?)[\s-]?(?:0|\d{1,4})[\s-]?(?:(?:13\d{9})|(?:\d{7,8}))/.test(t)},isSkip:function(e){var t=e.focused,n=e.dirty,r=e.empty,s=e.value;return/@/.test(s)||!n||r||t},message:"请输入正确格式的手机号"}])},[r]);var U=[v.n,{validate:function(e){e.focused;var t=e.value;return e.empty,e.dirty,e.contextProps,t.length>=8},isSkip:function(e){var t=e.focused,n=e.dirty,r=e.empty,s=e.value;return/@/.test(s)||!n||r||t},message:"密码不能少于8位字符"},{validate:function(e){e.focused;var t=e.value;return e.empty,e.dirty,e.contextProps,t.length<=40},isSkip:function(e){var t=e.focused,n=e.dirty,r=e.empty,s=e.value;return/@/.test(s)||!n||r||t},message:"密码不能多于40位字符"},{validate:function(e){e.focused;var t=e.value;return e.empty,e.dirty,e.contextProps,(0,j.uh)(t)},isSkip:function(e){var t=e.focused,n=e.dirty,r=e.empty,s=e.value;return/@/.test(s)||!n||r||t},message:"密码必须包含数字、英文大写字母和小写字母"}],A=[v.n,{validate:function(e){e.focused;var t=e.value;return e.empty,e.dirty,e.contextProps,/(^[\w.\-]+@(?:[a-z0-9]+(?:-[a-z0-9]+)*\.)+[a-z]{2,4}$)|(^1[3|4|5|7|8|9]\d{9}$)/i.test(t)||!/@/.test(t)},isSkip:function(e){var t=e.focused,n=e.dirty,r=e.empty,s=e.value;return/@/.test(s)||!n||r||t},message:"请输入正确格式的邮箱"}],B=(0,g.Q$)(),L=(0,p.useCallback)(function(e){return(0,_.x1)(B,e)},[]),O=function(){var e={type:P};"reset_passwd_by_phone"===P?e.phone=L(["phone"]).phone:"reset_passwd_by_email"===P&&(e.email=L(["email"]).email),(0,b.WzX)(e).then(function(t){if(0==t.data.code)(0,j.CB)("验证码已发送，请查收");else if(t.data.code===N.Cq.UNCLASSIFIED_2704){var n={val:!0,params:{realIp:t.data.realIp}};"reset_passwd_by_phone"===P?n.params.phone=e.phone:"reset_passwd_by_email"===P&&(n.params.email=e.email);var r=C.LM.getState();r.updateVerify(n),(0,S.Z)(function(){r.updateVerify((0,c._)((0,o._)({},r.verify),{val:!1,isRequestFrequently:!1})),O()},function(){})}else(0,j.oc)(t.data.msg)}).catch(function(e){(0,j.oc)("发送验证码失败")})},F=(0,l._)((0,p.useState)(!1),2),Q=F[0],V=F[1],z=function(e){if(e.preventDefault(),B.current.validate().every(function(e){return 0===e.hitRules.length})){V(!0),W.setPublicKey("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCX4kRYjU6XclWT4mwxgQ55JerRar8CPEHp4uZRITqZuk8p0z5UTL02muequw2dgvgNlJkE8C7eyXf1S8TH+MvbVkHnCoKKigAPb08PtqcvVIqnZn+kNDpiQZapkpHrEXeR+rWfj3etTwMHYbV+zTaKOdxa7fm3oO4CWbgmfkSC8wIDAQAB");var t=W.encrypt(L(["password"]).password),n=parseInt(L(["verification"]).verification),r={type:P,pwd:t};"reset_passwd_by_phone"===P?(r.phone=L(["phone"]).phone,r.sms_code=n):"reset_passwd_by_email"===P&&(r.email=L(["email"]).email,r.email_code=n),(0,b.c0U)(r).then(function(e){if(0===e.data.code)(0,j.CB)("重置密码成功"),M(!0);else if(e.data.code===N.Cq.UNCLASSIFIED_2704){var t={val:!0,params:{realIp:e.data.realIp}};"reset_passwd_by_phone"===P?t.params.phone=r.phone:"reset_passwd_by_email"===P&&(t.params.email=r.email);var n=C.LM.getState();n.updateVerify(t),(0,S.Z)(function(){n.updateVerify((0,c._)((0,o._)({},n.verify),{val:!1,isRequestFrequently:!1})),z()},function(){})}else(0,j.oc)(e.data.msg);V(!1)}).catch(function(e){(0,j.oc)("重置密码失败"),V(!1)})}};return(0,d.jsx)(f.Z,{className:x().page,children:(0,d.jsxs)(f.Z,{className:x()["reset-psw-wrapper"]+" ".concat(e.isH5?x()["h5-wrapper"]:""),children:[!D&&(0,d.jsxs)(f.Z,{className:x()["reset-psw-container"],children:[(0,d.jsxs)(f.Z,{className:x()["reset-psw-header-container"],children:[(0,d.jsx)(f.Z,{className:x()["reset-psw-header"],children:"重置密码"}),(0,d.jsx)(f.Z,{className:x()["reset-psw-header-desc"],children:"选择重置密码的方式"})]}),(0,d.jsxs)(f.Z,{className:x()["reset-psw-type-container"],children:[(0,d.jsx)(f.Z,{className:x()["reset-psw-type-item"]+" ".concat("reset_passwd_by_phone"===P?x()["reset-psw-type-active"]:""),onClick:function(){return I("reset_passwd_by_phone")},children:(0,d.jsx)(f.Z,{children:"手机找回"})}),(0,d.jsx)(f.Z,{className:x()["reset-psw-type-item"]+" ".concat("reset_passwd_by_email"===P?x()["reset-psw-type-active"]:""),onClick:function(){return I("reset_passwd_by_email")},children:(0,d.jsx)(f.Z,{children:"邮箱找回"})})]}),(0,d.jsx)(f.Z,{className:x()["reset-psw-form-container"],children:(0,d.jsxs)(g.mG,{disabled:Q,_ref:B,onSubmit:z,children:["reset_passwd_by_phone"===P&&(0,d.jsx)(g.xf,{name:"wrapper",children:(0,d.jsxs)(w.W,{sx:{marginBottom:"25px",width:"calc(100% - 2px)"},children:[(0,d.jsxs)(g.xf,{name:"country_code",cnName:"国家区号",value:r,onChange:function(e){s(e),B.current.validate(["phone"])},defaultValue:"86",children:[(0,d.jsx)(y.H,{autoComplete:"tel-country-code",sx:{pr:0},sxs:{wrapper:{pr:0,flex:"none",width:"2.5em"}},id:"resetPasswd-cc",type:"text",placeholder:"86"}),(0,d.jsx)(v.R,{})]}),(0,d.jsx)(h.Z,{sx:{my:.6},orientation:"vertical",flexItem:!0}),(0,d.jsxs)(g.xf,{name:"phone",cnName:"手机号",children:[(0,d.jsx)(y.H,{autoFocus:!0,type:"tel",inputMode:"tel",pattern:"[0-9]",required:!0,id:"resetPasswd-phone",autoComplete:"tel-national",placeholder:"输入手机号",sxs:{wrapper:{width:"291px"}}}),(0,d.jsx)(v.R,{rules:m})]})]})}),"reset_passwd_by_email"===P&&(0,d.jsx)(g.xf,{name:"wrapper",children:(0,d.jsx)(w.W,{sx:{marginBottom:"25px",width:"calc(100% - 2px)"},children:(0,d.jsxs)(g.xf,{name:"email",cnName:"邮箱",children:[(0,d.jsx)(y.H,{autoFocus:!0,type:"text",inputMode:"email",id:"resetPasswd-email",required:!0,placeholder:"输入邮箱",sxs:{wrapper:{width:"calc(100% - 2px)"}}}),(0,d.jsx)(v.R,{rules:A})]})})}),(0,d.jsx)(g.xf,{name:"verification",cnName:"验证码",children:(0,d.jsxs)(w.W,{sx:{backgroundColor:"var(--white)",width:"calc(100% - 2px)",marginBottom:"25px"},children:[(0,d.jsx)(y.H,{autoComplete:"one-time-code",inputMode:"numeric",pattern:"\\d{4}",id:"resetPasswd-verification",required:!0,placeholder:"reset_passwd_by_phone"===P?"输入短信验证码":"输入验证码"}),(0,d.jsx)(_.Yq,{sx:{flex:" none",p:.2,mr:1,alignSelf:"center",color:"rgb(21, 112, 239) !important"},onTap:function(e){e&&O()},fieldName:"reset_passwd_by_phone"===P?"phone":"email"}),(0,d.jsx)(v.R,{rules:_.mn})]})}),(0,d.jsx)(f.Z,{className:x()["field-label"],children:"*请输入8-40个字符，必须包含数字、英文大写字母和小写字母"}),(0,d.jsx)(g.xf,{name:"password",cnName:"密码",children:(0,d.jsxs)(w.W,{sx:{width:"calc(100% - 2px)",marginBottom:"25px"},children:[(0,d.jsx)(y.H,{type:"password",required:!0,id:"resetPasswd-pwd",autoComplete:"new-password",placeholder:"输入新密码"}),(0,d.jsx)(v.R,{rules:U})]})}),(0,d.jsx)(_.Mm,{onClick:z,sx:{width:"100%"},children:"下一步"})]},P)})]}),D&&(0,d.jsxs)(f.Z,{className:x()["reset-psw-success-container"],children:[(0,d.jsx)(f.Z,{className:x()["reset-psw-header-container"],children:(0,d.jsx)(f.Z,{className:x()["reset-psw-header"],children:"重置成功"})}),(0,d.jsxs)(f.Z,{className:x()["reset-psw-success-icon-container"],children:[(0,d.jsx)(H,{}),(0,d.jsx)(f.Z,{children:"密码已重置"})]}),(0,d.jsx)(f.Z,{className:x()["reset-psw-go-login-btn"],onClick:function(){e.goLogin&&e.goLogin()},children:"立即登录"})]})]})})}(r=i||(i={})).phone="reset_passwd_by_phone",r.email="reset_passwd_by_email"},22629:function(e,t,n){"use strict";n.d(t,{NI:function(){return v},a2:function(){return g}});var r,s=n(2403),i=n(85735),a=n(5853),o=n(59625),c=n(89134),l=n(42233),u=n(95697),d=n(80928),p=n.n(d),f=n(7870),h=n(39207),m=n(99107),x=new Map,g=new Proxy((0,o.Ue)()((0,c.tJ)(function(e,t){return{searchHistory:[],s:{d:0,dt:"",adt:""},addBookCount:0,isHydrated:!1,isTraditionalSearchEngineModeActive:!1,showHistory:!1,needSyncHistory:!1,maxTimes:15,maxAdvanceTime:1,defaultEngineType:void 0,setShowHistory:function(t){e({showHistory:t})},setIsHydrated:function(t){e({isHydrated:t})},setTraditionalSearchEngineModeActive:function(t){e({isTraditionalSearchEngineModeActive:t}),localStorage.setItem("isTraditionalSearchEngineModeActive","true")},canSearch:function(n,r){15!=t().maxTimes&&e({maxTimes:15});var s=t().s,i=new Date(s.d),a=new Date;if((0,f.Fo)(i,a)){var o=r?s.adt:s.dt;if(!s.adt){var c=p().enc.Utf8.parse("".concat(t().maxAdvanceTime)),l=p().enc.Base64.stringify(c);s.adt=l,r&&(o=l),e({s:{d:new Date().getTime(),dt:s.dt,adt:l}})}var u=p().enc.Base64.parse(o);return parseInt(p().enc.Utf8.stringify(u))-(n||1)>=0}var d=p().enc.Utf8.parse("".concat(t().maxTimes)),h=p().enc.Base64.stringify(d),m=p().enc.Utf8.parse("".concat(t().maxAdvanceTime)),x=p().enc.Base64.stringify(m);return e({s:{d:new Date().getTime(),dt:h,adt:x}}),!0},appendRecord:function(n){var r=t().searchHistory;return r.length>=500&&(r=r.slice(0,499)),r.unshift(n),e({searchHistory:r}),!0},addResultCount:function(n,r,s,a){var o=t().searchHistory,c=o.find(function(e){return e.id===n});if(c){if(a)e({searchHistory:(0,i._)(o)});else{c.resultCount=c.resultCount?c.resultCount+1:1;var l=t().s,u=s?l.adt:l.dt,d=p().enc.Base64.parse(u),f=parseInt(p().enc.Utf8.stringify(d))-(r||1);d=p().enc.Utf8.parse(f.toString());var h=p().enc.Base64.stringify(d);e({searchHistory:(0,i._)(o),s:{d:new Date().getTime(),dt:s?l.dt:h,adt:s?h:l.adt}})}}},updateResultCount:function(n,r){var s=t().searchHistory,a=s.find(function(e){return e.id===n});a&&(a.resultCount=r,e({searchHistory:(0,i._)(s)}))},deleteRecord:function(n){var r=t().searchHistory,s=r.indexOf(r.find(function(e){return e.id===n}));r.splice(s,1),e({searchHistory:r})},setNeedSyncHistory:function(t){e({needSyncHistory:t})},setDefaultEngineType:function(t){e({defaultEngineType:t})},deleteAllRecord:function(){e({searchHistory:[]})},setBookCount:function(t){e({addBookCount:t})}}},{name:l.KJ.Data,version:1,skipHydration:!0,onRehydrateStorage:function(){return function(e){e&&(e.isHydrated||e.setIsHydrated(!0),x.set(l.KJ.Data,e))}}})),{apply:function(e,t,n){"undefined"!=typeof document&&(0,u.Z)(e);var r=e.apply(t,n);return x.set(l.KJ.Data,r),x.set("uuid",(0,m.h)()),r}}),v=(r=(0,s._)(function(e){var t,n,r,s;return(0,a.Jh)(this,function(i){switch(i.label){case 0:if(t=new Date,(r=(n=e.searchHistory.slice(0,5).filter(function(e){return!e.merged&&(0,f.Fo)(new Date(e.createTime),t)})).reverse()).forEach(function(e){return e.merged=!0}),!(r.length>0))return[3,2];return[4,(0,h.B6N)(n.map(function(e){return e.id}))];case 1:return s=i.sent(),e.isHydrated&&e.setNeedSyncHistory(!0),[2,s.data.data];case 2:return[2,null]}})}),function(e){return r.apply(this,arguments)})},10431:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var r=n(36570),s=n(39207);function i(){try{var e=r.ZP.userPPTSetting.get()||null,t=r.ZP.userPPTRecord.get()||[];if(!e||!t||0===t.length)return;(0,s.hW$)(e,t).then(function(e){0===e.data.errCode&&(r.ZP.userPPTSetting.set(null),r.ZP.userPPTRecord.set([]))})}catch(e){}}},259:function(e,t,n){"use strict";var r,s;n.d(t,{y:function(){return r}}),(s=r||(r={})).Large="large",s.Medium="medium",s.Small="small"},36956:function(e,t,n){"use strict";n.d(t,{L:function(){return d},W:function(){return u}});var r=n(50059),s=n(2265),i=n(54321),a=n(74634),o=n(259),c=n(47812),l={hideLeftMenu:0,newSearch:!1,s:"",customFontSize:o.y.Medium,coverIds:[],sharedSubjectIds:[],subjectQALayout:c.Z8.List,showImageCategory:!1,"recover-home-search-box-text":0,"random-seed":-1,h5Study:0};function u(){var e=(0,i.useCookies)();return(0,s.useMemo)(function(){return{has:function(t){return Object.hasOwn(e.get(),t)},get:function(t){if(void 0===t)return e.get();var n,r=e.get(t);if(void 0===r)return l[t];try{n=JSON.parse(r)}catch(e){n=r}return n},remove:function(t,n){e.remove(t,n)},set:function(t,n,r){e.set(t,JSON.stringify(n),r)}}},[e])}function d(e){var t=u(),n=(0,s.useMemo)(function(){return t.get(e)},[t,e]),i=(0,r._)((0,s.useState)(n),2),o=i[0],c=i[1],l=(0,s.useId)(),d=(0,s.useMemo)(function(){return{id:l,refresh:function(){c(t.get(e))}}},[l,t,e]);(0,s.useEffect)(function(){var t=p.get(e);return t?t.push(d):(t=[d],p.set(e,t)),function(){t&&t.splice(t.indexOf(d),1)}},[d,e]);var f=(0,s.useCallback)(function(){var t=p.get(e);null==t||t.forEach(function(e){e.id!==l&&e.refresh()})},[l,e]),h=(0,s.useCallback)(function(n,r){"function"==typeof n?c(function(s){var i=n(s);return t.set(e,i,r),f(),i}):(t.set(e,n,r),c(n),f())},[t,e,f]),m=(0,a.fl)();return(0,s.useEffect)(function(){m.current&&h(n)},[m,h,n]),[o,h]}var p=new Map},68956:function(e,t,n){"use strict";n.d(t,{gF:function(){return u},yW:function(){return d},cF:function(){return l}});var r=n(50059),s=n(99376),i=n(36956),a=n(36570),o=n(58494),c="sogo";function l(){var e,t;return e=(0,s.useSearchParams)(),t=(0,i.W)(),(e.get("s")||a.ZP.s.get()||t.get("s"))===c}function u(){return(a.ZP.s.get()||o.ZP.load("s"))===c}function d(e){var t=new FormData;return Object.entries(e).forEach(function(e,n){var s=(0,r._)(e,2),i=s[0],a=s[1];"string"==typeof a?t.set(i,a):t.set(i,a.join("$start$_the_$center$_separator_$end$"))}),fetch("/cookie-setting",{method:"POST",body:t})}},97118:function(e){e.exports={page:"reset-password_page__3rxXY","page-header":"reset-password_page-header__QtPJo","reset-psw-wrapper":"reset-password_reset-psw-wrapper__lSIXD","reset-psw-container":"reset-password_reset-psw-container__MIDK0","reset-psw-success-container":"reset-password_reset-psw-success-container__Agqsf","h5-wrapper":"reset-password_h5-wrapper__Vs8zw","reset-psw-header-container":"reset-password_reset-psw-header-container__GV7GZ","reset-psw-header":"reset-password_reset-psw-header__I4ukm","reset-psw-header-desc":"reset-password_reset-psw-header-desc__UNe6l","field-label":"reset-password_field-label__lWZDO","reset-psw-type-container":"reset-password_reset-psw-type-container__Tj14y","reset-psw-type-item":"reset-password_reset-psw-type-item__EuVG7","reset-psw-type-active":"reset-password_reset-psw-type-active__MPQku","reset-psw-success-icon-container":"reset-password_reset-psw-success-icon-container__h6jBw","reset-psw-go-login-btn":"reset-password_reset-psw-go-login-btn__qD1eZ"}}}]);