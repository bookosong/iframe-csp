(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[55833,49744],{48903:function(e,n,t){"use strict";var r,i=t(94746);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}n.Z=function(e){return i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),r||(r=i.createElement("g",{id:"align-left"},i.createElement("path",{id:"Icon",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M16 10H3m17-4H3m17 8H3m13 4H3"}))))}},78619:function(e,n,t){"use strict";var r,i=t(94746);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}n.Z=function(e){return i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:9,height:7,fill:"none",viewBox:"0 0 9 7"},e),r||(r=i.createElement("path",{fill:"currentColor",d:"M1.095.3h6.67a.665.665 0 0 1 .495 1.11L4.962 5.811a.666.666 0 0 1-1.062 0L.564 1.363A.664.664 0 0 1 1.095.301"})))}},59214:function(e,n,t){"use strict";var r,i,a=t(94746);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}n.Z=function(e){return a.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",width:27,height:26,fill:"none",viewBox:"0 0 27 26"},e),r||(r=a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M1 8.127A3.377 3.377 0 0 1 4.377 4.75c.97 0 1.83-.62 2.136-1.54l.112-.335c.053-.158.08-.237.107-.308a2.5 2.5 0 0 1 2.169-1.562C8.976 1 9.06 1 9.226 1h8.548c.166 0 .25 0 .325.005a2.5 2.5 0 0 1 2.169 1.563c.028.07.054.149.107.307l.112.336a2.25 2.25 0 0 0 2.136 1.539A3.377 3.377 0 0 1 26 8.127V18.75c0 2.1 0 3.15-.409 3.953a3.75 3.75 0 0 1-1.639 1.638c-.802.409-1.852.409-3.952.409H7c-2.1 0-3.15 0-3.952-.409a3.75 3.75 0 0 1-1.64-1.639C1 21.9 1 20.85 1 18.75z"})),i||(i=a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.5 19.125a5.625 5.625 0 1 0 0-11.25 5.625 5.625 0 0 0 0 11.25"})))}},41628:function(e,n,t){"use strict";var r,i=t(94746);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}n.Z=function(e){return i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:21,height:20,fill:"none",viewBox:"0 0 21 20"},e),r||(r=i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.599 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666M10.599 5a.833.833 0 1 0 0-1.667.833.833 0 0 0 0 1.667M10.599 16.667a.833.833 0 1 0 0-1.667.833.833 0 0 0 0 1.667"})))}},13937:function(e,n,t){"use strict";var r,i=t(94746);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}n.Z=function(e){return i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),r||(r=i.createElement("path",{fill:"currentColor",d:"M18.23 2C19.73 2 21 3.27 21 4.77v14.46c0 1.5-1.27 2.77-2.77 2.77H5.77C4.27 22 3 20.73 3 19.23V4.77C3 3.27 4.27 2 5.77 2zm1.385 17.23V4.77c0-.808-.576-1.385-1.384-1.385H5.769c-.807 0-1.384.577-1.384 1.384v14.462c0 .807.577 1.384 1.384 1.384h12.462c.807 0 1.384-.576 1.384-1.384m-2.769-3.615c.346 0 .692.346.692.693 0 .346-.346.692-.692.692H7.154c-.346 0-.692-.346-.692-.692 0-.347.346-.693.692-.693zm0-9.307c.808 0 1.385.577 1.385 1.384 0 .808-.577 1.385-1.385 1.385-.115 0-.23 0-.346-.115l-1.846 1.846c0 .115.115.23.115.346 0 .807-.577 1.385-1.384 1.385-.808 0-1.385-.578-1.385-1.385 0-.115 0-.23.115-.346l-1.154-1.154c-.115.115-.23.115-.346.115s-.23 0-.346-.115l-1.846 1.961c.115.116.115.116.115.231 0 .808-.576 1.385-1.384 1.385s-1.385-.577-1.385-1.385c0-.807.577-1.385 1.385-1.385.115 0 .23 0 .346.116L9.346 8.73c0-.116-.115-.231-.115-.346C9.23 7.577 9.808 7 10.615 7 11.423 7 12 7.692 12 8.385v.23l1.154 1.154h.23c.116 0 .231 0 .347.116l1.846-1.847c-.116-.115-.116-.115-.116-.346 0-.692.577-1.384 1.385-1.384"})))}},43913:function(e,n,t){"use strict";var r,i=t(94746);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}n.Z=function(e){return i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none",viewBox:"0 0 16 18"},e),r||(r=i.createElement("path",{fill:"currentColor",d:"M15.326 7.352a2.31 2.31 0 0 0-1.628-.657c-.315 0-.629.057-.886.172l-2.714-2.715a2.28 2.28 0 0 0-.486-2.514A2.31 2.31 0 0 0 7.983.98a2.27 2.27 0 0 0-2.229 1.83 2.344 2.344 0 0 0 1.372 2.57c.086.03.2.086.286.086v7.03c-.286.085-.543.2-.8.371l-2.543-2.543c.028-.029.057-.057.085-.114.6-.915.486-2.115-.285-2.886-.4-.4-1-.629-1.6-.629a2.27 2.27 0 0 0-2.23 1.829 2.344 2.344 0 0 0 1.372 2.571c.6.258 1.229.229 1.8-.028l2.715 2.714a2.344 2.344 0 0 0 1.229 3.057c1 .43 2.171.058 2.771-.828.6-.914.486-2.114-.286-2.886a2.44 2.44 0 0 0-1.057-.6V5.466c.286-.085.572-.2.829-.4l2.514 2.515c-.2.286-.371.6-.428.943a2.344 2.344 0 0 0 1.371 2.571c1 .429 2.172.058 2.772-.828a2.38 2.38 0 0 0-.315-2.915m-8.4-4.514a1.15 1.15 0 0 1 1.057-.715 1.15 1.15 0 0 1 .8 1.972 1.14 1.14 0 0 1-1.629 0 1.2 1.2 0 0 1-.228-1.257M1.468 9.78c-.343-.314-.428-.8-.257-1.229a1.15 1.15 0 0 1 1.057-.714c.315 0 .6.114.8.343a1.14 1.14 0 0 1 0 1.629 1.13 1.13 0 0 1-1.6-.029m7.572 5.372a1.15 1.15 0 0 1-1.057.714 1.15 1.15 0 0 1-.8-1.971c.229-.2.514-.343.8-.343.314 0 .6.114.8.343.343.342.429.828.257 1.257m5.458-5.372a1.14 1.14 0 0 1-1.629 0 1.19 1.19 0 0 1-.257-1.257c.2-.4.629-.686 1.086-.686s.886.286 1.057.714c.171.429.086.915-.257 1.23"})))}},61592:function(e,n,t){"use strict";var r,i,a,o,s=t(94746);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}n.Z=function(e){return s.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:19,height:21,fill:"none",viewBox:"0 0 19 21"},e),r||(r=s.createElement("path",{fill:"currentColor",d:"M15.88.9c1.5 0 2.77 1.27 2.77 2.77v14.46c0 1.5-1.27 2.77-2.77 2.77H3.42c-1.5 0-2.77-1.27-2.77-2.77V3.67C.65 2.17 1.92.9 3.42.9zM3.42 2.285c-.808 0-1.385.577-1.385 1.385v14.46c0 .809.577 1.386 1.385 1.386h12.46c.809 0 1.386-.577 1.386-1.385V3.67c0-.808-.577-1.385-1.385-1.385z"})),i||(i=s.createElement("path",{stroke:"currentColor",d:"M15.88.9c1.5 0 2.77 1.27 2.77 2.77v14.46c0 1.5-1.27 2.77-2.77 2.77H3.42c-1.5 0-2.77-1.27-2.77-2.77V3.67C.65 2.17 1.92.9 3.42.9zM3.42 2.285c-.808 0-1.385.577-1.385 1.385v14.46c0 .809.577 1.386 1.385 1.386h12.46c.809 0 1.386-.577 1.386-1.385V3.67c0-.808-.577-1.385-1.385-1.385z"})),a||(a=s.createElement("path",{stroke:"currentColor",strokeWidth:1.516,d:"M1.44 15.499c.842.269 3.789 1.21 6.947-.807 2.405-1.536 3.287-2.931 5.684-2.42 1.895.403 2.947 2.017 3.79 3.227"})),o||(o=s.createElement("circle",{cx:7.44,cy:7.428,r:2.084,stroke:"currentColor",strokeWidth:1.516})))}},39080:function(e,n,t){"use strict";var r,i=t(94746);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}n.Z=function(e){return i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),r||(r=i.createElement("path",{fill:"currentColor",d:"M6.571 14.19a3.5 3.5 0 0 1 .053-.598q.027-.15.065-.294a3.3 3.3 0 0 1 .207-.564 3.6 3.6 0 0 1 .302-.52 3.5 3.5 0 0 1 .387-.458 3.5 3.5 0 0 1 .716-.544q.131-.075.268-.137.137-.064.278-.114t.288-.088a4 4 0 0 1 .294-.064v-.641a6.6 6.6 0 0 1-3.13-1.084A6.6 6.6 0 0 1 4.024 6.57a2 2 0 0 1-.397-.053 2 2 0 0 1-.382-.127 2 2 0 0 1-.35-.198 2 2 0 0 1-.305-.26 2 2 0 0 1-.25-.315 2 2 0 0 1-.101-.174 2 2 0 0 1-.152-.372 3 3 0 0 1-.048-.195 2.223 2.223 0 0 1 .002-.81 2 2 0 0 1 .208-.578 2 2 0 0 1 .518-.632 2 2 0 0 1 .528-.316 2.2 2.2 0 0 1 .393-.12 2.1 2.1 0 0 1 .817 0 2.3 2.3 0 0 1 .393.12 2.1 2.1 0 0 1 .68.453q.072.073.138.154a2 2 0 0 1 .228.34 2.2 2.2 0 0 1 .158.38 2.3 2.3 0 0 1 .08.403 2.1 2.1 0 0 1-1.015 2.006A5.5 5.5 0 0 0 6.928 8.13q1.155.759 2.5.89V6.49q-.163-.045-.317-.119a2.07 2.07 0 0 1-.964-.918 2.1 2.1 0 0 1-.243-.979 2.09 2.09 0 0 1 1.89-2.084 2.1 2.1 0 0 1 1.687.602 2.1 2.1 0 0 1 .454.68 2.1 2.1 0 0 1 .15.597 2.3 2.3 0 0 1-.018.544 2 2 0 0 1-.08.329q-.055.16-.134.31a2.1 2.1 0 0 1-.964.92 2 2 0 0 1-.318.12v2.526a5.45 5.45 0 0 0 2.501-.89 5.5 5.5 0 0 0 1.762-1.853 2.09 2.09 0 0 1-.984-2.21 2.3 2.3 0 0 1 .119-.393 2.1 2.1 0 0 1 .453-.679q.074-.074.154-.138a2 2 0 0 1 .341-.229 2.2 2.2 0 0 1 .38-.157 2.3 2.3 0 0 1 .403-.08 2.09 2.09 0 0 1 1.824.757 2 2 0 0 1 .228.34q.049.093.089.186a2 2 0 0 1 .119.394 2 2 0 0 1 .03.61 2.2 2.2 0 0 1-.143.584 2.06 2.06 0 0 1-.582.808 2.05 2.05 0 0 1-.697.394 2 2 0 0 1-.592.107A6.6 6.6 0 0 1 13.7 9.084a6.6 6.6 0 0 1-3.129 1.084v.641a3.2 3.2 0 0 1 .582.152 3.2 3.2 0 0 1 .546.25q.13.075.254.16a3.7 3.7 0 0 1 .462.384 3.3 3.3 0 0 1 .387.459 3.3 3.3 0 0 1 .418.797 3.6 3.6 0 0 1 .196.878 3.5 3.5 0 0 1-.053.969 3.4 3.4 0 0 1-.34.947 3.44 3.44 0 0 1-1.118 1.235 3.6 3.6 0 0 1-.593.317 3.6 3.6 0 0 1-.643.195 3.6 3.6 0 0 1-.669.065 3.45 3.45 0 0 1-1.616-.404 3.4 3.4 0 0 1-.56-.374 3.362 3.362 0 0 1-.676-.745 3.391 3.391 0 0 1-.43-.91 3.3 3.3 0 0 1-.147-.995m1.143 0q0 .947.67 1.616t1.616.67 1.617-.67q.669-.67.669-1.616t-.67-1.616a2.2 2.2 0 0 0-1.616-.67 2.2 2.2 0 0 0-1.616.67q-.67.67-.67 1.616m7.518-9.04a.92.92 0 0 1-.28-.675q0-.394.28-.673a.92.92 0 0 1 .673-.279q.394 0 .673.28.28.278.28.672a.92.92 0 0 1-.28.674.92.92 0 0 1-.673.279.92.92 0 0 1-.673-.279m-5.906 0a.92.92 0 0 1-.279-.675q0-.394.28-.673A.92.92 0 0 1 10 3.523a.92.92 0 0 1 .674.28q.279.278.279.672a.92.92 0 0 1-.28.674.92.92 0 0 1-.673.279.92.92 0 0 1-.674-.279m-5.904 0a.92.92 0 0 1-.28-.675q0-.394.28-.673a.92.92 0 0 1 .674-.279q.394 0 .672.28.28.278.28.672a.92.92 0 0 1-.28.674.92.92 0 0 1-.672.279.92.92 0 0 1-.674-.279"})))}},5872:function(e,n,t){"use strict";var r,i=t(94746);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}n.Z=function(e){return i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),r||(r=i.createElement("path",{fill:"currentColor",d:"M6.571 5.81a3.5 3.5 0 0 0 .053.598q.027.15.065.294a3.3 3.3 0 0 0 .207.564 3.6 3.6 0 0 0 .302.52 3.5 3.5 0 0 0 .387.458 3.5 3.5 0 0 0 .716.544q.131.075.268.137.137.064.278.114.142.052.288.088.146.039.294.064v.641a6.6 6.6 0 0 0-3.13 1.084 6.6 6.6 0 0 0-2.276 2.514 2 2 0 0 0-.397.053 2 2 0 0 0-.382.127 2 2 0 0 0-.35.198 2.2 2.2 0 0 0-.305.26 2 2 0 0 0-.25.315q-.055.084-.101.174a2 2 0 0 0-.152.372 3 3 0 0 0-.048.195 2.224 2.224 0 0 0 .002.81 2.1 2.1 0 0 0 .313.755 2.3 2.3 0 0 0 .26.317 2 2 0 0 0 .318.26 2.08 2.08 0 0 0 1.573.313 2.3 2.3 0 0 0 .393-.119 2.1 2.1 0 0 0 .68-.453q.072-.073.138-.154a2 2 0 0 0 .228-.34 2.2 2.2 0 0 0 .158-.38 2.3 2.3 0 0 0 .08-.403 2.09 2.09 0 0 0-1.015-2.006 5.5 5.5 0 0 1 1.762-1.854 5.45 5.45 0 0 1 2.5-.89v2.529q-.163.045-.317.119a2.07 2.07 0 0 0-.964.918 2.1 2.1 0 0 0-.243.979 2.094 2.094 0 0 0 3.425 1.619 2 2 0 0 0 .291-.29 2.5 2.5 0 0 0 .228-.342 2.2 2.2 0 0 0 .157-.38 2.08 2.08 0 0 0-.152-1.586 2.11 2.11 0 0 0-1.282-1.038V10.98a5.45 5.45 0 0 1 2.501.89 5.5 5.5 0 0 1 1.762 1.853 2.08 2.08 0 0 0-.955 1.264 2.1 2.1 0 0 0 .543 2.018q.074.073.154.138a2 2 0 0 0 .527.316 2.2 2.2 0 0 0 .597.15 2.094 2.094 0 1 0 .276-4.18 6.6 6.6 0 0 0-2.276-2.514 6.6 6.6 0 0 0-3.129-1.084v-.641a3.2 3.2 0 0 0 .582-.152 3.2 3.2 0 0 0 .546-.25q.13-.075.254-.16a3.7 3.7 0 0 0 .462-.384 3.3 3.3 0 0 0 .387-.459 3.3 3.3 0 0 0 .418-.797 3.6 3.6 0 0 0 .196-.878 3.5 3.5 0 0 0-.053-.969 3.4 3.4 0 0 0-.34-.947 3.43 3.43 0 0 0-2.354-1.747A3.6 3.6 0 0 0 10 2.383a3.45 3.45 0 0 0-1.616.404 3.4 3.4 0 0 0-.56.374q-.129.106-.249.226a3.4 3.4 0 0 0-.426.519q-.093.14-.173.289a3.4 3.4 0 0 0-.256.62 3.3 3.3 0 0 0-.149.996m1.143 0q0-.947.67-1.616T10 3.524t1.617.67.669 1.616-.67 1.616q-.669.67-1.616.67a2.2 2.2 0 0 1-1.616-.67 2.2 2.2 0 0 1-.67-1.616m7.518 9.04a.92.92 0 0 0-.28.675q0 .394.28.673.278.279.673.279a.92.92 0 0 0 .673-.28.92.92 0 0 0 .28-.672.92.92 0 0 0-.28-.674.92.92 0 0 0-.673-.279.92.92 0 0 0-.673.279m-5.906 0a.92.92 0 0 0-.279.675q0 .394.28.673a.92.92 0 0 0 .673.279.92.92 0 0 0 .674-.28.92.92 0 0 0 .279-.672.92.92 0 0 0-.28-.674.92.92 0 0 0-.673-.279.92.92 0 0 0-.674.279m-5.904 0a.92.92 0 0 0-.28.675q0 .394.28.673.278.279.674.279a.92.92 0 0 0 .672-.28.92.92 0 0 0 .28-.672.92.92 0 0 0-.28-.674.92.92 0 0 0-.672-.279.92.92 0 0 0-.674.279"})))}},44808:function(e,n,t){"use strict";var r,i=t(94746);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}n.Z=function(e){return i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),r||(r=i.createElement("path",{fill:"currentColor",d:"M3.417 10.728h.087a.727.727 0 0 0 .727-.647A5.81 5.81 0 0 1 8.104 5.25a2.18 2.18 0 1 0-.24-1.454 7.27 7.27 0 0 0-5.087 6.14.727.727 0 0 0 .64.793m8.524 5.48a5.88 5.88 0 0 1-5.72-1.076 2.2 2.2 0 0 0 .146-.77 2.18 2.18 0 1 0-2.18 2.18 2.2 2.2 0 0 0 1.09-.298 7.27 7.27 0 0 0 7.143 1.337.727.727 0 0 0-.48-1.374M10 7.82a2.907 2.907 0 1 0 0 5.814 2.907 2.907 0 0 0 0-5.814m0 4.36a1.453 1.453 0 1 1 0-2.907 1.453 1.453 0 0 1 0 2.907m7.034.378a7.267 7.267 0 0 0-2.187-7.245.726.726 0 1 0-.974 1.054 5.81 5.81 0 0 1 1.751 5.813 2.18 2.18 0 1 0 1.41.356z"})))}},11381:function(e,n,t){"use strict";var r,i=t(94746);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}n.Z=function(e){return i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:21,height:21,fill:"none",viewBox:"0 0 21 21"},e),r||(r=i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7.168h10m0 0a2.5 2.5 0 1 0 5 0 2.5 2.5 0 0 0-5 0m-5 6.667h10m-10 0a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"})))}},34637:function(e,n,t){"use strict";var r,i,a,o,s=t(94746);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}n.Z=function(e){return s.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:20,height:21,fill:"none",viewBox:"0 0 20 21"},e),r||(r=s.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.67,d:"M1.665 6.923h2.363m14.307 0h-5.876"})),i||(i=s.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.67,d:"M1.665 14.031h6.068m10.602 0H16.1"})),a||(a=s.createElement("circle",{cx:8.309,cy:6.968,r:2.033,stroke:"currentColor",strokeWidth:1.67})),o||(o=s.createElement("circle",{cx:11.819,cy:14.032,r:2.033,stroke:"currentColor",strokeWidth:1.67})))}},3712:function(e,n,t){"use strict";var r,i=t(94746);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}n.Z=function(e){return i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),r||(r=i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m10.833 1.668-7.422 8.907c-.29.348-.436.523-.438.67a.42.42 0 0 0 .155.33c.114.093.341.093.795.093H10l-.833 6.667 7.422-8.907c.29-.349.436-.523.438-.67a.42.42 0 0 0-.155-.33c-.114-.093-.341-.093-.795-.093H10z"})))}},95927:function(e,n,t){"use strict";t.d(n,{Y$:function(){return _},gv:function(){return R}});var r=t(5194),i=t(1780),a=t(50059),o=t(45008),s=t(57437),l=t(78693),c=t(59832),u=t(93383),d=t(19643),h=t(16210),f=t(2265),p=t(54632),v=t(36760),m=t.n(v),g=t(14801),x=t.n(g),b=t(79259),w=t(34040),y=t(39207),C=t(22322),S=t(7870),j=t(26058),k=t(71931);function E(){var e=(0,o._)(["\n  clip: rect(0 0 0 0);\n  clip-path: inset(50%);\n  height: 1px;\n  overflow: hidden;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  white-space: nowrap;\n  width: 1px;\n"]);return E=function(){return e},e}function _(e){var n=e.onConfirm,t=e.onCancel;return new Promise(function(a,o){var l=document.createElement("div");l.style.position="fixed",l.style.display="relative",l.style.zIndex="2001",l.style.height="100vh",l.style.width="100vw",l.style.backgroundColor="rgba(0, 0, 0, 0.36)",l.onmousedown=function(e){e.target===l&&(null==c||c.unmount(),l.remove(),t(),o())},document.body.appendChild(l);var c=(0,w.createRoot)(l);c.render((0,s.jsx)(I,(0,i._)((0,r._)({},e),{onConfirm:function(){n(),c.unmount(),l.remove(),a()},onCancel:function(){t(),c.unmount(),l.remove(),o()}})))})}var T=function(e){var n=e.onConfirm,t=(0,a._)((0,f.useState)(),2),r=t[0],i=t[1],o=(0,f.useRef)(50),s=(0,a._)((0,f.useState)(!1),2),l=s[0],c=s[1],u=(0,a._)((0,f.useState)(!0),2),d=u[0],h=u[1],p=(0,a._)((0,f.useState)(!1),2),v=p[0],m=p[1];(0,f.useEffect)(function(){},[r]),(0,f.useEffect)(function(){(0,S.dW)("SearchDetail-advanceShareOpen",{client:(0,j.Fk)(),sessionId:e.sessionId,imgId:e.imgId}),(0,y.Bf1)().then(function(e){0===e.data.errCode&&(o.current=e.data.data)})},[e.sessionId,e.imgId]);var g=(0,f.useCallback)(function(e){var n=e.target.files[0];n&&(i(n),h(!1),m(!0))},[]),x=(0,f.useCallback)(function(){(0,y.Fkn)().then(function(t){if(0===t.data.errCode){if(1===t.data.data.auditState){(0,S.dW)("SearchDetail-advanceSharePollingGetPass",{client:(0,j.Fk)(),sessionId:e.sessionId,imgId:e.imgId}),n(),c(!1),(0,C.y)("您已获得".concat(o.current,"次深度推理！"),{variant:"success",autoHideDuration:5e3});return}}else(0,S.dW)("SearchDetail-advanceSharePollingGetError",{client:(0,j.Fk)(),response:t.data,sessionId:e.sessionId,imgId:e.imgId});setTimeout(function(){x()},3e3)})},[e.sessionId,e.imgId]),b=(0,f.useCallback)(function(){var n=new FormData;n.append("files",r),(0,S.dW)("SearchDetail-advanceShareClickSubmit",{client:(0,j.Fk)(),sessionId:e.sessionId,imgId:e.imgId}),c(!0),(0,y.l$f)(n).then(function(e){(0,S.dW)("share-math-commit-response",{client:(0,j.Fk)(),response:e.data}),0===e.data.errCode?x():(c(!1),(0,C.y)("提交失败",{variant:"error",autoHideDuration:3e3}))})},[r,e.sessionId,e.imgId]);return{shareReward:o.current,setFile:i,file:r,loading:l,commit:b,disable:d,ready:v,fileChange:g}},I=function(e){var n=e.onShare,t=e.onCancel,r=T(e),i=r.shareReward,a=r.loading,o=r.disable,u=r.ready,d=r.fileChange,h=r.commit;return(0,s.jsx)(s.Fragment,{children:a?(0,s.jsxs)(l.Z,{sx:{height:"100%",width:"100%"},display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:[(0,s.jsxs)("svg",{className:x().rotatingElement,width:"121",height:"121",viewBox:"0 0 121 121",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M113.438 60.5C113.438 67.4519 112.068 74.3356 109.408 80.7583C106.748 87.181 102.848 93.0168 97.9325 97.9325C93.0168 102.848 87.181 106.748 80.7583 109.408C74.3356 112.068 67.4518 113.438 60.5 113.437C53.5481 113.437 46.6644 112.068 40.2417 109.408C33.819 106.748 27.9832 102.848 23.0675 97.9325C18.1518 93.0168 14.2525 87.181 11.5921 80.7583C8.93176 74.3356 7.5625 67.4518 7.5625 60.5C7.5625 53.5481 8.93177 46.6644 11.5921 40.2417C14.2525 33.819 18.1518 27.9832 23.0676 23.0675C27.9833 18.1518 33.819 14.2525 40.2417 11.5921C46.6644 8.93176 53.5482 7.5625 60.5 7.5625C67.4519 7.5625 74.3357 8.93178 80.7583 11.5921C87.181 14.2525 93.0168 18.1519 97.9325 23.0676C102.848 27.9833 106.748 33.8191 109.408 40.2417C112.068 46.6644 113.438 53.5482 113.438 60.5L113.438 60.5Z",stroke:"#F2F4F7",strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M60.5 7.5625C67.4519 7.5625 74.3356 8.93177 80.7583 11.5921C87.181 14.2525 93.0168 18.1518 97.9325 23.0675C102.848 27.9832 106.748 33.819 109.408 40.2417C112.068 46.6644 113.438 53.5482 113.438 60.5",stroke:"#1570EF",strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,s.jsx)(l.Z,{fontSize:"24px",lineHeight:"24px",mt:2,color:"white",children:"自动审核中，请不要离开"})]}):(0,s.jsxs)(l.Z,{sx:{width:"100%",backgroundColor:"white",borderTopLeftRadius:"8px",borderTopRightRadius:"8px",position:"absolute",bottom:0},children:[(0,s.jsxs)(l.Z,{sx:{borderBottom:"1px solid #EDEDED",position:"relative",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",color:"#344054"},children:[(0,s.jsx)(l.Z,{children:"分享"}),(0,s.jsx)(l.Z,{sx:{position:"absolute",right:"20px"},children:(0,s.jsx)(c.Z,{onClick:t,children:(0,s.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M13 1L1 13M1 1L13 13",stroke:"#667085",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})})]}),(0,s.jsxs)(l.Z,{sx:{padding:"16px"},children:[(0,s.jsxs)(l.Z,{color:"#667085",lineHeight:"24px",borderBottom:"1px solid #EDEDED",paddingBottom:"16px",children:["分享到微信群/朋友圈/QQ群，即可获得当日",i,"次深度推理，或者选择去购买。"]}),(0,s.jsxs)(l.Z,{borderBottom:"1px solid #EDEDED",pb:2,children:[(0,s.jsx)(l.Z,{color:"#344054",lineHeight:"24px",pb:2,pt:2,children:"1.选择分享方式"}),(0,s.jsxs)(l.Z,{display:"flex",gap:"50px",ml:2,onClick:function(){(0,S.dW)("SearchDetail-advanceShareClickWx",{client:(0,j.Fk)()}),n()},children:[(0,s.jsx)(L,{title:"微信",children:(0,s.jsxs)("svg",{width:"50",height:"51",viewBox:"0 0 50 51",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsxs)("g",{clipPath:"url(#clip0_10164_24227)",children:[(0,s.jsx)("path",{d:"M15.5898 19.3182C15.5898 19.7522 15.7622 20.1685 16.0691 20.4753C16.376 20.7822 16.7922 20.9546 17.2262 20.9546C17.6602 20.9546 18.0764 20.7822 18.3833 20.4753C18.6902 20.1685 18.8626 19.7522 18.8626 19.3182C18.8626 18.8843 18.6902 18.468 18.3833 18.1612C18.0764 17.8543 17.6602 17.6819 17.2262 17.6819C16.7922 17.6819 16.376 17.8543 16.0691 18.1612C15.7622 18.468 15.5898 18.8843 15.5898 19.3182Z",fill:"#50B674"}),(0,s.jsx)("path",{d:"M22.9102 19.2728C22.9102 19.7068 23.0826 20.123 23.3894 20.4299C23.6963 20.7368 24.1125 20.9092 24.5465 20.9092C24.9805 20.9092 25.3967 20.7368 25.7036 20.4299C26.0105 20.123 26.1829 19.7068 26.1829 19.2728C26.1829 18.8388 26.0105 18.4226 25.7036 18.1158C25.3967 17.8089 24.9805 17.6365 24.5465 17.6365C24.1125 17.6365 23.6963 17.8089 23.3894 18.1158C23.0826 18.4226 22.9102 18.8388 22.9102 19.2728Z",fill:"#50B674"}),(0,s.jsx)("path",{d:"M27 26.591C27 26.8923 27.1197 27.1814 27.3328 27.3945C27.5459 27.6076 27.835 27.7273 28.1364 27.7273C28.4377 27.7273 28.7268 27.6076 28.9399 27.3945C29.153 27.1814 29.2727 26.8923 29.2727 26.591C29.2727 26.2896 29.153 26.0005 28.9399 25.7874C28.7268 25.5743 28.4377 25.4546 28.1364 25.4546C27.835 25.4546 27.5459 25.5743 27.3328 25.7874C27.1197 26.0005 27 26.2896 27 26.591Z",fill:"#50B674"}),(0,s.jsx)("path",{d:"M32.7734 26.6818C32.7734 26.9832 32.8932 27.2722 33.1063 27.4853C33.3194 27.6984 33.6084 27.8181 33.9098 27.8181C34.2112 27.8181 34.5002 27.6984 34.7133 27.4853C34.9264 27.2722 35.0462 26.9832 35.0462 26.6818C35.0462 26.3804 34.9264 26.0914 34.7133 25.8782C34.5002 25.6651 34.2112 25.5454 33.9098 25.5454C33.6084 25.5454 33.3194 25.6651 33.1063 25.8782C32.8932 26.0914 32.7734 26.3804 32.7734 26.6818Z",fill:"#50B674"}),(0,s.jsx)("path",{d:"M25 0.5C11.1818 0.5 0 11.6818 0 25.5C0 39.3182 11.1818 50.5 25 50.5C38.8182 50.5 50 39.3182 50 25.5C50 11.6818 38.8182 0.5 25 0.5ZM20.7273 31.2727C19.4091 31.2727 18.3636 31 17.0455 30.7273L13.3636 32.5455L14.4091 29.4091C11.7727 27.5909 10.2273 25.2273 10.2273 22.3182C10.2273 17.3182 14.9545 13.4091 20.7273 13.4091C25.8636 13.4091 30.4091 16.5455 31.3182 20.7727C31 20.7273 30.6364 20.7273 30.3182 20.7273C25.3182 20.7273 21.4091 24.4545 21.4091 29.0455C21.4091 29.8182 21.5455 30.5455 21.7273 31.2273C21.3636 31.2273 21.0455 31.2727 20.7273 31.2727ZM36.0909 34.9545L36.8636 37.5909L34 36C32.9545 36.2727 31.9091 36.5455 30.8636 36.5455C25.8636 36.5455 21.9545 33.1364 21.9545 28.9545C21.9545 24.7727 25.8636 21.3636 30.8636 21.3636C35.5909 21.3636 39.7727 24.7727 39.7727 28.9545C39.7727 31.2727 38.2273 33.3636 36.0909 34.9545Z",fill:"#50B674"})]}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_10164_24227",children:(0,s.jsx)("rect",{width:"50",height:"50",fill:"white",transform:"translate(0 0.5)"})})})]})}),(0,s.jsx)(L,{title:"朋友圈",children:(0,s.jsxs)("svg",{width:"50",height:"51",viewBox:"0 0 50 51",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsxs)("g",{clipPath:"url(#clip0_10164_24294)",children:[(0,s.jsx)("path",{d:"M25.625 16L13.125 3.5C8.125 6.25 4.125 10.625 1.875 16H25.625Z",fill:"#F37520"}),(0,s.jsx)("path",{d:"M34.5 26L47 13.5C44.25 8.5 39.875 4.5 34.5 2.375V26Z",fill:"#6167AF"}),(0,s.jsx)("path",{d:"M24.5 34.875L37 47.375C42 44.625 46 40.25 48.125 34.875H24.5Z",fill:"#42AAE0"}),(0,s.jsx)("path",{d:"M49 32.5C49.625 30.25 50 27.875 50 25.5C50 22 49.25 18.75 48 15.75L31.375 32.5H49Z",fill:"#5C7CBD"}),(0,s.jsx)("path",{d:"M32.125 19.125V1.5C29.875 0.875 27.5 0.5 25 0.5C21.625 0.5 18.375 1.25 15.375 2.375L32.125 19.125Z",fill:"#EF5654"}),(0,s.jsx)("path",{d:"M1 18.375C0.375 20.625 0 23 0 25.5C0 29 0.75 32.25 2 35.25L18.75 18.375H1Z",fill:"#FFC817"}),(0,s.jsx)("path",{d:"M18 31.75V49.5C20.25 50.125 22.625 50.5 25 50.5C28.5 50.5 31.75 49.75 34.75 48.5L18 31.75Z",fill:"#71BE44"}),(0,s.jsx)("path",{d:"M15.625 24.875L3.125 37.375C5.875 42.375 10.375 46.375 15.625 48.625V24.875Z",fill:"#9BCA3B"})]}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_10164_24294",children:(0,s.jsx)("rect",{width:"50",height:"50",fill:"white",transform:"translate(0 0.5)"})})})]})})]})]}),(0,s.jsxs)(l.Z,{pt:2,pb:2,children:[(0,s.jsx)(l.Z,{color:"#344054",lineHeight:"24px",pb:2,children:"2.上传您截图到此处"}),(0,s.jsx)(Z,{fileChange:d,sx:{height:"135px",width:"100%"},ready:u,isH5:!0})]}),(0,s.jsx)(p.Z,{variant:"contained",fullWidth:!0,disabled:o,onClick:h,children:"提交"})]})]})})},L=function(e){var n=e.title,t=e.children;return(0,s.jsxs)(l.Z,{className:"fc-ac fc-jc",children:[t,(0,s.jsx)(l.Z,{mt:2,children:n})]})},R=function(e){var n=e.showUrl;e.onConfirm;var t=T(e),r=t.shareReward,i=t.loading,a=t.disable,o=t.ready,c=t.fileChange,h=t.commit,v=(0,f.useCallback)(function(){n&&((0,S.dW)("SearchDetail-advanceShareClick",{sessionId:e.sessionId,imgId:e.imgId}),(0,S.vQ)(n).then(function(e){(0,C.y)("复制分享链接成功",{variant:"success",autoHideDuration:1e3})}))},[n,e.sessionId,e.imgId]);return(0,s.jsxs)(l.Z,{children:[(0,s.jsxs)(l.Z,{mb:2,children:["分享链接到微信群/朋友圈/QQ群,  即可获得当日",r,"次深度推理"]}),(0,s.jsxs)(l.Z,{mb:2,display:"flex",style:{height:"40px",padding:"8px 8px 8px 0",border:"1px solid #EAECF0"},flexDirection:"row",justifyContent:"space-between",children:[(0,s.jsx)(u.ZP,{value:n,readOnly:!0,sx:{ml:1,flex:1,color:"var(--black)"},placeholder:"https://metaso.cn/s/...",inputProps:{"aria-label":"分享链接"}}),(0,s.jsx)(l.Z,{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px",marginLeft:"10px",children:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(p.Z,{variant:"contained",onClick:v,children:"复制"})})})]}),(0,s.jsx)(Z,{fileChange:c,ready:o,loading:i,sx:{height:"150px"}}),(0,s.jsx)(d.Z,{mt:2,direction:"row",justifyContent:"right",children:(0,s.jsx)(p.Z,{variant:"contained",onClick:h,disabled:a||i,children:"确认提交"})})]})},Z=function(e){var n=e.fileChange,t=e.sx,i=e.ready,o=e.isH5,c=e.loading,u=(0,f.useRef)(null),d=(0,a._)((0,f.useState)(),2),h=d[0],p=d[1],v=(0,k.y1)(function(){(0,S.dW)("SearchDetail-advanceShareClickUpload",{loading:c,client:(0,j.Fk)()})},1e3),g=(0,f.useCallback)(function(){c||i||(v(),u.current&&u.current.click())},[c,i]),w=(0,f.useCallback)(function(e){var t=e.target.files[0],r=new FileReader;r.readAsDataURL(t),r.onload=function(e){p(e.target.result)},n(e)},[]);return(0,f.useEffect)(function(){},[]),(0,s.jsxs)(l.Z,{sx:(0,r._)({},t),className:m()(x().metaDragUploadBox,"fc-ac fc-jc"),onClick:g,children:[o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.Z,{className:"fc-ac fc-jc",sx:{border:"1px solid var(--border-color2)",borderRadius:"8px",width:48,height:48,boxShadow:"0px 1px 2px 0px #1018280D",position:"relative"},children:[(0,s.jsx)(b.Z,{}),i&&(0,s.jsx)(l.Z,{sx:{position:"absolute",right:"-10px",bottom:"-10px"},children:(0,s.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M9 0C4.02872 0 0 4.02872 0 9C0 13.9713 4.02872 18 9 18C13.9713 18 18 13.9713 18 9C18.0038 4.02872 13.9713 0 9 0ZM13.9067 6.7462L8.33868 12.318C8.11824 12.5384 7.76098 12.5384 7.54434 12.318L4.09713 8.87078C3.87669 8.65034 3.87669 8.29307 4.09713 8.07644L4.36318 7.81039C4.58361 7.58995 4.94088 7.58995 5.15752 7.81039L7.94341 10.5963L12.8463 5.68581C13.0667 5.46537 13.424 5.46537 13.6406 5.68581L13.9067 5.95186C14.1271 6.1723 14.1271 6.52576 13.9067 6.7462Z",fill:"#1570EF"})})})]}),(0,s.jsxs)(l.Z,{sx:{color:"".concat(i?"":"#1570EF"),display:"inline-block",fontSize:"14px",lineHeight:"24px",fontWeight:"700",marginTop:"10px"},children:[" ",i?"上传完成":"点击上传截图"]}),(0,s.jsx)(l.Z,{sx:{color:"#98A2B3",fontSize:"9px",lineHeight:"14px"},children:"微信/朋友圈/QQ群分享截图"})]}):(0,s.jsx)(s.Fragment,{children:h&&i?(0,s.jsx)(s.Fragment,{children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{className:x().rotatingElement,width:"48px",height:"48px",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"49",viewBox:"0 0 48 49",fill:"none",children:[(0,s.jsx)("path",{d:"M45 24.5C45 27.2578 44.4568 29.9885 43.4015 32.5364C42.3461 35.0842 40.7993 37.3992 38.8492 39.3492C36.8992 41.2993 34.5842 42.8461 32.0364 43.9015C29.4885 44.9568 26.7578 45.5 24 45.5C21.2422 45.5 18.5115 44.9568 15.9636 43.9015C13.4158 42.8461 11.1008 41.2993 9.15075 39.3492C7.20072 37.3992 5.65388 35.0842 4.59853 32.5363C3.54318 29.9885 3 27.2578 3 24.5C3 21.7422 3.54318 19.0115 4.59853 16.4636C5.65388 13.9158 7.20073 11.6008 9.15076 9.65075C11.1008 7.70072 13.4158 6.15387 15.9637 5.09853C18.5115 4.04318 21.2423 3.5 24 3.5C26.7578 3.5 29.4885 4.04318 32.0364 5.09853C34.5842 6.15388 36.8992 7.70073 38.8493 9.65077C40.7993 11.6008 42.3461 13.9158 43.4015 16.4637C44.4568 19.0115 45 21.7423 45 24.5L45 24.5Z",stroke:"#F2F4F7",strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M24 3.5C26.7578 3.5 29.4885 4.04318 32.0364 5.09853C34.5842 6.15388 36.8992 7.70073 38.8492 9.65076C40.7993 11.6008 42.3461 13.9158 43.4015 16.4637C44.4568 19.0115 45 21.7422 45 24.5",stroke:"#1570EF",strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,s.jsx)(l.Z,{fontSize:"14px",lineHeight:"24px",fontWeight:700,mt:"10px",children:"自动审核中，请不要离开"})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("img",{src:h,width:"auto",height:"100%"})})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{className:"fc-ac fc-jc",sx:{border:"1px solid var(--border-color2)",borderRadius:"8px",width:48,height:48,boxShadow:"0px 1px 2px 0px #1018280D",position:"relative"},children:(0,s.jsx)(b.Z,{})}),(0,s.jsx)(l.Z,{sx:{color:"#1570EF",display:"inline-block",fontSize:"14px",lineHeight:"24px",fontWeight:"700",marginTop:"10px"},children:" 点击上传分享截图"})]})}),(0,s.jsx)(M,{ref:u,multiple:!1,type:"file",accept:".jpg,.jpeg,.png,.webp",onChange:o?n:w})]})},M=(0,h.ZP)("input")(E())},20042:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var r=t(5194),i=t(1780),a=t(46796),o=t(50059),s=t(85735),l=t(57437),c=t(78693),u=t(2265),d=t(74634),h=t(58414),f=t(7870),p=t(95597);function v(e){var n=e.open,t=e.children,v=e.onOpenChange,m=e.sx,g=e.direction,x=e.containsArea,b=(0,a._)(e,["open","children","onOpenChange","sx","direction","containsArea"]),w=(0,o._)((0,d.U8)(n,!1,{isControlled:!0,onChange:v}),2),y=w[0],C=w[1],S=(0,u.useRef)(null),j=p.N.get(void 0===x?[]:x);return(0,d.g4)(y,function(){C(!1)},[S].concat((0,s._)(Array.isArray(j)?j:[j])),"click",!1),(0,l.jsx)(c.Z,(0,i._)((0,r._)({className:"attach-drawer-root",sx:(0,f.Vc)({pointerEvents:"none",overflow:"hidden"},m),ref:S},b),{children:(0,l.jsx)(h.Z,{in:y,direction:void 0===g?"up":g,container:S.current,children:(0,l.jsx)(c.Z,{className:"attach-drawer-animation-layer",sx:(0,f.Vc)({pointerEvents:"auto",bgcolor:"var(--tooltip-bg,white)"}),children:t})})}))}},41486:function(e,n,t){"use strict";t.d(n,{ks:function(){return ee},ZP:function(){return es},ZC:function(){return en},BN:function(){return ea},Zf:function(){return eo}});var r,i,a,o,s,l,c,u,d,h,f,p,v,m,g,x=t(5194),b=t(1780),w=t(50059),y=t(57437),C=t(2265),S=t(22322),j=t(27648),k=t(75825),E=t(39207),_=t(40100),T=t(78693),I=t(59832),L=t(35389),R=t(54632),Z=t(34040),M=t(55833),D=t(96339),A=t(89831),O=t(28898),N=t(23760),P=t(42796),F=t(94064),H=t(24657),G=t(48899),W=t(93015),B=t(3604),q=t(35686),z=t(54911),U=t(51182),V=t(94746);function K(){return(K=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}function Q(){return(Q=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}function Y(){return(Y=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}function J(){return(J=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}function X(){return(X=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var $=t(5634),ee={pdf:(0,y.jsx)(P.Z,{}),ppt:(0,y.jsx)(F.Z,{}),pptx:(0,y.jsx)(F.Z,{}),doc:(0,y.jsx)(H.Z,{}),docx:(0,y.jsx)(H.Z,{}),html:(0,y.jsx)(W.Z,{}),txt:(0,y.jsx)(G.Z,{}),md:(0,y.jsx)($.Z,{}),epub:(0,y.jsx)(q.Z,{}),mobi:(0,y.jsx)(z.Z,{}),azw3:(0,y.jsx)(U.Z,{}),png:(0,y.jsx)(function(e){return V.createElement("svg",K({xmlns:"http://www.w3.org/2000/svg",width:35,height:35,fill:"none",viewBox:"0 0 35 35"},e),r||(r=V.createElement("path",{fill:"#7F56D9",d:"M3.5 4a4 4 0 0 1 4-4H21l10.5 10.5V31a4 4 0 0 1-4 4h-20a4 4 0 0 1-4-4z"})),i||(i=V.createElement("path",{fill:"#fff",d:"m21 0 10.5 10.5H25a4 4 0 0 1-4-4z",opacity:.3})),a||(a=V.createElement("path",{fill:"#fff",d:"M8.423 29.125v-6.546h2.582q.745 0 1.27.285.523.281.798.783.278.498.278 1.15 0 .653-.281 1.151a1.94 1.94 0 0 1-.815.777q-.53.278-1.285.278H9.324v-1.11h1.422q.4 0 .659-.137a.9.9 0 0 0 .39-.386 1.2 1.2 0 0 0 .13-.572 1.2 1.2 0 0 0-.13-.57.88.88 0 0 0-.39-.38q-.262-.137-.665-.137h-.933v5.414zm11.302-6.546v6.546h-1.196l-2.847-4.12h-.048v4.12H14.25v-6.546h1.214l2.826 4.117h.057v-4.117zm5.483 2.116a1.4 1.4 0 0 0-.188-.412 1.275 1.275 0 0 0-.694-.502 1.7 1.7 0 0 0-.489-.067q-.501 0-.882.25a1.64 1.64 0 0 0-.588.725q-.21.472-.21 1.157 0 .684.207 1.163.207.48.588.732.38.25.898.25.47 0 .802-.167.336-.169.512-.476.179-.306.179-.726l.28.042h-1.687v-1.042h2.74v.825q0 .863-.365 1.483a2.5 2.5 0 0 1-1.003.952q-.64.333-1.464.332-.921 0-1.617-.405a2.8 2.8 0 0 1-1.087-1.16q-.387-.755-.387-1.79 0-.796.23-1.42a3 3 0 0 1 .652-1.06q.42-.434.975-.662.555-.227 1.205-.227.556 0 1.035.163.48.16.85.454.374.295.611.7.237.402.304.888z"})))},{}),webp:(0,y.jsx)(function(e){return V.createElement("svg",Q({xmlns:"http://www.w3.org/2000/svg",width:35,height:35,fill:"none",viewBox:"0 0 35 35"},e),o||(o=V.createElement("path",{fill:"#7F56D9",d:"M3.5 4a4 4 0 0 1 4-4H21l10.5 10.5V31a4 4 0 0 1-4 4h-20a4 4 0 0 1-4-4z"})),s||(s=V.createElement("path",{fill:"#fff",d:"m21 0 10.5 10.5H25a4 4 0 0 1-4-4z",opacity:.3})),l||(l=V.createElement("path",{fill:"#fff",d:"m6.236 29.125-1.873-6.546h1.511l1.084 4.549h.054l1.196-4.549h1.294l1.192 4.558h.058l1.083-4.558h1.512l-1.873 6.546h-1.349l-1.246-4.28h-.051l-1.244 4.28zm7.851 0v-6.546h4.411v1.142h-3.027v1.56h2.8v1.14h-2.8v1.563h3.04v1.141zm5.511 0v-6.546h2.62q.724 0 1.206.215.482.213.725.594.243.377.243.87 0 .383-.153.674-.153.288-.422.473-.266.182-.607.259v.064q.373.015.7.21.33.195.533.547.205.349.205.831 0 .52-.259.93-.256.406-.757.643-.502.236-1.237.236zm1.384-1.131h1.128q.579 0 .844-.22a.74.74 0 0 0 .265-.595.9.9 0 0 0-.13-.48.9.9 0 0 0-.375-.326 1.3 1.3 0 0 0-.572-.118h-1.16zm0-2.675h1.026q.285 0 .505-.1a.84.84 0 0 0 .351-.287.75.75 0 0 0 .132-.444.72.72 0 0 0-.253-.572q-.25-.218-.71-.218h-1.05zm4.566 3.806v-6.546h2.583q.745 0 1.269.285.523.281.799.783.278.498.278 1.15 0 .653-.282 1.151a1.94 1.94 0 0 1-.815.777q-.53.278-1.284.278H26.45v-1.11h1.422q.4 0 .658-.137a.9.9 0 0 0 .39-.386q.13-.25.131-.572 0-.326-.13-.57a.88.88 0 0 0-.39-.38q-.263-.137-.665-.137h-.934v5.414z"})))},{}),bmp:(0,y.jsx)(function(e){return V.createElement("svg",Y({xmlns:"http://www.w3.org/2000/svg",width:35,height:35,fill:"none",viewBox:"0 0 35 35"},e),c||(c=V.createElement("path",{fill:"#7F56D9",d:"M3.5 4a4 4 0 0 1 4-4H21l10.5 10.5V31a4 4 0 0 1-4 4h-20a4 4 0 0 1-4-4z"})),u||(u=V.createElement("path",{fill:"#fff",d:"m21 0 10.5 10.5H25a4 4 0 0 1-4-4z",opacity:.3})),d||(d=V.createElement("path",{fill:"#fff",d:"M8.063 29.125v-6.546h2.62q.722 0 1.205.215.483.213.726.594.243.377.243.87 0 .383-.154.674-.153.288-.422.473-.265.182-.607.259v.064q.375.015.7.21.33.195.534.547.204.349.204.831 0 .52-.259.93-.255.406-.757.643-.502.236-1.237.236zm1.383-1.131h1.129q.578 0 .843-.22a.74.74 0 0 0 .266-.595.9.9 0 0 0-.131-.48.9.9 0 0 0-.374-.326 1.3 1.3 0 0 0-.572-.118h-1.16zm0-2.675h1.026q.285 0 .505-.1a.84.84 0 0 0 .352-.287.75.75 0 0 0 .13-.444.72.72 0 0 0-.252-.572q-.248-.218-.71-.218h-1.05zm4.567-2.74h1.706l1.803 4.398h.077L19.4 22.58h1.707v6.546h-1.342v-4.26h-.055l-1.694 4.228h-.914l-1.694-4.244h-.054v4.276h-1.342zm8.235 6.546v-6.546h2.582q.745 0 1.27.285.523.281.798.783.279.498.278 1.15 0 .653-.28 1.151a1.94 1.94 0 0 1-.816.777q-.53.278-1.285.278H23.15v-1.11h1.423q.399 0 .658-.137a.9.9 0 0 0 .39-.386 1.2 1.2 0 0 0 .13-.572 1.2 1.2 0 0 0-.13-.57.88.88 0 0 0-.39-.38q-.262-.137-.665-.137h-.933v5.414z"})))},{}),jpg:(0,y.jsx)(function(e){return V.createElement("svg",J({xmlns:"http://www.w3.org/2000/svg",width:35,height:35,fill:"none",viewBox:"0 0 35 35"},e),h||(h=V.createElement("path",{fill:"#7F56D9",d:"M3.5 4a4 4 0 0 1 4-4H21l10.5 10.5V31a4 4 0 0 1-4 4h-20a4 4 0 0 1-4-4z"})),f||(f=V.createElement("path",{fill:"#fff",d:"m21 0 10.5 10.5H25a4 4 0 0 1-4-4z",opacity:.3})),p||(p=V.createElement("path",{fill:"#fff",d:"M11.786 22.58h1.368v4.564q0 .632-.284 1.099a1.9 1.9 0 0 1-.783.719q-.503.252-1.167.253-.591 0-1.074-.208a1.7 1.7 0 0 1-.76-.64q-.281-.43-.278-1.083h1.377q.006.259.106.444a.7.7 0 0 0 .278.282q.179.095.422.095.255 0 .431-.108a.7.7 0 0 0 .272-.326q.092-.215.092-.527zm2.512 6.545v-6.546h2.583q.745 0 1.269.285.523.281.799.783.278.498.278 1.15 0 .653-.282 1.151a1.94 1.94 0 0 1-.815.777q-.53.278-1.284.278H15.2v-1.11h1.422q.4 0 .658-.137a.9.9 0 0 0 .39-.386q.13-.25.131-.572 0-.326-.13-.57a.88.88 0 0 0-.39-.38q-.263-.137-.665-.137h-.934v5.414zm10.168-4.43a1.4 1.4 0 0 0-.189-.412 1.275 1.275 0 0 0-.694-.502 1.7 1.7 0 0 0-.488-.067q-.502 0-.883.25a1.64 1.64 0 0 0-.587.725q-.212.472-.212 1.157 0 .684.208 1.163.209.48.588.732.38.25.898.25.47 0 .803-.167.335-.169.511-.476.18-.306.179-.726l.281.042h-1.687v-1.042h2.739v.825q0 .863-.365 1.483a2.5 2.5 0 0 1-1.003.952q-.639.333-1.464.332-.921 0-1.617-.405a2.8 2.8 0 0 1-1.087-1.16q-.386-.755-.386-1.79 0-.796.23-1.42.232-.625.652-1.06.419-.434.974-.662.557-.227 1.205-.227.556 0 1.036.163.48.16.85.454.375.295.61.7.238.402.304.888z"})))},{}),jpeg:(0,y.jsx)(function(e){return V.createElement("svg",X({xmlns:"http://www.w3.org/2000/svg",width:35,height:35,fill:"none",viewBox:"0 0 35 35"},e),v||(v=V.createElement("path",{fill:"#7F56D9",d:"M3.5 4a4 4 0 0 1 4-4H21l10.5 10.5V31a4 4 0 0 1-4 4h-20a4 4 0 0 1-4-4z"})),m||(m=V.createElement("path",{fill:"#fff",d:"m21 0 10.5 10.5H25a4 4 0 0 1-4-4z",opacity:.3})),g||(g=V.createElement("path",{fill:"#fff",d:"M9.03 22.58H10.4v4.564q0 .632-.285 1.099a1.9 1.9 0 0 1-.783.719q-.501.252-1.166.253-.591 0-1.074-.208a1.7 1.7 0 0 1-.76-.64q-.281-.43-.279-1.083H7.43q.007.259.105.444a.7.7 0 0 0 .278.282q.18.095.422.095.255 0 .432-.108a.7.7 0 0 0 .271-.326q.093-.215.093-.527zm2.513 6.545v-6.546h2.582q.745 0 1.27.285.524.281.798.783.279.498.278 1.15 0 .653-.281 1.151a1.94 1.94 0 0 1-.815.777q-.53.278-1.285.278h-1.646v-1.11h1.422q.4 0 .659-.137a.9.9 0 0 0 .39-.386 1.2 1.2 0 0 0 .13-.572 1.2 1.2 0 0 0-.13-.57.88.88 0 0 0-.39-.38q-.262-.137-.665-.137h-.933v5.414zm5.827 0v-6.546h4.41v1.142h-3.026v1.56h2.8v1.14h-2.8v1.563h3.04v1.141zm9.851-4.43a1.4 1.4 0 0 0-.189-.412 1.276 1.276 0 0 0-.694-.502 1.7 1.7 0 0 0-.488-.067q-.503 0-.882.25a1.64 1.64 0 0 0-.588.725q-.21.472-.211 1.157 0 .684.208 1.163.207.48.588.732.38.25.898.25.47 0 .802-.167.336-.169.511-.476.18-.306.18-.726l.28.042H25.95v-1.042h2.74v.825q0 .863-.365 1.483a2.5 2.5 0 0 1-1.004.952q-.639.333-1.464.332-.92 0-1.617-.405a2.8 2.8 0 0 1-1.086-1.16q-.387-.755-.387-1.79 0-.796.23-1.42a3 3 0 0 1 .652-1.06q.42-.434.975-.662.555-.227 1.205-.227.556 0 1.035.163.48.16.85.454.375.295.61.7.238.402.304.888z"})))},{}),folder:(0,y.jsx)(B.Z,{})};function en(e){return e&&e.fileMeta&&"txt"==e.fileMeta.type}var et={Upload:1,Deal:2,Finish:3},er=(0,C.memo)((0,C.forwardRef)(function(e,n){var t=e.upload,r=e.onConfirm,i=e.onCancel,a=(0,w._)((0,C.useState)(e.title||""),2),o=a[0],s=a[1],l=(0,w._)((0,C.useState)(e.size||0),2),c=l[0],u=l[1],d=(0,w._)((0,C.useState)(e.type||""),2),h=d[0];d[1];var f=(0,w._)((0,C.useState)(!0),2),p=f[0],v=f[1],m=(0,w._)((0,C.useState)(et.Upload),2),g=m[0],x=m[1],b=(0,w._)((0,C.useState)(0),2),S=b[0],j=b[1],Z=(0,w._)((0,C.useState)(null),2),M=Z[0],D=Z[1];(0,C.useRef)(new AbortController);var A=(0,C.useMemo)(function(){return g===et.Upload?e.url?"正在解析网页内容":"正在上传":g===et.Deal?"正在处理":"处理完成"},[g]),O=(0,C.useCallback)(function(e){e.docId=e.fileId,r(e)},[]),N=(0,C.useCallback)(function(){v(!1),i()},[]);(0,C.useImperativeHandle)(n,function(){return{close:function(){v(!1)},open:function(){v(!0)}}});var P=(0,w._)((0,C.useState)({}),2),F=P[0],H=P[1];(0,C.useEffect)(function(){M&&g!==et.Finish&&(0,E.z$Q)(M.fileId).then(function(e){if(0===e.data.errCode){if(e.data.data<0)throw"处理失败";e.data.data>=100?(j(0),x(et.Finish)):x(et.Deal),j(e.data.data)}else if(404===e.data.errCode)throw"处理失败"}).finally(function(){setTimeout(function(){H({})},1500)})},[F,M,g]),(0,C.useEffect)(function(){t().then(function(n){n?(D(n),100===n.progress&&x(et.Finish),n&&(s(n.title),u(n.size))):e.onCancel()})},[]),(0,C.useEffect)(function(){g===et.Upload||g===et.Finish&&O(M)},[g,M]);var G=(0,C.useRef)(null);return(0,C.useEffect)(function(){if(G.current){var e=g===et.Upload?"var(--border-color)":"var(--table-light-blue)";return G.current.style.setProperty("background-image","linear-gradient(to right,  ".concat(e,"  ").concat(S,"% ,#fff  0 )")),S>=100&&G.current.style.removeProperty("background-image"),function(){var e;null===(e=G.current)||void 0===e||e.style.removeProperty("background-image")}}},[G.current,S,g]),(0,y.jsxs)(_.k,{open:p,onClose:function(){},radius:4,width:"min(450px, 95vw)",boxSizing:"border-box",children:[(0,y.jsxs)(T.Z,{display:"flex",sx:{width:1},alignItems:"center",justifyContent:"space-between",mb:2,children:[(0,y.jsx)(T.Z,{style:{fontSize:"18px",lineHeight:"30px",fontWeight:"bold"},children:A}),(0,y.jsx)(I.Z,{onClick:N,children:(0,y.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,y.jsx)("path",{d:"M13 1L1 13M1 1L13 13",stroke:"#98A2B3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),!M&&(0,y.jsx)(T.Z,{sx:{height:"65px",mb:4,position:"relative"},children:(0,y.jsx)(L.Z,{size:"1.5em",sx:{position:"absolute",left:"calc(50% - 0.75em)",top:"calc(50% - 0.75em)"},thickness:2})}),M&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(T.Z,{ref:G,display:"flex",border:"1px solid #EAECF0",padding:"14px 10px",alignItems:"center",justifyContent:"space-between",gap:"10px",mb:4,children:[ee[h],(0,y.jsx)(T.Z,{flexGrow:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",lineHeight:"24px",children:o}),g!==et.Finish&&(0,y.jsxs)(T.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"133px",children:[(0,y.jsx)(T.Z,{color:"var(--Gary-Group1-500)",fontSize:"14px",width:"60px",children:c/1024>1024?Math.ceil(c/1024/1024*100)/100+"MB":Math.ceil(c/1024)+"KB"}),(0,y.jsxs)(T.Z,{color:"var(--black)",fontSize:"14px",fontWeight:"bold",width:"60px",children:[S,"%"]})]})]}),(0,y.jsx)(T.Z,{sx:{float:"right"},children:g===et.Finish&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(R.Z,{variant:"text",onClick:N,children:"关闭"}),(0,y.jsx)(R.Z,{variant:"contained",component:"label",onClick:function(){r(),window.open(k.l.Bookshelf,"_blank")},children:"查看"})]})})]})]})}));function ei(e){return new Promise(function(n,t){var r=document.createElement("div");document.body.appendChild(r);var i=(0,Z.createRoot)(r);i.render((0,y.jsx)(er,(0,b._)((0,x._)({},e),{onConfirm:function(e){i.unmount(),r.remove(),n(JSON.stringify(e))},onCancel:function(){i.unmount(),r.remove(),t()}})))})}function ea(){var e=(0,w._)((0,C.useState)(!1),2),n=e[0],t=e[1],r=eo().onPlayClick,i=M.wY.useAPI("pptAPI");return{openWebsitePPT:function(e,a){if(!e){r(a);return}n||(t(!0),(0,E.NZH)(e,a).then(function(n){if(0===n.data.errCode&&n.data.data){var t,o=n.data.data;null===(t=i.current)||void 0===t||t.show(e,{id:e,chapter:o,chapterList:[o]})}else r(a)}).finally(function(){t(!1)}))},pptLoading:n}}function eo(e){var n=(0,N.LM)(function(e){return e.login}),t=M.wY.useAPI("pptAPI");return{onPlayClick:function(r,i){if(!n){(0,D.x3)({showTips:!0,tipsHtml:"登录后，可学习在线网页",logDesc:"add-to-bookshelf"});return}if(i){var a;null===(a=t.current)||void 0===a||a.show(i,{id:i})}else ei({url:r,upload:function(){return(0,E.Y2L)(r).then(function(e){return 0==e.data.errCode?e.data.data:(e.data.errCode==A.cO.USER_CREDIT_RUN_OUT?(0,S.y)((0,y.jsxs)(y.Fragment,{children:["您的计算额度不足，上传网页失败 ",(0,y.jsx)(j.default,{href:k.l.TopUp,children:"去充值→"})]}),{variant:"warning",autoHideDuration:1e4,keep:!0}):(0,S.y)(e.data.errMsg,{variant:"error",autoHideDuration:1500}),null)}).catch(function(e){return(0,S.y)("上传失败",{variant:"error"}),null})}}).then(function(n){if(n){var r,i=JSON.parse(n);e&&e(i.docId),O.Z.pptEnterFrom.set("quick-access"),null===(r=t.current)||void 0===r||r.show(i.docId,{id:i.docId,title:i.name,pdfUrl:"/api/file/".concat(i.docId,"/preview"),displayUrl:"/api/file/".concat(i.docId,"/preview")})}})}}}var es=ei},35642:function(e,n,t){"use strict";var r,i;t.d(n,{u:function(){return r}}),(i=r||(r={})).UNLIMITED="",i.DAY="1",i.WEEK="2",i.MONTH="3",i.YEAR="4",i.CUSTOM="5"},81951:function(e,n,t){"use strict";t.d(n,{I:function(){return c}});var r=t(57437),i=t(64654),a=t(78693);t(2265);var o=t(7870),s=t(63665),l=t(42233);function c(e){(0,i.yv)((0,r.jsx)(a.Z,{sx:{width:280,fontSize:"14px",textAlign:"center",backgroundColor:"#1F4FC7",borderRadius:"23px",padding:"10px 10px"},onClick:function(){var n=(0,o.HG)(),t={};if(e.searchPageLikeParams){var r=e.searchPageLikeParams,i=r.sessionId,a=r.shareKey,c=r.reportId,u=r.pptId,d=r.searchResultId;(0,o.dW)("openAppFromH5Result",{sessionId:i});var h=new URL(location.href);t={sessionId:i,url:"ios"!==n?h.href:"",shareKey:a},d&&(t.searchResultId=d),c&&(t.reportId=c),u&&(t.pptId=u)}(0,s.V)(t,{autoNavigateToOpenAppPage:!0,preventDefaultHitThreshold:!0,onHitThreshold:function(){"ios"===n?window.location.href=l.VX:window.location.href=l.ND}})},children:"App内打开，免费使用"}),{key:"search-open-app",preventDuplicate:!0,autoHideDuration:3e3,style:{background:"transparent",padding:0,boxShadow:"none",justifyContent:"center",marginTop:"45%"}})}},25222:function(e,n,t){"use strict";t.r(n),t.d(n,{H5ImageSearchWindow:function(){return e$},HomeAccountUI:function(){return eJ},HomeBridgeV2:function(){return ez},HomeSearchBox:function(){return eK},MetaWorkflowDialog:function(){return eY},WorkFlowBridgeV2:function(){return eU},_HomeSearchBox:function(){return eQ},useImageSearch:function(){return eV},useSearchPrefetch:function(){return e0}});var r,i,a,o,s,l=t(5194),c=t(1780),u=t(50059),d=t(57437),h=t(2265),f=t(19643),p=t(78693),v=t(47080),m=t(59832),g=t(8350),x=t(55861),b=t(93383),w=t(48359),y=t.n(w),C=t(77630),S=t(14382),j=t.n(S),k=t(41963),E=t(31219),_=t(23760),T=t(96339),I=t(43180),L=t(99376),R=t(47812),Z=t(23048),M=t(54632),D=t(41628),A=t(69161),O=t(39207),N=t(55833),P=t(7870),F=t(77526),H=t(46654),G=t(36570),W=t(13708),B=t(11381),q=t(94746);function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var U=function(e){return q.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",width:21,height:21,fill:"none",viewBox:"0 0 21 21"},e),i||(i=q.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.7,d:"M14.667 17.168H14.5c-1.4 0-2.1 0-2.635-.273a2.5 2.5 0 0 1-1.092-1.092c-.273-.535-.273-1.235-.273-2.635V7.835c0-1.4 0-2.1.273-2.635a2.5 2.5 0 0 1 1.092-1.093c.535-.272 1.235-.272 2.635-.272h.167m0 13.333a1.667 1.667 0 1 0 3.333 0 1.667 1.667 0 0 0-3.333 0m0-13.333a1.667 1.667 0 1 0 3.333 0 1.667 1.667 0 0 0-3.333 0M6.333 10.5h8.334m-8.334 0a1.667 1.667 0 1 1-3.333 0 1.667 1.667 0 0 1 3.333 0m8.334 0a1.667 1.667 0 1 0 3.333 0 1.667 1.667 0 0 0-3.333 0"})))},V=t(74634),K=t(15273),Q=t(3712);function Y(){return(Y=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var J=function(e){return q.createElement("svg",Y({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),a||(a=q.createElement("path",{fill:"currentColor",d:"M5.334 6.613c0 .64-.393 1.053-1 1.053-.608 0-1-.413-1-1.053s.392-1.054 1-1.054c.607 0 1 .414 1 1.054m9.333 0c0-.64.392-1.054 1-1.054.607 0 1 .414 1 1.054 0 .65-.52 1.053-1 1.053-.608 0-1-.413-1-1.053M11 16.547c0 .65-.52 1.054-1 1.054-.608 0-1-.414-1-1.054s.392-1.054 1-1.054c.607 0 1 .414 1 1.054m-.333-2.31v-3.932l3.425-1.914c.249.242.801.674 1.574.674 1.287 0 2.334-1.1 2.334-2.452 0-1.353-1.047-2.453-2.334-2.453s-2.333 1.1-2.333 2.453c0 .203 0 .337.08.536L10 9.168 6.588 7.149c.08-.199.08-.333.08-.536 0-1.353-1.048-2.453-2.335-2.453S2 5.26 2 6.613s1.047 2.453 2.333 2.453c.596 0 1.163-.265 1.685-.789l3.315 2.025v3.934c-.986.274-1.667 1.212-1.667 2.311C7.666 17.9 8.713 19 10 19s2.334-1.1 2.334-2.453c0-1.1-.682-2.037-1.667-2.31"})),o||(o=q.createElement("path",{fill:"currentColor",d:"M16.299 9.933v3.574a.43.43 0 0 1-.055.21.4.4 0 0 1-.148.154l-2.978 1.784c.136.518.152 1.063.046 1.589l3.922-2.349c.17-.102.313-.25.412-.427s.15-.379.15-.584V9.282a3.15 3.15 0 0 1-1.35.65M6.756 4.378l3.041-1.822a.39.39 0 0 1 .405 0l3.042 1.822a3.25 3.25 0 0 1 1.2-.898l-3.881-2.324a1.1 1.1 0 0 0-1.126 0L5.555 3.48c.462.2.873.507 1.2.898m.01 12.17q.002-.463.116-.893L3.903 13.87a.432.432 0 0 1-.202-.364V9.934a3.14 3.14 0 0 1-1.35-.651v4.602c0 .205.052.407.15.584.1.178.242.325.413.427l3.921 2.349a3.6 3.6 0 0 1-.069-.697"})))},X=t(75825),$=t(79943),ee=t(40100),en=t(53820),et=t(59214),er=t(33145),ei=t(36760),ea=t.n(ei),eo=t(82605),es=t(5108),el=t(22322),ec=t(43913),eu=t(15707),ed=t(89051),eh=t(39803),ef=t(42233),ep=t(95927),ev=t(70626),em=t(24673),eg=t(30166),ex=t(8620),eb=t(39155),ew=t(39080),ey=t(5872),eC=t(44808),eS=t(81705),ej=t(75887),ek=t(92498),eE=(0,h.memo)(function(e){var n=(0,h.useMemo)(function(){return"strong-research"===e.mode||"research"===e.mode},[e.mode]),t=(0,u._)((0,h.useState)(n),2),r=t[0],i=t[1],a=(0,u._)((0,h.useState)(n?e.mode:"think-research"),2),o=a[0],s=a[1],l=(0,u._)((0,h.useState)(!n),2),c=l[0],f=l[1],p=(0,ek.Z)(function(){var n;f(!0),i(!1),s("think-research"),null===(n=e.onModeChange)||void 0===n||n.call(e,v)}),v=(0,ej.Q)().defaultMode;(0,h.useEffect)(function(){if("think-research"===e.mode){var n;null===(n=e.onModeChange)||void 0===n||n.call(e,v)}},[v]),(0,h.useEffect)(function(){e.mode.indexOf("research")>=0?(i(!0),n?f(!1):f(!0),s(e.mode)):(i(!1),f(!0),s("think-research"))},[e.mode,n]);var g=(0,ek.Z)(function(){var n,t;r?null===(t=e.onModeChange)||void 0===t||t.call(e,v):null===(n=e.onModeChange)||void 0===n||n.call(e,"think-research"),i(!r)});return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"rounded-[10px] relative w-32 h-9 flex items-center justify-center overflow-hidden",children:[(0,d.jsx)("div",{className:"w-full h-full absolute transition-all duration-700 ease-in-out transform ".concat(c?"-translate-y-full opacity-0":"translate-y-0 opacity-100"),children:(0,d.jsxs)(eb.Z,{className:"rounded-[10px]! text-[#1570EF]! bg-[#1570EF0A]! hover:bg-[#1570EF0A]! w-[calc(100%-2px)] h-[calc(100%-2px)] border! border-[#1570EF]!",children:[e_[o].icon,(0,d.jsx)("div",{className:"ml-1",children:e_[o].label}),(0,d.jsx)(m.Z,{onClick:p,className:"p-0! text-inherit! ml-2!",children:(0,d.jsx)(eS.Z,{className:"size-4!"})})]})}),(0,d.jsx)("div",{className:"w-full h-full absolute transition-all duration-700 ease-out transform  ".concat(c?"translate-y-0 opacity-100":"translate-y-full opacity-0"),children:(0,d.jsx)("div",{className:"w-full h-full",children:(0,d.jsx)(ed.Z,{placement:"bottom-start",classes:{tooltip:"custom-tooltip-popper mt-1!",arrow:"custom-tooltip-arrow",popper:"z-[2202]!"},title:r?"关闭后，将使用".concat(N.sW[v],"模式"):"推荐在复杂任务的时候开启",children:(0,d.jsxs)(eb.Z,{onClick:g,className:"w-[calc(100%-2px)] h-[calc(100%-2px)] space-x-1 rounded-[10px]! transition-colors duration-200 ".concat(r?"text-[#1570EF]! bg-[#1570EF0A]! hover:bg-[#1570EF0A]! border! border-[#1570EF]!":"border! border-[var(--sds-color-background-default-default-hover)]! text-[var(--sds-color-icon-neutral-secondary)]! bg-[var(--sds-color-background-default-default-hover)]! hover:bg-[var(--sds-color-background-default-default-hover)]!"),children:[e_[o].icon,(0,d.jsx)("div",{children:e_[o].label})]})})})})]})})}),e_={research:{label:"先搜后扩",icon:(0,d.jsx)(ey.Z,{})},"strong-research":{label:"先想后搜",icon:(0,d.jsx)(ew.Z,{})},"think-research":{label:"深度研究",icon:(0,d.jsx)(eC.Z,{})}},eT=(0,h.memo)(function(e){return(0,d.jsx)(m.Z,{ref:e._ref,sx:{p:1,m:-1,cursor:"default"},onClick:function(n){var t;null===(t=e.onClick)||void 0===t||t.call(e,n)},children:(0,d.jsx)(eI,{})})});function eI(){return(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M2 5.98828H4.36313M17.3359 5.98828H12.7939",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,d.jsx)("ellipse",{cx:"8.64191",cy:"6.03253",rx:"2.03253",ry:"2.03253",stroke:"currentColor",strokeWidth:"1.5"}),(0,d.jsx)("path",{d:"M17.3359 13.5527H14.9728M2 13.5527H6.542",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,d.jsx)("ellipse",{cx:"2.03253",cy:"2.03253",rx:"2.03253",ry:"2.03253",transform:"matrix(-1 0 0 1 12.7266 11.5645)",stroke:"currentColor",strokeWidth:"1.5"})]})}var eL=t(12249),eR=t(45008),eZ=t(98158),eM=t(35108),eD=t(46387),eA=t(16210),eO=t(11741),eN=t(39293),eP=t(20144);function eF(){var e=(0,eR._)(["\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n    min-width: 0;\n\n    .","."," > & {\n        color: #1570Ef;\n    }\n"]);return eF=function(){return e},e}var eH=[{name:"快思考",des:"快速思考，强信息整合能力",value:"fast"},{name:"长思考",des:"适用于数学和逻辑推理问题",value:"slow"}];function eG(e){var n=(0,u._)((0,h.useState)(e.model||"fast"),2),t=n[0],r=n[1];(0,h.useEffect)(function(){void 0===e.model||null===e.model?r(G.ZP.defaultDeepResearchModel.get()):r(e.model)},[e.model]);var i=(0,u._)((0,h.useState)(!1),2),a=i[0],o=i[1],s=(0,h.useRef)(null),v=(0,h.useRef)(null),m=(0,u._)((0,I.gZ)(o,50,{anchor:v.current}),2)[1],x=(0,h.useMemo)(function(){return eH.map(function(e,n){return{value:e.value,displayLabel:e.name,label:(0,d.jsxs)(f.Z,{children:[(0,d.jsx)(p.Z,{children:e.name}),(0,d.jsx)(p.Z,{sx:{fontSize:"12px",opacity:.5},children:e.des})]})}})},[]),b=(0,h.useMemo)(function(){return eH.find(function(e){return e.value===t})||eH[0]},[t]);return(0,d.jsxs)(f.Z,{ref:v,sx:e.isH5?(0,P.Vc)({marginRight:"10px"},e.sx):(0,P.Vc)({margin:"0 10px"},e.sx),className:"fr-ac",children:[(0,d.jsx)(ex.mE,{sx:e.isH5?{padding:0}:void 0,dropDownVisible:a,name:b.name,onClick:function(){if(e.isH5){var n;null===(n=s.current)||void 0===n||n.setOpen(!0)}else o(!0)}}),e.isH5?(0,d.jsx)(ex.ge,{models:eH,onModelChange:function(n){e.onModelChange(n),G.ZP.defaultDeepResearchModel.set(n),r(n)},value:b.value,ref:s,options:x}):(0,d.jsx)(I.ZP,(0,c._)((0,l._)({noPortal:!1,zIndex:2202,open:a,anchor:v.current},m),{children:(0,d.jsxs)(eM.Z,{children:[(0,d.jsx)(eD.Z,{sx:{p:"0 12px",fontSize:"10px",fontWeight:700,color:"#98A2B3"},children:"选择模型"}),x.map(function(n,i){var a=["string","number","bigint"].includes((0,eZ._)(n.value))?n.value:i,s=t===n.value;return(0,d.jsxs)(h.Fragment,{children:[(0,d.jsxs)(eO.Z,{className:ea()(eN.M.ListItem,(0,eL._)({},eN.M.Selected,s)),onClick:function(){G.ZP.defaultDeepResearchModel.set(n.value),r(n.value),o(!1),e.onModelChange&&e.onModelChange(n.value)},children:[(0,d.jsx)(eW,{className:"meta-selector-option--label",children:n.label}),(0,d.jsx)(eN.Z,{className:"meta-selector-option--suffix",sx:{pl:1,ml:"auto",width:20,height:20},children:s&&(0,d.jsx)(eP.Z,{})})]}),0===i&&(0,d.jsx)(g.Z,{sx:{borderColor:"var(--border-color2)"}})]},a)})]})}))]})}var eW=(0,eA.ZP)(eN.Z)(eF(),eN.M.ListItem,eN.M.Selected),eB=(0,eg.default)(function(){return Promise.resolve().then(t.bind(t,46654)).then(function(e){return{default:e.EngineSetting}})},{loadableGenerated:{webpack:function(){return[46654]}}}),eq=(0,eg.default)(function(){return Promise.resolve().then(t.bind(t,62917)).then(function(e){return{default:e.WorkFlow}})},{loadableGenerated:{webpack:function(){return[62917]}}}),ez=j()(),eU=j()();function eV(e,n){var t=(0,h.useRef)(null),r=(0,h.useCallback)(function(){var e;null===(e=t.current)||void 0===e||e.click()},[]),i=(0,u._)((0,h.useState)(null),2),a=i[0],o=i[1],s=(0,u._)((0,h.useState)(""),2),l=s[0],c=s[1],d=(0,u._)((0,h.useState)(-1),2),f=d[0],p=d[1],v=(0,u._)((0,h.useState)(void 0),2),m=v[0],g=v[1],x=(0,u._)((0,h.useState)(void 0),2),b=x[0],w=x[1],y=(0,L.useSearchParams)();(0,h.useEffect)(function(){if(y.get("imgId")){var e=y.get("imgId");(0,O.I_U)(e).then(function(n){n.data.data&&(c("data:image/png;base64,".concat(n.data.data)),g(e),(0,O.K0G)(e).then(function(e){var n=e.data.data.categories;k(n),p(n.length>0?n[0].id:-1),w(n[0].category)}))}).catch(function(e){})}},[y]),(0,h.useEffect)(function(){if(a){var e=window.URL.createObjectURL(a);c(e);var n=new Image;n.crossOrigin="Anonymous",n.src=e,n.onload=function(){var e=1;if(n.width>1400&&n.height>1400?e=n.width>n.height?1400/n.width:1400/n.height:n.width>1400?e=1400/n.width:n.height>1400&&(e=1400/n.height),e<1){var t,r=document.createElement("canvas");r.width=e*n.width,r.height=e*n.height,null===(t=r.getContext("2d"))||void 0===t||t.drawImage(n,0,0,r.width,r.height),r.toBlob(function(e){var n=new File([e],"img.jpg");(0,O.n9Z)(n).then(function(e){e.data.data&&g(e.data.data),(0,O.K0G)(e.data.data).then(function(e){var n=e.data.data.categories;k(n),p(n.length>0?n[0].id:-1),w(n[0].category)})})},"jpeg","0.95")}else(0,O.n9Z)(a).then(function(e){e.data.data&&g(e.data.data),(0,O.K0G)(e.data.data).then(function(e){var n=e.data.data.categories;k(n),p(n.length>0?n[0].id:-1),w(n[0].category)})})}}},[a]);var C=(0,h.useCallback)(function(e){if((0,P.dW)("search-upload-image",1),null===(n=e.target.files)||void 0===n?void 0:n.length){var n,t=e.currentTarget.files[0].name;if(!/\.(jpg|jpeg|png|bmp|jfif|gif|webp|pjp|pjpeg|jfif|webp)$/.test(t.toLowerCase())){(0,el.y)("暂不支持该图片类型",{variant:"warning",autoHideDuration:3e3});return}_();var r=e.currentTarget.files;r&&o(r[0])}},[]),S=(0,u._)((0,h.useState)([]),2),j=S[0],k=S[1],E=(0,h.useCallback)(function(n){var t,r,i=null===(t=j.find(function(e){return e.id===n}))||void 0===t?void 0:t.name,a=null===(r=j.find(function(e){return e.id===n}))||void 0===r?void 0:r.category;"深度推理"===n&&(a="题目",i=n),e({question:i,engineType:"以图搜图"===a?R.rG.IMAGE:R.rG.DEFAULT,_mode:"detail",advanceMath:"深度推理"===n,autoChange:!0,imgId:m,imgCategory:a})},[e,m,j,n]),_=(0,h.useCallback)(function(){o(null),c(""),g(void 0),p(-1),w(void 0),k([])},[]);return{actions:j,selectImage:r,onImageSelected:C,onActionClicked:E,imgCategory:b,imgId:m,imgUrl:l,activeImageSearchId:f,currentImage:a,clearImageSearch:_,textInputRef:t,setCurrentImage:o}}var eK=h.memo(eQ);function eQ(e){(0,h.useId)();var n,t,r,i=(0,_.LM)(function(e){return e.login}),a=(0,$.WS)(),o=(0,V.fl)(),s=(0,h.useRef)(null),b=(0,u._)((0,h.useState)(!1),2),w=b[0],S=b[1],j=e.engineType||R.rG.DEFAULT,T=(0,u._)((0,h.useState)(j),2),D=T[0],q=T[1],z=(0,u._)((0,h.useState)(!1),2),Y=z[0],ee=z[1],en=(0,u._)((0,h.useState)(!1),2),ei=en[0],eo=en[1],es=(0,u._)((0,h.useState)(e.model),2),eh=es[0],ef=es[1],em=(0,u._)((0,h.useState)(e.deepResearchModel),2),eg=em[0],eb=em[1],ew=(0,h.useMemo)(function(){return G.ZP.defaultResearchMode.get()},[G.ZP.defaultResearchMode.get()]);(0,h.useEffect)(function(){void 0===e.model&&ef(G.ZP.defaultModel.get())},[e.model]),(0,h.useEffect)(function(){void 0===e.deepResearchModel&&eb(G.ZP.defaultDeepResearchModel.get())},[e.model]);var ey=(0,h.useMemo)(function(){return e.showListDsModelSetting&&("detail"===e.mode||"concise"===e.mode)},[e.showListDsModelSetting,e.mode]);(0,h.useLayoutEffect)(function(){ee(!0)},[]),(0,h.useEffect)(function(){void 0===e.engineType&&q(G.l$.getDefaultEngine())},[]),(0,h.useLayoutEffect)(function(){q(j)},[j]);var eC=(0,V.a8)();(0,h.useEffect)(function(){var n;eC&&(G.l$.updateDefaultEngine(D),null===(n=e.onEngineChange)||void 0===n||n.call(e,D))},[D]),(0,h.useEffect)(function(){eC&&q(j)},[j]);var eS=(0,u._)((0,h.useState)(R.wb.ALL),2),ej=eS[0],e_=eS[1],eI=(0,u._)((0,h.useState)(e.subjectId||""),2),eL=eI[0],eR=eI[1],eZ=(0,L.usePathname)(),eM=(0,u._)((0,h.useState)(e.subjectName||""),2),eD=eM[0],eA=eM[1];(0,h.useEffect)(function(){e_(G.ZP.scholarLang.get())},[]),(0,h.useEffect)(function(){eZ!==X.l.Home||e.subjectId?(eR(e.subjectId||null),eA(e.subjectName||null)):(eR(G.ZP.defaultSubjectId.get()||null),eA(G.ZP.defaultSubjectName.get()||"")),eo(!0)},[e.subjectId,e.subjectName,eZ]),(0,h.useEffect)(function(){e.subjectName?eA(e.subjectName):eA(G.ZP.defaultSubjectName.get()||null)},[e.subjectName]),(0,h.useEffect)(function(){o.current&&G.ZP.scholarLang.set(ej)},[ej]),(0,h.useEffect)(function(){o.current&&G.ZP.defaultSubjectId.set(eL||"")},[eL]),(0,h.useEffect)(function(){o.current&&G.ZP.defaultSubjectName.set(eD||"")},[eD]);var eO=e.inputRef||s,eN=(0,u._)(h.useState(null),2),eP=eN[0],eF=eN[1],eH=(0,u._)((0,I.gZ)(S,50,{anchor:eP}),2)[1],eW=(0,ev.IN)();(0,h.useEffect)(function(){if(eW){var e;null===(e=eO.current)||void 0===e||e.setArgumentText((0,ev.dI)())}(0,ev.n8)("remove")},[]),(0,h.useRef)(!1),ez.useRegister("homeSearchBox",function(){return{getText:function(){var e;return(null===(e=eO.current)||void 0===e?void 0:e.getTexts()[0])||""}}},[]);var eq=(0,h.useContext)(A.HO),eK=eH.ref,eQ=(0,h.useRef)(e.mode),eJ=(0,u._)((0,h.useState)(!1),2),eX=eJ[0],e0=eJ[1],e1=(0,u._)((0,h.useState)(null),2),e2=e1[0],e3=e1[1],e5=(0,h.useRef)(null);(0,I.bQ)({anchor:function(){return eP},popover:function(){var e;return eq||(null===(e=eK.current)||void 0===e?void 0:e.nodeRef.current)}},w,function(){return S(!1)});var e4=(0,k.A8)(),e6=e4.removeUrlCmd,e7=e4.store,e8=(0,k.Qv)(function(e){var n=e.find(function(e){return e.type===E.a.HomeInputSetting});if(n){var t=JSON.parse(n.payload);eO.current.setArgumentText(t.text),e7.get("ModelTab")?e6(E.a.HomeInputSetting):e7.set("HomeSearchBox",1)}}),e9=(0,u._)((0,h.useState)(e.mode||H.DefaultSetting.searchMode),2),ne=e9[0],nn=e9[1],nt=function(){var e,n,t;null===(t=eO.current)||void 0===t||null===(n=t.argumentRef.current)||void 0===n||null===(e=n.textareaRef.current)||void 0===e||e.focus()};(0,h.useEffect)(function(){o.current&&G.ZP.defaultMode.set(ne)},[ne]),(0,h.useEffect)(function(){(D===R.rG.PODCAST||D===R.rG.IMAGE)&&(eQ.current="detail",e.onModeChange&&e.onModeChange("detail")),nn(eQ.current||H.DefaultSetting.searchMode)},[D]);var nr=(0,L.useSearchParams)();(0,h.useEffect)(function(){e8()},[nr]);var ni=(0,h.useCallback)(function(e){e2&&e0(!1),e5.current&&clearTimeout(e5.current),e5.current=setTimeout(function(){(0,O.sP0)(e).then(function(e){e.data.data?e2&&e2.url===e.data.data.url||(e3(e.data.data),e0(!0)):(e3(null),e0(!1))})},500)},[e2]),na=(0,h.useCallback)(function(){window.open(e2.url)},[e2]);e.isH5;var no=(0,P.CU)(e.engineType),ns=(0,u._)((0,h.useState)(!1),2),nl=ns[0],nc=ns[1];eU.useRegister("workFlow",function(){return{open:function(){nc(!0)}}},[]);var nu=(0,u._)((0,h.useState)(""),2),nd=nu[0],nh=nu[1],nf=eV(e.onSubmit,nd),np=nf.actions,nv=nf.selectImage,nm=nf.onImageSelected,ng=nf.onActionClicked,nx=nf.imgCategory,nb=nf.imgId,nw=nf.imgUrl,ny=nf.activeImageSearchId,nC=(nf.currentImage,nf.clearImageSearch),nS=nf.textInputRef,nj=nf.setCurrentImage,nk=(0,u._)((0,h.useState)(!1),2),nE=nk[0],n_=nk[1],nT=(0,u._)((0,h.useState)(!1),2);nT[0],nT[1];var nI=(0,u._)((0,h.useState)(!1),2),nL=nI[0],nR=nI[1];(0,h.useEffect)(function(){nr.get("pzjt")&&nR("true"==nr.get("pzjt"))},[nr]),(0,h.useEffect)(function(){nL&&(n_(!0),setTimeout(function(){return n_(!1)},600))},[nL]),(0,h.useEffect)(function(){if(!e.disableImageSearch){var n,t,r,i=function(e){if(e.clipboardData&&(null===(n=e.clipboardData)||void 0===n||!n.getData("text")))for(var n,t=e.clipboardData.items,r=0;r<t.length;r++)-1!==t[r].type.indexOf("image")&&nj(t[r].getAsFile())};return null===(r=eO.current)||void 0===r||null===(t=r.argumentRef.current)||void 0===t||null===(n=t.textareaRef.current)||void 0===n||n.addEventListener("paste",i),function(){var e,n,t;null===(t=eO.current)||void 0===t||null===(n=t.argumentRef.current)||void 0===n||null===(e=n.textareaRef.current)||void 0===e||e.removeEventListener("paste",i)}}},[]);var nZ=(0,h.useMemo)(function(){return(0,eu.u)(eZ)},[eZ]).path===X.l.SubjectDetail||!!e.subjectId,nM=(0,u._)((0,h.useState)(!1),2),nD=nM[0],nA=nM[1],nO=(0,u._)((0,h.useState)(null),2),nN=nO[0],nP=nO[1],nF=(0,h.useRef)(null);(0,I.bQ)({anchor:nN,popover:function(){var e;return null===(e=nF.current)||void 0===e?void 0:e.nodeRef.current}},nD,function(){nA(!1)});var nH=(0,F.X7)({onShowShare:function(){(0,P.dW)("home-show-advance-share",{imgId:nb}),(0,el.y)((0,d.jsxs)(d.Fragment,{children:["今日次数已用完，分享得50次 ",(0,d.jsx)("span",{style:{color:"#2C70E4",cursor:"pointer"},onClick:function(){(0,P.dW)("home-advance-share-click",{imgId:nb}),nA(!0)},children:"去分享"})]}),{variant:"warning",autoHideDuration:3e3,keep:!0})},onClick:function(){ng("深度推理")}}),nG=(nH.advanceUsage,nH.showShare,nH.updateMathSearchCount),nW=(nH.shareReward,nH.setShowShare,nH.handleClick);(0,h.useEffect)(function(){setTimeout(function(){var n,t,r=null===(t=eO.current)||void 0===t?void 0:null===(n=t.argumentRef.current)||void 0===n?void 0:n.textareaRef.current;r&&(r.style.setProperty("max-height",e.isH5?"30vh":"40vh"),r.style.setProperty("min-height",e.isH5?"54px":"79px"),r.style.setProperty("height","0px"),r.style.setProperty("height","".concat(r.scrollHeight,"px")))},50)},[e.unLimitHeight,e.isH5]);var nB=(0,ek.Z)(function(n){var t;null===(t=e.onModeChange)||void 0===t||t.call(e,n)}),nq=(0,h.useMemo)(function(){return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(f.Z,{direction:"row",spacing:1,children:np.map(function(e,n){return(0,d.jsxs)(d.Fragment,{children:[e.id===ny?(0,d.jsx)(p.Z,{className:y()["primary-border"],children:(0,d.jsx)(p.Z,{sx:{backgroundColor:"var(--gray)",borderRadius:"3px"},children:(0,d.jsx)(M.Z,{className:ea()(y()["action-btn"]),startIcon:(0,d.jsx)(f.Z,{dangerouslySetInnerHTML:{__html:e.svgIcon}}),onClick:function(){ng(e.id)},children:(0,d.jsx)(p.Z,{className:y().primary,children:e.name})})})},n):(0,d.jsx)(M.Z,{className:y()["action-btn"],variant:"outlined",startIcon:(0,d.jsx)(f.Z,{dangerouslySetInnerHTML:{__html:e.svgIcon}}),onClick:function(){ng(e.id)},children:e.name},n),"解题"===e.name&&(0,d.jsx)(p.Z,{className:y()["primary-border"],ref:nP,children:(0,d.jsx)(p.Z,{sx:{backgroundColor:"var(--gray)",borderRadius:"3px"},children:(0,d.jsx)(M.Z,{onClick:function(){(0,P.dW)("home-advance-math-click",{imgId:nb}),nW()},startIcon:(0,d.jsx)(ec.Z,{}),className:ea()(y()["action-btn"]),children:(0,d.jsx)(p.Z,{className:y().primary,children:"解题\xb7深度推理"})})})},n)]})})})})},[np,ny,ng,nW]);return(0,d.jsxs)(p.Z,{className:y()["home-search-box"],onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDrop:function(n){n.preventDefault(),n.stopPropagation(),e.disableImageSearch||nm({currentTarget:{files:n.dataTransfer.files},target:{files:n.dataTransfer.files}})},sx:null===(n=e.sxs)||void 0===n?void 0:n.wrapper,children:[e.disable&&(0,d.jsx)(p.Z,{sx:{width:"100%",height:"100%",background:"#ffffff91",borderRadius:"8px",position:"absolute",zIndex:1}}),(0,d.jsx)(C.Z,{isH5:e.isH5,model:eh,onModelChange:ef,disabled:e.disable,cache:e.isH5?{open:!0,id:R.dF}:void 0,ref:eO,allowH5ShowBottomLeftSlot:e.h5InlineSearchRangeButton,autoFocus:"boolean"!=typeof e.autoFocus||e.autoFocus,onKeyUp:function(n){var t;null===(t=e.onKeyUp)||void 0===t||t.call(e,n),"Escape"===n.key&&eX&&(e0(!1),n.preventDefault(),n.stopPropagation())},onSubmit:function(n){!e.isH5&&e2&&eX?na():((0,ev.$e)(nd),(0,ev.n8)("remove"),e.onSubmit({question:n[0]||np.find(function(e){return e.id===ny}).name,engineType:"以图搜图"===(!n[0]&&nx)?R.rG.IMAGE:nb?R.rG.DEFAULT:D,_mode:nb?"detail":e.mode,autoChange:!0,model:eh,deepResearchModel:eg,imgId:nb,imgCategory:n[0]?void 0:nx,searchTopicId:D===R.rG.KNOWLEDGE?eL:null,searchTopicName:D===R.rG.KNOWLEDGE?eD:null}))},onArgumentChange:function(n){if(e.onArgumentChange&&e.onArgumentChange(n),nh(n),!e.disableQuickAccess&&n.length<=100&&ni(n),e.unLimitHeight){var t,r,i=null===(r=eO.current)||void 0===r?void 0:null===(t=r.argumentRef.current)||void 0===t?void 0:t.textareaRef.current;i&&(i.style.setProperty("max-height",e.isH5?"30vh":"40vh"),i.style.setProperty("min-height",e.isH5?"54px":"79px"),i.style.setProperty("height","0px"),i.style.setProperty("height","".concat(i.scrollHeight,"px")))}},sx:(0,l._)({height:e.unLimitHeight||e.isH5?"auto":"139px",minHeight:e.isH5?"112px":e.unLimitHeight?"139px":"unset"},null===(t=e.sxs)||void 0===t?void 0:t.textarea),placeholder:e.isH5?"点击输入想了解的问题":e.placement||"请输入，Enter键发送，Shift+Enter键换行",allowEmpty:!!(ny>=0&&nb),showDelete:!!e.mode,hideSearchIcon:eX&&!e.isH5,bottomLeftSlot:e.hideEngineSetting?(0,d.jsx)(d.Fragment,{children:nw?(0,d.jsx)(d.Fragment,{children:nq}):(0,d.jsx)(d.Fragment,{children:e.mode&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(eT,{_ref:function(n){e.h5InlineSearchRangeButton||eF(n)}}),(0,d.jsx)(eE,{mode:e.mode,onModeChange:nB}),"think-research"===e.mode&&(0,d.jsx)(eG,{model:eg,onModelChange:eb,isH5:e.isH5,sx:{ml:1.25}})]})})}):nw?(0,d.jsx)(d.Fragment,{children:nq}):(0,d.jsx)(p.Z,{className:"fr-ac",sx:{height:48},children:Y&&!e.engineLoading?(0,d.jsx)(d.Fragment,{children:e.disableChangeEngine?(0,d.jsxs)(f.Z,{sx:{fontSize:"14px",color:"var(--search-range-color,#344054)",fontWeight:"bold"},direction:"row",alignItems:"center",children:[(0,d.jsx)(W.cu,{fill:no.fill,stroke:no.stroke}),(0,d.jsx)(p.Z,{sx:{margin:"0 10px 0 5px"},children:no.name})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(H.ChangeSearchRangeButton,{dropDownVisible:w,onClick:e.onSearchRangeButtonClick,noLoginSubjectName:D==R.rG.KNOWLEDGE&&eD?eD:"",_ref:function(n){e.h5InlineSearchRangeButton||eF(n)},engineType:D}),!e.hideDsModelSetting&&"think-research"!==eQ.current&&(0,d.jsx)(ex.qv,{model:eh,onModelChange:ef,isH5:e.isH5,sx:{ml:1.25}}),!e.hideDeepResearchModel&&e.hideDsModelSetting&&ew===R.s5.ThinkSearchParallel&&(0,d.jsx)(eG,{model:eg,onModelChange:eb,isH5:e.isH5,sx:{ml:1.25}})]})}):(0,d.jsx)(v.Z,{width:"60px",height:"40px"})}),bottomRightSlot:(0,d.jsxs)(d.Fragment,{children:[e.hideImageSearch||nZ?(0,d.jsx)(d.Fragment,{}):(0,d.jsx)(ed.Z,{title:"Ctrl+V键粘贴图片",classes:{tooltip:"custom-tooltip-popper",arrow:"custom-tooltip-arrow"},arrow:!0,placement:"top",children:(0,d.jsxs)(p.Z,{children:[nL&&(0,d.jsx)(p.Z,{className:nE?"shake":"",sx:{fontSize:"12px",backgroundColor:"#175cd3",color:"#fff",borderRadius:"5px",padding:"2px",height:"14px",lineHeight:"14px",position:"absolute",bottom:"40px",marginLeft:"-4px"},children:"拍照解题"}),(0,d.jsx)(m.Z,{onClick:nv,sx:{color:"var(--content-op-color)"},children:(0,d.jsx)(et.Z,{})})]})}),e.bottomRightSlot]})}),(0,d.jsx)("input",{ref:nS,onChange:function(n){if(nm(n),!e.isH5){var t,r,i;null===(i=eO.current)||void 0===i||null===(r=i.argumentRef.current)||void 0===r||null===(t=r.textareaRef.current)||void 0===t||t.focus()}},style:{display:"none"},type:"file",accept:"image/bmp, image/png, image/jpeg, image/gif, image/webp"}),(0,d.jsx)(p.Z,{sx:{width:0,height:0,overflow:"hidden"},children:(0,d.jsx)("svg",{children:(0,d.jsx)("defs",{children:(0,d.jsxs)("linearGradient",{id:"paint0_linear_5293_8437",x1:"1.49977",y1:"15.9999",x2:"16.4998",y2:"0.999817",gradientUnits:"userSpaceOnUse",children:[(0,d.jsx)("stop",{stopColor:"#0017E4"}),(0,d.jsx)("stop",{offset:"1",stopColor:"#3793FF"})]})})})}),nN&&(0,d.jsx)(I.ZP,{ref:nF,zIndex:1202,anchor:nN,open:nD,onOpenChanged:nA,children:(0,d.jsx)(p.Z,{sx:{padding:"20px"},children:(0,d.jsx)(ep.gv,{showUrl:"https://metaso.cn?infer_share=1",onConfirm:function(){nG(),nA(!1)}})})}),nw&&e.isH5&&(0,d.jsx)(e$,{actions:np,activeEngineType:D,onSubmit:e.onSubmit,imgId:nb,mode:e.mode,imgCategory:nx,list:np,activeActionId:ny,onBack:function(){var e;null===(e=nS.current)||void 0===e||e.click()},onClose:function(){nS.current.value="",nC()},onBtnClick:ng,img:nw}),!!nw&&(0,d.jsxs)(p.Z,{sx:{padding:"0 20px",marginBottom:"10px"},children:[(0,d.jsx)(g.Z,{sx:{margin:"15px 0"}}),(0,d.jsx)(x.Z,{slotProps:{badge:{className:y()["close-btn"]}},onClick:function(){nC(),nS.current.value=""},badgeContent:(0,d.jsx)("svg",{width:"10",height:"9",viewBox:"0 0 10 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M8.75 0.75L1.25 8.25M1.25 0.75L8.75 8.25",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round","stroke-linejoin":"round"})}),children:(0,d.jsx)(er.default,{src:nw,alt:"图片",onClick:function(e){return e.stopPropagation()},style:{width:"75px",height:"75px",objectFit:"cover",borderRadius:"5px"},width:75,height:75})})]}),e2&&(0,d.jsxs)(p.Z,{sx:{padding:"0 20px"},children:[(0,d.jsx)(g.Z,{}),(0,d.jsx)(F._R,{iconUrl:e2.icon,active:eX,className:y()["home-quick-access"],isH5:e.isH5,type:F.X6.WEBSITE,name:e2.name,url:e2.url})]}),(0,d.jsx)(I.ZP,(0,c._)((0,l._)({anchor:eP,offsetOptions:{crossAxis:-9},noPortal:!0,style:{zIndex:1},open:w,isAutoUpdate:!0,popoverClassName:e.popoverClassName},eH),{children:(0,d.jsxs)(p.Z,{sx:{width:200,p:"10px 6px"},children:[(i||D!=R.rG.KNOWLEDGE)&&(!ey||j!=R.rG.KNOWLEDGE)&&ei&&!e.isH5&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(eB,{engineType:D,hideItems:e.hideItems,isInSubjectDetailPage:nZ,onEngineTypeChange:function(e){q(e)},notLoginUserOnlyCanChooseSubject:e.notLoginUserOnlyCanChooseSubject,subjectList:e.subjectList,subjectId:eL,onItemClick:function(e,n){S(!1),eX&&e0(!1),nt()},scholarLangRange:ej,onScholarLangItemClick:function(){S(!1),eX&&e0(!1),nt()},onScholarLangRangeChange:function(e){e_(e)},onSubjectChange:function(e,n){eR(e),eA(n)},onSubjectItemClick:function(e,n){S(!1),eX&&e0(!1),nt()}})}),e.mode&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.Z,{sx:{my:.5}}),(0,d.jsx)(W.V9,{popoverContent:(0,d.jsx)(K.Z,{sx:{p:.5,width:200},children:R.DE.map(function(n){var t=D===R.rG.IMAGE||D===R.rG.PODCAST&&("think-research"===n||"research"===n||"strong-research"==n);return(0,d.jsx)(W.NP,{checked:n===e.mode,disabled:t,sx:{my:.5},onClick:function(){var t;S(!1),eX&&e0(!1),null===(t=e.onModeChange)||void 0===t||t.call(e,n),"research"===n?G.ZP.defaultResearchMode.set(R.s5.SearchExpand):"strong-research"===n?G.ZP.defaultResearchMode.set(R.s5.ThinkSearch):"think-research"===n?G.ZP.defaultResearchMode.set(R.s5.ThinkSearchParallel):G.ZP.defaultMode.set(n),nt()},startSlot:(0,d.jsx)(p.Z,{sx:{color:e.mode===n?"primary.main":"var(--black)"},children:N.sW[n]})},n)})}),beforeEndSlot:(0,d.jsx)(W.db,{sx:{color:"primary.main",fontSize:"12px"},children:N.sW[e.mode]}),startSlot:(0,d.jsxs)(Z.K,{children:[(0,d.jsx)(Q.Z,{style:{color:"var(--black)"}}),(0,d.jsx)(W.db,{children:"强度"})]})})]}),ey&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.Z,{sx:{my:.5}}),(0,d.jsx)(W.V9,{popoverContent:(0,d.jsx)(K.Z,{sx:{p:.5,width:200},children:ex.yV.map(function(e){return(0,d.jsx)(W.NP,{checked:e.value===eh,sx:{my:.5},onClick:function(){S(!1),eX&&e0(!1),_.LM.getState().setModel(e.value),ef(e.value),nt()},startSlot:(0,d.jsx)(p.Z,{sx:{color:eh===e.value?"primary.main":"var(--black)"},children:e.name})},e.value)})}),beforeEndSlot:(0,d.jsx)(W.db,{sx:{color:"primary.main",fontSize:"12px"},children:"ds-r1"===eh?"长思考\xb7R1":"fast_thinking"===eh?"极速\xb7思考":"极速"}),startSlot:(0,d.jsxs)(Z.K,{children:[(0,d.jsx)(J,{style:{color:"var(--black)"}}),(0,d.jsx)(W.db,{children:"模型"})]})})]}),!nZ&&!(null===(r=e.hideItems)||void 0===r?void 0:r.includes(R.rG.WORKFLOW))&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.Z,{sx:{my:.5}}),(0,d.jsx)(W.d4,{onClick:function(){e.onWorkFlowClick?e.onWorkFlowClick():nc(!0)},startSlot:(0,d.jsxs)(Z.K,{children:[(0,d.jsx)(U,{}),(0,d.jsx)(W.db,{children:"工作流"})]}),endSlot:!1})]}),!e.mode&&!e.disablePersonal&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.Z,{sx:{my:.5}}),(0,d.jsx)(W.d4,{startSlot:(0,d.jsxs)(Z.K,{children:[(0,d.jsx)(B.Z,{style:{color:"var(--black)"}}),(0,d.jsx)(W.db,{children:"偏好设置"})]}),onClick:function(){a.push(X.l.UserInfo)},endSlot:!1})]})]})})),!e.isH5&&!nZ&&(0,d.jsx)(eY,{onSubmit:e.onSubmit,workFlowDialogVisible:nl,setWorkFlowDialogVisible:nc})]})}function eY(e){var n=e.workFlowDialogVisible,t=e.setWorkFlowDialogVisible,r=e.flowId,i=e.variable;return(0,d.jsxs)(ee.k,{sx:{padding:"0 !important"},open:n,onClose:function(){t(!1)},children:[(0,d.jsx)(en._$,{sx:{padding:"10px 20px 0 20px",marginBottom:"10px !important"},title:(0,d.jsxs)(f.Z,{direction:"row",spacing:1.5,alignItems:"center",justifyContent:"center",position:"relative",children:[e.showBack&&(0,d.jsx)(M.Z,{onClick:e.onBack,sx:{position:"absolute",left:0,color:"var(--black)",fontSize:"16px",fontWeight:"400"},startIcon:(0,d.jsx)("svg",{width:"8",height:"14",viewBox:"0 0 8 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M7 13L1 7L7 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),children:"返回搜索"}),(0,d.jsx)(p.Z,{children:"工作流"})]}),onClose:function(){t(!1)}}),(0,d.jsx)(p.Z,{sx:{padding:"0 20px 10px 20px",borderTop:"solid 1px var(--border-color2)"},children:(0,d.jsx)(eq,{contentVisible:n,flowId:r,variable:i,onSubmit:function(n){e.onSubmit(n),t(!1)}})})]})}function eJ(){return(0,_.LM)(function(e){return e.login})?null:(0,d.jsx)(eX,{onClick:function(){return(0,T.x3)({logDesc:"home-page-login-btn"})}})}function eX(e){var n=(0,$.WS)();return(0,d.jsxs)(Z.K,{sx:{display:"inline-flex"},children:[(0,d.jsx)(M.Z,{onClick:e.onClick,sx:{px:0,mr:1,minWidth:0,height:46,color:"var(--login-text-color)"},variant:"text",children:"登录"}),(0,d.jsx)(m.Z,{sx:{mr:-1,p:1},onClick:function(){n.push(X.l.UserInfo)},children:(0,d.jsx)(D.Z,{style:{width:20,height:20,color:"var(--content-op-color)"}})})]})}function e$(e){var n=(0,u._)((0,h.useState)(0),2),t=n[0];n[1];var r=(0,u._)((0,h.useState)(""),2),i=r[0],a=r[1],o=e.imgId,s=e.activeActionId,l=e.imgCategory,c=e.actions,v=(0,h.useRef)(null),x=(0,h.useRef)("");(0,h.useEffect)(function(){x.current="https://metaso.cn?infer_share=1"},[]);var w=(0,eh.L)({onReject:function(){(0,P.vQ)(x.current).then(function(){(0,el.y)("分享链接已复制到剪贴板",{variant:"success",autoHideDuration:3e3})})}}).share,C=(0,h.useCallback)(function(){var e={title:"秘塔AI搜索",link:x.current,imgUrl:ef.re.ShareIcon,desc:""};w(function(){return e},"wechatFriend")},[]),S=(0,F.X7)({onShowShare:function(){(0,P.dW)("home-show-advance-share",{imgId:o}),(0,el.y)((0,d.jsxs)(d.Fragment,{children:["今日次数已用完，分享得50次 ",(0,d.jsx)("span",{style:{color:"#2C70E4"},onClick:function(){(0,P.dW)("home-advance-share-click",{imgId:o}),_()},children:"去分享"})]}),{variant:"warning",autoHideDuration:3e3,keep:!0})},onClick:function(){e.onBtnClick("深度推理")}}),j=(S.advanceUsage,S.showShare,S.updateMathSearchCount),k=(S.shareReward,S.setShowShare),E=S.handleClick,_=(0,h.useCallback)(function(){(0,ep.Y$)({onShare:C,onCancel:function(){},onConfirm:function(){j(),k(!1)}})},[C,j]),T=(0,h.useMemo)(function(){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(p.Z,{className:y()["mask-header"],children:[(0,d.jsx)(p.Z,{sx:{width:"30px"}}),(0,d.jsx)(p.Z,{children:"提问"}),(0,d.jsx)(m.Z,{onClick:e.onClose,children:(0,d.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M13 1L1 13M1 1L13 13",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,d.jsx)(p.Z,{className:y()["img-container"],children:(0,d.jsx)("img",{src:e.img,width:"100%",height:"100%"})}),(0,d.jsx)(p.Z,{className:y()["img-operation"]}),(0,d.jsx)(f.Z,{direction:"row",spacing:1,margin:"10px 10px 0 10px",className:y()["action-container"],children:e.list.map(function(n,t){return(0,d.jsxs)(d.Fragment,{children:[n.id===e.activeActionId?(0,d.jsx)(M.Z,{onClick:function(){e.onBtnClick(n.id)},className:ea()(y()["action-btn-white"]),startIcon:(0,d.jsx)(f.Z,{dangerouslySetInnerHTML:{__html:n.svgIcon}}),children:(0,d.jsx)(p.Z,{className:y().primary,children:n.name})},t):(0,d.jsx)(M.Z,{onClick:function(){e.onBtnClick(n.id)},className:y()["action-btn"],variant:"contained",startIcon:(0,d.jsx)(f.Z,{dangerouslySetInnerHTML:{__html:n.svgIcon}}),children:n.name},t),"解题"===n.name&&(0,d.jsx)(M.Z,{onClick:function(){(0,P.dW)("home-advance-math-click",{imgId:o}),E()},startIcon:(0,d.jsx)(ec.Z,{}),className:ea()(y()["action-btn-white"]),children:(0,d.jsx)(p.Z,{className:y().primary,children:"解题\xb7深度推理"})})]})})})]})},[e.onClose,e.onBack,e.onBtnClick,e.activeActionId,E]);return(0,d.jsxs)(p.Z,{className:y()["image-search-mask"],children:[T,(0,d.jsx)(p.Z,{className:y()["search-box"],children:0===t?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(es.o4,{iconVariant:"filled",onChange:function(e){a(e)}}),(0,d.jsx)(g.Z,{orientation:"vertical",sx:{height:"15px",margin:"0 10px 0 0"}}),(0,d.jsx)(b.ZP,{ref:v,value:i,onFocus:function(e){setTimeout(function(){e.target.scrollIntoView({block:"start"})},1e3)},sx:{flex:1,color:"white"},placeholder:"输入想了解的问题",onChange:function(e){a(e.currentTarget.value)}}),(0,d.jsx)(eo.DV,{onClick:function(){e.onSubmit({question:i||c.find(function(e){return e.id===s}).name,engineType:i||"以图搜图"!==l?R.rG.DEFAULT:R.rG.IMAGE,_mode:o?"detail":e.mode,autoChange:!0,imgId:o,imgCategory:i?void 0:l})}})]}):(0,d.jsx)(d.Fragment,{})})]})}function e0(){var e=(0,$.WS)();(0,h.useEffect)(function(){e.prefetch(X.l.Search,{kind:em.PrefetchKind.FULL})},[])}(r=s||(s={}))[r.text=0]="text",r[r.speech=1]="speech"},25610:function(e,n,t){"use strict";t.d(n,{_O:function(){return a},vp:function(){return o}}),t(57437);var r=t(47812),i=t(2265);t(10995),t(36760);var a=[{label:"所有文献",value:r.wb.ALL},{label:"中文库",value:r.wb.ZH},{label:"英文库",value:r.wb.EN},{label:"PubMed",value:r.wb.PubMed}];function o(e){return(0,i.useMemo)(function(){return!!(null==e?void 0:e.expiryDate)&&Date.now()<new Date(null==e?void 0:e.expiryDate).getTime()},[null==e?void 0:e.expiryDate])}},70626:function(e,n,t){"use strict";t.d(n,{$e:function(){return i},IN:function(){return s},dI:function(){return a},n8:function(){return o}});var r=t(28898);function i(e){r.Z.homeSearchBoxText.set(e)}function a(){return r.Z.homeSearchBoxText.get()}function o(e){"undefined"!=typeof localStorage&&localStorage.setItem("recover-home-search-box-text","add"===e?"1":"0")}function s(){return"undefined"!=typeof localStorage&&"1"==localStorage.getItem("recover-home-search-box-text")}},57378:function(e,n,t){"use strict";t.d(n,{gf:function(){return X},oN:function(){return i}});var r,i,a=t(12249),o=t(5194),s=t(1780),l=t(46796),c=t(50059),u=t(57437),d=t(78693),h=t(28450),f=t(73904),p=t(19643),v=t(46387),m=t(8350),g=t(23048),x=t(74634),b=t(14382),w=t.n(b),y=t(47812),C=t(78619),S=t(36760),j=t.n(S),k=t(49409),E=t.n(k),_=t(2265),T=t(20042),I=t(25610),L=t(7870),R=t(43180),Z=t(38882),M=t(69161),D=t(22629),A=t(36570),O=t(30166),N=t(26852),P=t(54887),F=t(77143),H=t(36331),G=t(23760),W=t(13708),B=t(15273),q=t(48903),z=t(71096),U=t.n(z),V=t(54632),K=t(24757),Q=t(35642),Y=t(15560),J=(A.ZP.scholarLang.get(),"search-domain-tabs-wrapper");(r=i||(i={}))[r.WEBPAGE=100]="WEBPAGE",r[r.All=101]="All",r[r.PDF=102]="PDF",r[r.Scholar=103]="Scholar",r[r.PodCast=104]="PodCast",r[r.Image=105]="Image",r[r.Knowledge=106]="Knowledge",r[r.Video=107]="Video";var X=_.memo(function(e){var n,t=e.className,r=e.isH5,i=e.activeTab,h=e.activeLanguage,g=(e.onChange,e.newSearch,e.hiddeFilter,e.suffixSlot),b=e.prefixSlot,w=(e.activeTopicName,(0,l._)(e,["className","isH5","activeTab","activeLanguage","onChange","newSearch","hiddeFilter","suffixSlot","prefixSlot","activeTopicName"]));(0,G.LM)(function(e){return e.login}),(0,G.LM)(function(e){var n;return JSON.parse((null===(n=e.userInfo)||void 0===n?void 0:n.notes)||"{}")});var C=(0,D.a2)(function(e){return e.isTraditionalSearchEngineModeActive}),S=(0,x.a8)(),k=(0,_.useDeferredValue)(S),T=(0,c._)((0,x.U8)(i,101,{isControlled:!1}),2),L=T[0],O=T[1],N=(0,c._)((0,_.useState)(!0),2),P=N[0],z=N[1],U=(0,c._)(_.useState(null),2),V=U[0],X=U[1],ei=(0,_.useContext)(M.HO),eo=(0,_.useRef)(null),es=(0,c._)((0,_.useState)(!1),2),el=es[0],ec=es[1];(0,R.bQ)({anchor:function(){return V},popover:function(){var e;return ei||(null===(e=eo.current)||void 0===e?void 0:e.nodeRef.current)}},el,function(){r||ec(!1)});var eu=et.useContextValue(),ed=(0,_.useRef)(!1),eh=(0,c._)((0,_.useState)(e.activeTopicId),2),ef=eh[0],ep=eh[1],ev=(0,c._)((0,_.useState)(e.activeLanguage),2),em=ev[0],eg=ev[1],ex=(0,c._)((0,_.useState)(y.wb.ALL),2),eb=ex[0],ew=ex[1],ey=(0,c._)((0,_.useState)(Q.u.UNLIMITED),2),eC=ey[0],eS=ey[1],ej=(0,c._)((0,_.useState)(null),2),ek=ej[0],eE=ej[1];(0,_.useLayoutEffect)(function(){if(e.activeLanguage){var n=function(e){var n={type:y.wb.ALL,rangeType:Q.u.UNLIMITED,date:null},t=Object.values(y.wb).some(function(n){return n===e});if(e&&!t){var r=e.split("|");if(r.length>=2){var i,a,o=null===(i=r[2].match(/^(\d+-\d+-\d+):/))||void 0===i?void 0:i[1],s=null===(a=r[2].match(/:(\d+-\d+-\d+)$/))||void 0===a?void 0:a[1];Object.assign(n,{type:r[0],rangeType:r[1],date:o&&s?{start:new Date(o),end:new Date(s)}:null})}}else t&&(n.type=e);return n}(e.activeLanguage);n.rangeType?(ew(n.type),eS(n.rangeType),eE(n.date)):(ew(n.type),eE(null),eS(Q.u.UNLIMITED))}},[e.activeLanguage]);var e_=(0,_.useCallback)(function(){var n=ea({rangeType:eC,date:ek,type:eb});e.onChange(103,n)},[eb,eC,ek]);et.useRegister("root",function(){return{setActiveTab:O}},[]),(0,_.useEffect)(function(){setTimeout(function(){(0,_.startTransition)(function(){z(!1)})},1e3)},[]),(0,_.useEffect)(function(){103===e.activeTab&&(e.activeLanguage||y.wb.ALL)},[e.activeLanguage,e.activeTab]);var eT=(0,_.useMemo)(function(){return!!r&&(103!==L||!el)},[r,L,el]);(0,_.useEffect)(function(){ed.current?(z(!0),e.onChange(L,em)):ed.current=!0},[L,em]);var eI=(0,_.useMemo)(function(){return(0,F.zh)(h||y.wb.ALL)},[h]),eL=(0,c._)((0,_.useState)(eI.format),2),eR=eL[0],eZ=eL[1],eM=(0,c._)((0,_.useState)(eI.type),2),eD=eM[0],eA=eM[1],eO=(0,c._)((0,_.useState)(eI.rangeType),2),eN=eO[0],eP=eO[1],eF=(0,c._)((0,_.useState)(eI.date),2),eH=eF[0],eG=eF[1],eW=(0,c._)((0,_.useState)(!!e.newSearch),2),eB=eW[0],eq=eW[1],ez=(0,_.useCallback)(function(){var n=(0,F.jE)({format:eR,date:eH,rangeType:eN,type:eD});e.onChange(102,n)},[eR,eN,eD,eH]),eU=(0,_.useCallback)(function(e,n){eP(e),eG(n)},[]);(0,_.useLayoutEffect)(function(){e.isH5||(e.hiddeFilter?eq(!1):eq(A.ZP.showReferenceFilter.get()))},[e.hiddeFilter,e.isH5,e.newSearch]);var eV=(0,Y.Q)().list,eK=(0,_.useMemo)(function(){return eV.filter(function(e){return!e.share})},[eV]),eQ=(0,_.useMemo)(function(){return eV.filter(function(e){return e.share})},[eV]),eY=(0,_.useRef)(!1),eJ=(0,_.useRef)(null);(0,_.useEffect)(function(){k&&setTimeout(function(){var e=null===(n=eJ.current)||void 0===n?void 0:n.querySelector(".Mui-selected");if(e){var n,t,r,i,a,o=e.getBoundingClientRect();null===(a=e.parentElement)||void 0===a||null===(i=a.parentElement)||void 0===i||null===(r=i.parentElement)||void 0===r||null===(t=r.parentElement)||void 0===t||t.scrollTo({left:o.left})}},200)},[e.activeTab,k]);var eX=(0,_.useRef)(eb),e$=(0,_.useCallback)(function(e,n,t){eS(e);var r=n&&t?{start:n,end:t}:null;eE(r),eg(ea({type:eX.current,rangeType:e,date:r}))},[]);return(0,_.useEffect)(function(){eX.current=eb},[eb]),(0,u.jsx)(d.Z,(0,s._)((0,o._)({component:"section",id:J,className:j()(E()["search-domain-tabs-root"],t,(0,a._)({},E()["sd--borderBtm"],eT))},w),{children:(0,u.jsxs)(et.Boundary,{payload:L,contextValue:eu,children:[k?(0,u.jsxs)(p.Z,{direction:"row",alignContent:"center",overflow:"visible",sx:{width:"100%","&::-webkit-scrollbar":{display:"none"}},children:[b,(0,u.jsxs)(d.Z,{ref:eJ,sx:{flex:1,overflowX:"auto",height:"45px","&::-webkit-scrollbar":{display:"none"}},children:[106==L&&(0,u.jsxs)(d.Z,{className:E()["search-domain-tabs-topicName"],children:[(0,u.jsx)(q.Z,{}),(0,u.jsx)(d.Z,{children:"回答"})]}),(0,u.jsxs)(f.Z,{sx:{"&[class]":{height:"44px",minHeight:"44px!important",overflowY:"unset!important"},".MuiTabs-scroller[class]":{overflowX:"auto!important","&::-webkit-scrollbar":{display:"none"}},".MuiTabs-scroller .MuiTabs-indicator[class]":{borderRadius:"10px",height:"2px",bgcolor:"#1570ef",transform:"translateY(2px) scaleX(.44)"},".Mui-selected[class][class]":{color:"#1570ef"}},value:L,onChange:function(e,n){103!==n?eg(y.wb.ALL):eg(A.ZP.scholarLang.get()),O(n)},children:[106!=L&&(100===L||C)&&(0,u.jsx)($,{disabled:P,label:"网页",value:100},"网页"),106!=L&&(0,u.jsx)($,{disabled:P,label:C?"AI":"全网",value:101},"全网"),106!=L&&(0,u.jsx)(er,{formatValue:eR,showArrow:e.isH5,timeValue:eN,timeDate:eH,typeValue:eD,value:102,disabled:P,hideMenu:!!e.hiddeFilter,isH5:e.isH5,onConfirm:ez,onTypeChange:eA,onFormatChange:eZ,onTimeChange:eU},"文库"),106!=L&&(0,u.jsx)(ee,{disabled:P,showArrow:e.isH5,label:"学术",onOpenChange:ec,open:el,value:103},"学术"),106!=L&&(0,u.jsx)($,{disabled:P,label:"图片",value:105},"图片"),106!=L&&(0,u.jsx)($,{disabled:P,label:"视频",value:107},"视频"),106!=L&&(0,u.jsx)($,{disabled:P,label:"播客",value:104},"播客")]})]}),r?g:(0,u.jsxs)(p.Z,{direction:"row",alignItems:"center",spacing:"20px",children:[!e.hiddeFilter&&106!=L&&(103===L||102===L)&&(0,u.jsx)(H.Z,{className:E()["filter-check-button"],sx:{minWidth:"unset",color:"var(--export-menu-color)"},checked:eB,onCheckedChange:function(e){eY.current=e},onClick:function(){eq(eY.current),A.ZP.showReferenceFilter.set(eY.current)},children:(0,u.jsx)("svg",{width:"22",height:"20",viewBox:"0 0 22 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)("path",{d:"M2.38589 3.66687C1.62955 2.82155 1.25138 2.39889 1.23712 2.03968C1.22473 1.72764 1.35882 1.42772 1.59963 1.22889C1.87684 1 2.44399 1 3.57828 1H18.4212C19.5555 1 20.1227 1 20.3999 1.22889C20.6407 1.42772 20.7748 1.72764 20.7624 2.03968C20.7481 2.39889 20.3699 2.82155 19.6136 3.66687L13.9074 10.0444C13.7566 10.2129 13.6812 10.2972 13.6275 10.3931C13.5798 10.4781 13.5448 10.5697 13.5236 10.6648C13.4997 10.7721 13.4997 10.8852 13.4997 11.1113V16.4584C13.4997 16.6539 13.4997 16.7517 13.4682 16.8363C13.4403 16.911 13.395 16.9779 13.336 17.0315C13.2692 17.0922 13.1784 17.1285 12.9969 17.2012L9.59686 18.5612C9.22931 18.7082 9.04554 18.7817 8.89802 18.751C8.76901 18.7242 8.6558 18.6476 8.583 18.5377C8.49975 18.4122 8.49975 18.2142 8.49975 17.8184V11.1113C8.49975 10.8852 8.49975 10.7721 8.47587 10.6648C8.45469 10.5697 8.41971 10.4781 8.37204 10.3931C8.31828 10.2972 8.2429 10.2129 8.09213 10.0444L2.38589 3.66687Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),g]})]}):(0,u.jsx)(p.Z,{direction:"row",alignItems:"center",sx:{height:50}}),!r&&106!=L&&eB&&(102===L||103===L)&&(0,u.jsxs)(d.Z,{display:"flex",marginLeft:"18px",marginTop:"10px",children:[102===L&&(0,u.jsx)(F.Ke,{languageDomain:e.activeLanguage,onChange:function(n){e.onChange(102,n)}}),103===L&&(0,u.jsxs)(p.Z,{direction:"row",spacing:2,children:[(0,u.jsxs)(p.Z,{direction:"row",ref:X,alignItems:"center",spacing:1,className:E()["filter-item"],onMouseEnter:function(){ec(!0)},onMouseLeave:function(){ec(!1)},children:[(0,u.jsx)(d.Z,{component:"div",children:(I._O.find(function(e){return e.value===eb})||I._O[0]).label}),(0,u.jsx)(d.Z,{display:"flex",className:j()(E()["arrow-icon"],(0,a._)({},E()["arrow-icon-reverse"],el)),children:(0,u.jsx)("svg",{width:"11",height:"6",viewBox:"0 0 11 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)("path",{d:"M1.75 1.125L5.5 4.875L9.25 1.125",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),!r&&(0,u.jsxs)(R.ZP,{anchor:V,ref:eo,onOpenChanged:ec,open:el,placement:"bottom",children:[(0,u.jsx)(v.Z,{className:E()["menu-title"],children:"文献范围"}),(0,u.jsx)(Z.R,{sx:{padding:"10px 0"},sxs:{listItem:{padding:"0 10px"}},keyPropName:"value",items:I._O,renderItem:function(e,n){return{content:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.Z,{sx:{width:"100px"},children:e.label}),e.value===eb&&(0,u.jsx)("svg",{width:"16",height:"11",viewBox:"0 0 16 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)("path",{d:"M14.6666 1L5.49992 10.1667L1.33325 6",stroke:"#1570EF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),listItemButtonProps:{className:j()(E()["range-item"],e.value===eb?E().active:""),sx:{p:"0 5px !important"},onClick:function(){ec(!1),ew(e.value),eg(ea({type:e.value,rangeType:eC,date:ek}))}}}}})]})]}),(0,u.jsx)(K.fU,{type:eC,dateRange:ek,onChange:e$})]}),106===L&&(0,u.jsxs)(p.Z,{direction:"row",ref:function(e){X(e)},alignItems:"center",spacing:1,className:E()["filter-item"],onMouseEnter:function(){ec(!0)},onMouseLeave:function(){ec(!1)},children:[(0,u.jsx)(d.Z,{component:"div",sx:{maxWidth:"150px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:(null===(n=eV.find(function(e){return e.topicId===ef}))||void 0===n?void 0:n.name)||"全部"}),(0,u.jsx)(d.Z,{display:"flex",className:j()(E()["arrow-icon"],(0,a._)({},E()["arrow-icon-reverse"],el)),children:(0,u.jsx)("svg",{width:"11",height:"6",viewBox:"0 0 11 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)("path",{d:"M1.75 1.125L5.5 4.875L9.25 1.125",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,u.jsx)(R.ZP,{anchor:V,ref:eo,onOpenChanged:ec,open:el,placement:"bottom",children:(0,u.jsxs)(B.Z,{sx:{width:150,p:.5,height:"200px",overflowY:"auto"},children:[(0,u.jsx)(m.Z,{sx:{margin:"5px 0"}}),(0,u.jsx)(v.Z,{className:E()["menu-title"],sx:{padding:"5px 10px !important"},children:"我的"}),eK.map(function(n){var t=n.topicId===ef;return(0,u.jsx)(W.NP,{startSlot:(0,u.jsx)(d.Z,{sx:{color:t?"primary.main":"var(--black)",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:n.name}),sx:{my:.5},checked:t,onClick:function(t){ep(n.topicId),ec(!1),e.onChange(106,n.topicId)}},n.id)}),eQ.length>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(m.Z,{sx:{margin:"5px 0"}}),(0,u.jsx)(v.Z,{className:E()["menu-title"],sx:{padding:"5px 10px !important"},children:"分享给我"}),eQ.map(function(n){var t=n.topicId===ef;return(0,u.jsx)(W.NP,{startSlot:(0,u.jsx)(d.Z,{sx:{color:t?"primary.main":"var(--black)",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:n.name}),sx:{my:.5},checked:t,onClick:function(t){ep(n.topicId),ec(!1),e.onChange(106,n.topicId)}},n.id)})]})]})})]})]}),k&&r&&(0,u.jsx)(en,{onOpenChange:ec,activeLanguage:eb,timeDate:ek,timeValue:eC,onConfirm:e_,onActiveLangChange:ew,onTimeChange:function(e,n){eS(e),eE(n)},open:el})]})}))}),$=(0,_.forwardRef)(function(e,n){var t=e.className,r=(0,l._)(e,["className"]),i=et.useBoundaryPayload();return(0,u.jsx)(h.Z,(0,o._)({ref:n,className:j()(t,[E()["search-domain-tab"]],(0,a._)({},E()["search-domain-tab--active"],i===e.value))},r))}),ee=(0,_.forwardRef)(function(e,n){var t=(0,c._)((0,_.useState)(null),2),r=t[0],i=t[1];(0,_.useImperativeHandle)(n,function(){return r},[r]);var a=e.onClick,s=e.onOpenChange,d=e.open,h=(e.label,e.showArrow),f=(0,l._)(e,["onClick","onOpenChange","open","label","showArrow"]),p=et.useBoundaryPayload(),v=p===f.value,m=(0,c._)((0,x.U8)(d,!1,{isControlled:!1,onChanged:s}),2),b=m[0],w=m[1];return(0,_.useEffect)(function(){p!==e.value&&w(!1)},[p,e.value]),(0,u.jsx)($,(0,o._)({ref:function(e){i(e)},label:(0,u.jsxs)(g.K,{children:[e.label,v&&e.showArrow&&(0,u.jsx)(C.Z,{style:{position:"absolute",right:5,transition:".2s transform",transform:b?"rotate(180deg)":"none"}})]}),onClick:function(n){h&&p===e.value&&(w(function(e){return!e}),null==a||a(n))}},f))});function en(e){var n,t=e.sx,r=e.open,i=e.onOpenChange,a=e.activeLanguage,h=e.onActiveLangChange,f=(0,l._)(e,["sx","open","onOpenChange","activeLanguage","onActiveLangChange"]),p=(0,c._)((0,x.U8)(a,y.wb.ALL,{isControlled:!1,onChanged:h}),2),m=p[0],g=p[1],b=(0,c._)((0,x.U8)(r,!1,{isControlled:!1,onChanged:i}),2),w=b[0],C=b[1],S=(0,_.useRef)(null);et.useRegister("langRangeDropdown",function(){return{toggle:function(e){if(void 0===e)return C(function(e){return!e});C(e)}}},[]);var j=(0,_.useRef)({activeLanguage:e.activeLanguage||y.wb.ALL,timeValue:e.timeValue,timeDate:e.timeDate}),k=(0,_.useMemo)(function(){var n,t,r,i,a=j.current;return e.activeLanguage!==a.activeLanguage||e.timeValue!==a.timeValue||(null===(n=e.timeDate)||void 0===n?void 0:n.start.getTime())!==(null===(t=a.timeDate)||void 0===t?void 0:t.start.getTime())||(null===(r=e.timeDate)||void 0===r?void 0:r.end.getTime())!==(null===(i=a.timeDate)||void 0===i?void 0:i.end.getTime())},[e.timeValue,e.timeDate,e.activeLanguage]);return(0,_.useEffect)(function(){if(!e.open){var n=j.current;e.onActiveLangChange(n.activeLanguage),e.onTimeChange(n.timeValue,n.timeDate)}},[e.open]),(0,u.jsx)(d.Z,(0,s._)((0,o._)({sx:(0,L.Vc)({width:1,position:"absolute",zIndex:1,pointerEvents:"none"},t)},f),{children:(0,u.jsx)(T.Z,{direction:"down",open:w,onOpenChange:function(e){var n;null!==(n=S.current)&&void 0!==n&&n.pickerOpen||C(e)},children:(0,u.jsxs)(d.Z,{className:E()["attach-box"],children:[(0,u.jsx)(v.Z,{sx:{textAlign:"left",fontSize:14,fontWeight:"bold"},children:"文献范围"}),(0,u.jsx)(N.ItemButtonContainer,{children:I._O.map(function(e,n){return(0,u.jsx)(N.FilterItemButton,{onClick:g.bind(null,e.value),active:e.value===m,children:e.label},e.value)})}),(0,u.jsxs)(d.Z,{children:[(0,u.jsx)(N.Caption,{children:"时间"}),(0,u.jsxs)(N.ItemButtonContainer,{children:[F._Q.map(function(n){return(0,u.jsx)(N.FilterItemButton,{active:n.value===e.timeValue,onClick:function(){e.onTimeChange(n.value,null)},children:n.label},n.value)}),(0,u.jsx)(N.CustomRangeFilterButton,{active:e.timeValue===Q.u.CUSTOM&&!!(null===(n=e.timeDate)||void 0===n?void 0:n.start),ref:S,onRangeChange:function(n){e.onTimeChange(Q.u.CUSTOM,n)},children:e.timeDate&&e.timeValue===Q.u.CUSTOM?"".concat(eo(e.timeDate.start),"至").concat(eo(e.timeDate.end)):"自定义时间..."})]})]}),(0,u.jsx)(V.Z,{disabled:!k,sx:{width:1,mt:3},onClick:e.onConfirm,variant:"contained",children:"确定"})]})})}))}var et=w()();function er(e){var n=e.typeValue,t=e.timeValue,r=e.timeDate,i=e.formatValue,a=e.onFormatChange,s=e.onTimeChange,h=e.onTypeChange,f=(e.onConfirm,e.hideMenu),p=e.showArrow,v=(e.isH5,(0,l._)(e,["typeValue","timeValue","timeDate","formatValue","onFormatChange","onTimeChange","onTypeChange","onConfirm","hideMenu","showArrow","isH5"])),m=(0,c._)((0,_.useState)(!1),2),g=m[0],x=m[1],b=(0,c._)((0,_.useState)(!1),2),w=b[0],y=b[1];(0,_.useEffect)(function(){setTimeout(function(){(0,_.startTransition)(function(){}),y(!0)},1900)},[]);var C=(0,_.useCallback)(function(){x(!1),e.onConfirm()},[e.onConfirm]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(ee,(0,o._)({label:"文库",open:g,onClick:function(){x(!g)},showArrow:p&&!f},v)),!!e.isH5&&w&&!f&&(0,P.createPortal)((0,u.jsx)(d.Z,{sx:{position:"absolute",width:1,overflow:"hidden",pointerEvents:"none"},children:(0,u.jsx)(ei,{open:g,onOpenChange:x,onConfirm:C,formatValue:i,onFormatChange:a,timeValue:t,timeDate:r,onTimeChange:s,typeValue:n,onTypeChange:h})}),document.getElementById(J))]})}var ei=(0,O.default)(function(){return Promise.resolve().then(t.bind(t,26852))},{loadableGenerated:{webpack:function(){return[26852]}}});function ea(e){var n=e.date,t=e.rangeType,r=e.type;if(!t)return r;var i=n?"".concat(eo(n.start),":").concat(eo(n.end)):"";return"".concat(r,"|").concat(t||"","|").concat(i)}var eo=function(e){return U()(e).format("YYYY-MM-DD")}},55833:function(e,n,t){"use strict";t.d(n,{ld:function(){return nI},lf:function(){return nw},Du:function(){return ny},FQ:function(){return np},i9:function(){return nM},r$:function(){return p},wY:function(){return nd},c_:function(){return nk},sW:function(){return nh},fS:function(){return nZ},IS:function(){return g},e3:function(){return nE},vs:function(){return nl},HK:function(){return nu},dz:function(){return n_},Un:function(){return nc},GG:function(){return nA},G2:function(){return nC},Im:function(){return nT},jw:function(){return nD},Cx:function(){return nm},eQ:function(){return nf},a3:function(){return nb},Rx:function(){return ng},ey:function(){return nR},P4:function(){return nL}});var r,i,a,o,s,l,c,u,d,h,f,p,v,m,g,x,b,w,y=t(2403),C=t(12249),S=t(5194),j=t(1780),k=t(46796),E=t(50059),_=t(85735),T=t(5853),I=t(57437),L=t(2265),R=t(60639),Z=t(8294),M=t(14382),D=t.n(M),A=t(78693),O=t(93383),N=t(19643),P=t(59832),F=t(75624),H=t(8350),G=t(39207),W=t(7870),B=t(47812),q=t(22322),z=t(77630),U=t(82605),V=t(94746);function K(){return(K=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}function Q(){return(Q=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var Y=t(74634),J=t(36760),X=t.n(J),$=t(43180),ee=t(23760),en=t(23048),et=t(48359),er=t.n(et),ei=t(5108),ea=t(22629);function eo(){return(eo=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var es=function(e){return V.createElement("svg",eo({xmlns:"http://www.w3.org/2000/svg",width:18,height:12,fill:"none",viewBox:"0 0 18 12"},e),l||(l=V.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M1.5 6h15m-15-5h15m-15 10h15"})))},el=t(26058),ec=t(69161);function eu(){return(eu=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var ed=t(96339);function eh(){return(eh=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var ef=function(e){return V.createElement("svg",eh({xmlns:"http://www.w3.org/2000/svg",width:18,height:8,fill:"none",viewBox:"0 0 18 8"},e),u||(u=V.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M1.5 1.084h15m-15 5.833h15"})))};function ep(){return(ep=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var ev=function(e){return V.createElement("svg",ep({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),d||(d=V.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3.75 18.333v-4.167m0-8.333V1.666M1.667 3.749h4.166m-4.166 12.5h4.166m5-13.75L9.388 6.257c-.235.61-.352.916-.535 1.173a2.5 2.5 0 0 1-.589.589c-.257.183-.562.3-1.173.535L3.333 10l3.758 1.445c.61.236.916.353 1.173.536q.344.245.589.588c.183.257.3.563.535 1.174l1.445 3.757 1.446-3.757c.235-.611.352-.917.535-1.174.162-.227.36-.426.588-.588.258-.183.563-.3 1.174-.536L18.333 10l-3.757-1.445c-.611-.235-.917-.352-1.174-.535a2.5 2.5 0 0 1-.588-.589c-.183-.257-.3-.562-.535-1.173z"})))};function em(){return(em=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var eg=function(e){return V.createElement("svg",em({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),h||(h=V.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.667,d:"M1.667 10h16.666M1.667 10A8.333 8.333 0 0 0 10 18.332M1.667 9.999A8.333 8.333 0 0 1 10 1.666m8.333 8.333A8.333 8.333 0 0 1 10 18.333m8.333-8.334A8.333 8.333 0 0 0 10 1.666m0 0a12.75 12.75 0 0 1 3.333 8.333A12.75 12.75 0 0 1 10 18.333m0-16.667a12.75 12.75 0 0 0-3.333 8.333A12.75 12.75 0 0 0 10 18.333"})))};function ex(){return(ex=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var eb=function(e){return V.createElement("svg",ex({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",viewBox:"0 0 20 16"},e),f||(f=V.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.667,d:"M4.167 6.334v5.01c0 .299 0 .448.045.58q.061.177.193.312c.097.1.231.166.499.3l4.5 2.25c.218.11.328.164.442.186q.154.028.308 0c.114-.022.224-.076.442-.186l4.5-2.25c.268-.134.402-.2.5-.3a.8.8 0 0 0 .192-.312c.045-.132.045-.281.045-.58v-5.01M1.667 5.084l8.035-4.017c.11-.055.164-.082.221-.093q.077-.015.154 0c.057.01.112.038.221.093l8.035 4.017-8.035 4.018a1 1 0 0 1-.221.093.4.4 0 0 1-.154 0c-.057-.011-.112-.038-.221-.093z"})))},ew=t(89051),ey=t(29066),eC=t.n(ey),eS=t(46075),ej=t.n(eS),ek=t(95377),eE=t(57378),e_=t(82984),eT=t(8090),eI=t(46654),eL=t(22192),eR=t(36570),eZ=t(31219),eM=t(41963),eD=t(75825),eA=t(89831),eO=t(79943),eN=t(89480),eP=t(18769),eF=t(84303),eH=t(13477),eG=t(35170),eW=t(15273),eB=t(11741),eq=t(86602),ez=t(19120),eU=t(46387),eV=(0,L.memo)((0,L.forwardRef)(function(e,n){var t=(0,eG.vH)({template:e.template,variable:e.variable});return(0,I.jsx)(eW.Z,{children:t.map(function(n,t){return(0,I.jsx)(eB.Z,{selected:e.activeIndex===t,onClick:function(){e.onOutlineClicked(n,t)},children:n.title},n)})})})),eK=(0,L.memo)((0,L.forwardRef)(function(e,n){var t=(0,E._)((0,L.useState)(!1),2),r=t[0],i=t[1];eG.GO.useRegister("catalogDrawer",function(){return{open:function(){i(!0)},close:function(){i(!1)},registerOutlineClicked:s,setActiveIndex:d}},[]);var a=(0,E._)((0,L.useState)(null),2),o=a[0],s=a[1],l=(0,eF._)({},(0,eH._)(e)),c=(0,E._)((0,L.useState)(0),2),u=c[0],d=c[1];return(0,I.jsxs)(eq.Z,{open:r,onClose:function(){i(!1)},sx:{".MuiDrawer-paper ":{maxHeight:"70vh"}},children:[(0,I.jsx)(ez.Z,{leftSlot:(0,I.jsx)(eU.Z,{sx:{ml:2,fontSize:16,fontWeight:"bold"},children:"目录"}),middleSlot:!1,onClose:function(){i(!1)}}),(0,I.jsx)(A.Z,{sx:{overflowY:"auto"},children:(0,I.jsx)(eV,(0,S._)({onOutlineClicked:function(e,n){null==o||o.fn(e,n),d(n)},activeIndex:u},l))})]})})),eQ=t(28898),eY=t(53998),eJ=t(59214),eX=t(25222),e$=t(56731),e0=t(16308),e1=t(58494),e2=t(27648),e3=t(27030),e5=t(36956),e4=t(70626),e6=t(76904),e7=t(63080),e8=t(75545),e9=t(3864),ne=t(97635),nn=t(36706),nt=t(67253),nr=t(92498),ni=t(36812),na=t(31006),no=t(22805),ns=t(16039);(r=p||(p={})).MindMap="mindMap",r.RealTimeInfo="realTimeInfo",r.EventTable="eventTable",r.OrganizationTable="organizationTable",r.PeopleTable="peopleTable",r.OtherInfoTable="otherInfoTable";var nl=(0,R.E)(),nc=(0,R.E)(),nu=D()(),nd=D()(),nh={简洁:"concise",深入:"detail",研究:"strong-research",concise:"简洁",research:"研究 \xb7 先搜后扩",detail:"深入",standard:"深入","strong-research":"研究 \xb7 先想后搜","think-research":"深度研究"},nf={简洁:"concise",深入:"detail",研究:"strong-research",concise:"简洁",research:"研究",detail:"深入",standard:"深入","strong-research":"研究","think-research":"深度研究"},np=(v={},(0,C._)(v,B.rG.SCHOLAR,"学术搜索"),(0,C._)(v,B.rG.PODCAST,"播客搜索"),(0,C._)(v,B.rG.WEBPAGE,"全网搜索"),(0,C._)(v,B.rG.WORKFLOW,"全网搜索"),(0,C._)(v,B.rG.PDF,"文库搜索"),(0,C._)(v,B.rG.KNOWLEDGE,"知识搜索"),(0,C._)(v,B.rG.IMAGE,"图片搜索"),v),nv=(m={},(0,C._)(m,B.rG.SCHOLAR,"学术"),(0,C._)(m,B.rG.VIDEO,"视频"),(0,C._)(m,B.rG.PODCAST,"播客"),(0,C._)(m,B.rG.PDF,"文库"),(0,C._)(m,B.rG.IMAGE,"图片"),(0,C._)(m,B.rG.KNOWLEDGE,"我的"),(0,C._)(m,B.rG.WEBPAGE,"网页"),(0,C._)(m,B.rG.DEFAULT,(0,W.Y0)()),m);function nm(e,n,t){var r={endIndex:0,highlights:[]};if(!n||!e)return r.highlights=t,r;var i=(u=e.match(/(\[\[\d+\]\])+/g))&&0!=u.length?u.map(function(e){return e.match(/\d+/g).map(Number)}):[],a=0,o=[],s=!0,l=!1,c=void 0;try{for(var u,d,h=i[Symbol.iterator]();!(s=(d=h.next()).done);s=!0){var f=d.value,p=(0,e9._p)(f.map(function(e){return{index:e-1,link:n[e-1]}})),v=!0,m=!1,g=void 0;try{for(var x,b=p[Symbol.iterator]();!(v=(x=b.next()).done);v=!0){var w=x.value;o.push(t[a+w.originListIndex])}}catch(e){m=!0,g=e}finally{try{v||null==b.return||b.return()}finally{if(m)throw g}}a+=f.length}}catch(e){l=!0,c=e}finally{try{s||null==h.return||h.return()}finally{if(l)throw c}}return r.endIndex=a,r.highlights=o,r}(i=g||(g={}))[i.THINKING=0]="THINKING",i[i.ANSWERING=1]="ANSWERING",i[i.THINKING2=2]="THINKING2",i[i.FINAL_ANSWERING=3]="FINAL_ANSWERING";var ng=function(e,n,t){var r,i,a,o,s,l,c,u,d,h,f,p,v,m,g,x,b,w,C,k,R,M,D,O,N,P,F,H,z,U,V,K,Q,J,X,$,en,et,er,ei,eo,es,ec,eu,eh,ef,ep,ev,em,eg,ex,eb,ew,ey,eS,ej,ek,eE,eI,eL,eP,eF,eH,eG,eW,eB=function(e){},eq=function(e){var n,t,r,i,a;(0,W.Ev)(tJ.current),(0,W.Ev)(rM.current),rM.current=null,null===(n=i6.current)||void 0===n||n.setLoadingTime(0),null===(t=rE.current)||void 0===t||t.updateLoading(!1),null===(r=rE.current)||void 0===r||r.setFinishResult(rp.current),ny.current=rp.current,(0,L.startTransition)(function(){ng(rp.current),tH(!0),iA(!0),iP(!1)}),null===(i=tG.current)||void 0===i||i.setStartLoading(!1),tY.current&&((0,W.Ev)(tY.current),tY.current=null),null===(a=n2.current)||void 0===a||a.onProgress({step:4,totalProgress:100,currentStepProgress:100}),setTimeout(function(){var e;null===(e=i6.current)||void 0===e||e.setShowProgress(!1)},e?0:1e3)},ez=(0,E._)((0,L.useState)(""),2),eU=ez[0],eV=ez[1],eK=(0,L.useMemo)(function(){if(!(null===(t=e.history)||void 0===t?void 0:t.strongResearchAnswer))return null;var n={finalAnswer:e.history.strongResearchAnswer.steps.find(function(e){return"final_answer"===e.name})||{texts:[{type:"text",text:""}]},subQuestions:e.history.strongResearchAnswer.steps.filter(function(e){return"sub_question"===e.name}),plan:e.history.strongResearchAnswer.steps.find(function(e){return"plan"===e.name})||{texts:[{type:"cot",text:""}]}};if(null===(r=n.plan)||void 0===r?void 0:r.texts[0]){var t,r,i,a=0,o=null===(i=n.plan.texts[0])||void 0===i?void 0:i.originReferNums;n.plan.texts[0].text=n.plan.texts[0].text.split(/(\[\[\d+]])/).map(function(e){var n=e.match(/\[\[(\d+)]]/);return n?e.replace(n[1],o[a++].toString()):e}).join("")}return n.subQuestions&&n.subQuestions.length>0&&n.subQuestions.forEach(function(e){e.texts.forEach(function(e){var n=0,t=e.originReferNums;e.text=e.text.split(/(\[\[\d+]])/).map(function(e){var r=e.match(/\[\[(\d+)]]/);return r?e.replace(r[1],t[n++].toString()):e}).join("")})}),n.finalAnswer&&n.finalAnswer.texts.forEach(function(e){var n=0,t=e.originReferNums;e.text=e.text.split(/(\[\[\d+]])/).map(function(e){var r=e.match(/\[\[(\d+)]]/);return r?e.replace(r[1],t[n++].toString()):e}).join("")}),n},[null===(g=e.history)||void 0===g?void 0:g.strongResearchAnswer]),eJ=(0,L.useMemo)(function(){var n,t,r,i;return{subQuestions:null===(t=e.history)||void 0===t?void 0:null===(n=t.thinkResearchAnswer)||void 0===n?void 0:n.steps.filter(function(e){return"deep_think_sub_question"===e.name}),finalAnswer:null===(i=e.history)||void 0===i?void 0:null===(r=i.thinkResearchAnswer)||void 0===r?void 0:r.steps.find(function(e){return"deep_think_final_answer"===e.name})}},[null===(x=e.history)||void 0===x?void 0:x.thinkResearchAnswer]),eX=(0,L.useMemo)(function(){var n,t,r,i,a,o,s,l=Array.from({length:(null===(r=e.history)||void 0===r?void 0:null===(t=r.strongResearchAnswer)||void 0===t?void 0:null===(n=t.subQuestions)||void 0===n?void 0:n.length)||0},function(){return""}),c=Array.from({length:(null===(o=e.history)||void 0===o?void 0:null===(a=o.strongResearchAnswer)||void 0===a?void 0:null===(i=a.subQuestions)||void 0===i?void 0:i.length)||0},function(){return""});return null==eK||null===(s=eK.subQuestions)||void 0===s||s.forEach(function(e){var n,t;l[parseInt(e.extra.index)]=(null===(n=e.texts.find(function(e){return"text"===e.type}))||void 0===n?void 0:n.text)||"",c[parseInt(e.extra.index)]=(null===(t=e.texts.find(function(e){return"cot"===e.type}))||void 0===t?void 0:t.text)||""}),{multiQATexts:l,multiQACots:c}},[null==eK?void 0:eK.subQuestions,null===(C=e.history)||void 0===C?void 0:null===(w=C.strongResearchAnswer)||void 0===w?void 0:null===(b=w.subQuestions)||void 0===b?void 0:b.length]),e3=eX.multiQATexts,e7=eX.multiQACots,e9=(0,E._)((0,L.useState)(e.realQuestion||e.question),2),nu=e9[0],nd=e9[1],nh=(0,E._)((0,L.useState)(function(){var n,t,r,i,a,o,s,l,c,u,d,h;return"strong-research"===e.mode?(null==eK?void 0:null===(t=eK.finalAnswer.texts)||void 0===t?void 0:null===(n=t.find(function(e){return"text"===e.type}))||void 0===n?void 0:n.text)||"":"think-research"===e.mode?(null==eJ?void 0:null===(a=eJ.finalAnswer)||void 0===a?void 0:null===(i=a.texts)||void 0===i?void 0:null===(r=i.find(function(e){return"text"===e.type}))||void 0===r?void 0:r.text)||"":(null===(d=e.history)||void 0===d?void 0:null===(u=d.normalAnswer)||void 0===u?void 0:null===(c=u.steps)||void 0===c?void 0:null===(l=c[0])||void 0===l?void 0:null===(s=l.texts)||void 0===s?void 0:null===(o=s.filter(function(e){return"text"===e.type}))||void 0===o?void 0:o.map(function(e){return e.text}).join(""))||(null===(h=e.history)||void 0===h?void 0:h.answer)||""}),2),nf=nh[0],ng=nh[1],nx=(0,E._)((0,L.useState)((null===(k=e.history)||void 0===k?void 0:k.edited)||!1),2),nb=nx[0];nx[1];var nw=(0,L.useMemo)(function(){var e,n,t,r,i,a,o=null!==(r=null==nf?void 0:null===(e=nf.match(/[\u4e00-\u9fa5]/g))||void 0===e?void 0:e.length)&&void 0!==r?r:0,s=null!==(i=null==nf?void 0:null===(n=nf.match(/\b[a-zA-Z]+\b/g))||void 0===n?void 0:n.length)&&void 0!==i?i:0;return(o+s===0?null!==(a=null==nf?void 0:null===(t=nf.replace(/[\u3000-\u303F\u4E00-\u9FA5\uFE30-\uFFA0^\w\s]/g,""))||void 0===t?void 0:t.length)&&void 0!==a?a:0:o+s)<=150},[nf]),ny=(0,L.useRef)(nf),nC=(0,L.useMemo)(function(){var n,t;return(null===(n=e.history)||void 0===n?void 0:n.thinkResearchAnswer)?e.history.thinkResearchAnswer.steps.filter(function(e){return e.extra}).flatMap(function(e){return e.extra.links||[]}):null===(t=e.history)||void 0===t?void 0:t.references},[null===(R=e.history)||void 0===R?void 0:R.thinkResearchAnswer]),nS=(0,E._)((0,L.useState)(nC||[]),2),nj=nS[0],nk=nS[1],nE=(0,L.useRef)((null===(M=e.history)||void 0===M?void 0:M.imgMeta)||[]),n_=(0,E._)((0,L.useState)(new Map),2),nT=n_[0];n_[1];var nI=(0,E._)((0,L.useState)((null===(D=e.history)||void 0===D?void 0:D.label)||null),2),nL=nI[0],nR=nI[1],nZ=(0,E._)((0,L.useState)((null===(O=e.history)||void 0===O?void 0:O.xiezuocat)||null),2),nM=nZ[0],nD=nZ[1],nO=(0,E._)((0,L.useState)((null===(N=e.history)||void 0===N?void 0:N.officialWebsite)||null),2),nN=nO[0],nP=nO[1],nF=(0,E._)((0,L.useState)((null===(P=e.history)||void 0===P?void 0:P.websiteFileId)||void 0),2),nH=nF[0];nF[1];var nG=(0,E._)((0,L.useState)((null===(F=e.history)||void 0===F?void 0:F.matchedPaper)||null),2),nW=nG[0],nB=nG[1],nq=(0,E._)((0,L.useState)((null===(H=e.history)||void 0===H?void 0:H.recommendedQuestions)||[]),2),nz=nq[0],nU=nq[1],nV=(0,E._)((0,L.useState)((null===(z=e.history)||void 0===z?void 0:z.answerLinkNumHighlights)||null),2),nK=nV[0],nQ=nV[1],nY=(0,E._)((0,L.useState)((null===(U=e.history)||void 0===U?void 0:U.panLinks)||[]),2),nJ=nY[0],nX=nY[1],n$=(0,E._)((0,L.useState)(!1),2),n0=n$[0],n1=n$[1],n2=nl.useBridge("progress",function(){}),n3=(0,E._)((0,L.useState)((null===(K=e.history)||void 0===K?void 0:null===(V=K.strongResearchAnswer)||void 0===V?void 0:V.subQuestions)||[]),2),n5=n3[0],n4=n3[1],n6=(0,E._)((0,L.useState)(e3||[]),2),n7=n6[0],n8=n6[1],n9=(0,L.useRef)(e3||[]),te=(0,E._)((0,L.useState)(e7||[]),2),tn=te[0],tt=te[1],tr=(0,L.useRef)(e7||[]),ti=(0,E._)((0,L.useState)((null==eK?void 0:null===(Q=eK.plan.texts.find(function(e){return"cot"===e.type}))||void 0===Q?void 0:Q.text)||""),2),ta=ti[0],to=ti[1],ts=(0,L.useRef)(""),tl=(0,E._)((0,L.useState)((null==eK?void 0:null===(X=eK.finalAnswer)||void 0===X?void 0:null===(J=X.texts.find(function(e){return"cot"===e.type}))||void 0===J?void 0:J.text)||(null==eJ?void 0:null===(et=eJ.finalAnswer)||void 0===et?void 0:null===(en=et.texts)||void 0===en?void 0:null===($=en.find(function(e){return"cot"===e.type}))||void 0===$?void 0:$.text)||(null===(eu=e.history)||void 0===eu?void 0:null===(ec=eu.normalAnswer)||void 0===ec?void 0:null===(es=ec.steps)||void 0===es?void 0:null===(eo=es[0])||void 0===eo?void 0:null===(ei=eo.texts)||void 0===ei?void 0:null===(er=ei.filter(function(e){return"cot"===e.type}))||void 0===er?void 0:er.map(function(e){return e.text}).join(""))||""),2),tc=tl[0],tu=tl[1],td=(0,L.useRef)((null==eK?void 0:null===(ef=eK.finalAnswer)||void 0===ef?void 0:null===(eh=ef.texts.find(function(e){return"cot"===e.type}))||void 0===eh?void 0:eh.text)||""),th=(0,E._)((0,L.useState)([]),2);th[0],th[1];var tf=(0,L.useMemo)(function(){var n,t,r=0;return null===(t=e.history)||void 0===t?void 0:null===(n=t.thinkResearchAnswer)||void 0===n?void 0:n.thinkSearchStepMetas.map(function(n){return n.questions.forEach(function(n){var t,i,a,o;n.answer=null===(o=e.history)||void 0===o?void 0:null===(a=o.thinkResearchAnswer)||void 0===a?void 0:null===(i=a.steps[r].texts)||void 0===i?void 0:null===(t=i.find(function(e){return"text"===e.type}))||void 0===t?void 0:t.text,r++}),n})},[null===(ep=e.history)||void 0===ep?void 0:ep.thinkResearchAnswer]),tp=(0,E._)((0,L.useState)(tf||[]),2),tv=tp[0],tm=tp[1],tg=(0,L.useCallback)(function(e,n){var t=new Map;return null==e||e.forEach(function(e){e.questions.forEach(function(e){t.set(e.id,e.links)})}),null==n?void 0:n.map(function(e){return t.has(e.parent.id)&&(e.parent.links=t.get(e.parent.id),e.parent.sourceCount=e.parent.links.length),t.has(e.child.id)&&(e.child.links=t.get(e.child.id),e.child.sourceCount=e.child.links.length),e})},[null===(ev=e.history)||void 0===ev?void 0:ev.thinkResearchAnswer]),tx=(0,E._)((0,L.useState)(tg(null===(eg=e.history)||void 0===eg?void 0:null===(em=eg.thinkResearchAnswer)||void 0===em?void 0:em.thinkSearchStepMetas,null===(eb=e.history)||void 0===eb?void 0:null===(ex=eb.thinkResearchAnswer)||void 0===ex?void 0:ex.connections)||[]),2),tb=tx[0],tw=tx[1],ty=(0,E._)((0,L.useState)((null===(ey=e.history)||void 0===ey?void 0:null===(ew=ey.thinkResearchAnswer)||void 0===ew?void 0:ew.consoleMessages)||[]),2),tC=ty[0],tS=ty[1],tj=(0,E._)((0,L.useState)((null===(ej=e.history)||void 0===ej?void 0:null===(eS=ej.thinkResearchAnswer)||void 0===eS?void 0:eS.usage)||{burn:0}),2),tk=tj[0],tE=tj[1];(0,L.useEffect)(function(){},[tb]);var t_=(0,L.useRef)(""),tT=(0,L.useRef)(!1),tI=(0,L.useRef)(0),tL=(0,L.useRef)("text"),tR=(0,E._)((0,L.useState)("text"),2),tZ=tR[0],tM=tR[1],tD=(0,L.useRef)(0),tA=(0,E._)((0,L.useState)(e.history?3:0),2),tO=tA[0],tN=tA[1],tP=(0,E._)((0,L.useState)(!!e.history),2),tF=tP[0],tH=tP[1],tG=(0,L.useRef)(null),tW=(0,E._)((0,L.useState)(!1),2),tB=tW[0],tq=tW[1],tz=(0,L.useRef)(null),tU=(0,E._)((0,L.useState)((null===(ek=e.history)||void 0===ek?void 0:ek.aborted)||!1),2),tV=tU[0],tK=tU[1],tQ=(0,L.useRef)((null===(eE=e.history)||void 0===eE?void 0:eE.id)||""),tY=(0,L.useRef)(null),tJ=(0,L.useRef)(null),tX=(0,E._)((0,L.useState)(!1),2);tX[0],tX[1];var t$=(0,e5.W)(),t0=(0,E._)((0,L.useState)(function(){var n,t,r;return t=null===(n=e.history)||void 0===n?void 0:n.htmlReportTargetType,r=t$.get("defaultHtmlTargetType"),null==t?r:t}),2),t1=t0[0],t2=t0[1],t3=(0,E._)((0,L.useState)(function(){var n,t,r;return t=null===(n=e.history)||void 0===n?void 0:n.clawerHtmlReportTargetType,r=t$.get("defaultHtmlTargetType"),null==t?r:t}),2),t5=t3[0],t4=t3[1],t6=(0,E._)((0,nt.Z)(),2),t7=t6[0],t8=t6[1],t9=t8.set,re=t8.reset;(0,L.useEffect)(function(){var n=e.history;if(!n||!n.htmlReports){re();return}var t=n.htmlReports.map(function(e){return["".concat(e.targetType,"_").concat(e.type),e]});re(),t.forEach(function(e){var n=(0,E._)(e,2);t9(n[0],n[1])})},[history]);var rn=(0,nr.Z)(function(e,n){var t,r,i="".concat(e,"_").concat(n);return null!==(r=null===(t=t7.get(i))||void 0===t?void 0:t.id)&&void 0!==r?r:null}),rt=(0,L.useCallback)(function(e){return t2(e),rn(e,B._B.SearchResult)},[rn]),rr=(0,L.useCallback)(function(e){return t4(e),rn(e,B._B.ClawerWeb)},[rn]),ri=(0,L.useMemo)(function(){return tF?ta+(n7?n7.map(function(e,n){return tn[n]+e}).join(""):"")+tc+nf:""},[ta,n7,tn,tc,nf,tF]),ra=(0,L.useMemo)(function(){return tF&&nK&&0!=nK.length?nm(ri,nj,nK).highlights:[]},[tF]),ro=(0,L.useMemo)(function(){var n={thinking:{highlight:[],startIndex:0},multiReasoning:[],finalThinking:{highlight:[],startIndex:0},result:{highlight:[],startIndex:0}};if(!tF||"strong-research"!==e.mode||!nK)return n;var t=0,r=nm(ta,nj,nK);if(n.thinking.highlight=r.highlights,t=r.endIndex,n7&&n7.forEach(function(e,r){var i={cot:{highlight:[],startIndex:0},text:{highlight:[],startIndex:0}};if(tn[r]){var a=nm(tn[r],nj,nK.slice(t));i.cot.highlight=a.highlights,i.cot.startIndex=t,t+=a.endIndex}if(e){var o=nm(e,nj,nK.slice(t));i.text.highlight=o.highlights,i.text.startIndex=t,t+=o.endIndex}n.multiReasoning.push(i)}),tc){var i=nm(tc,nj,nK.slice(t));n.finalThinking.highlight=i.highlights,n.finalThinking.startIndex=t,t+=i.endIndex}if(nf){var a=nm(nf,nj,nK.slice(t));n.result.highlight=a.highlights,n.result.startIndex=t}return n},[tF,n7,ta]);(0,L.useEffect)(function(){if(!e.needNotChangeDocumentTitleByQuery)return e.question?document.title="".concat(e.question,"-秘塔AI搜索"):document.title="秘塔AI搜索",function(){document.title="秘塔AI搜索"}},[e.question,e.needNotChangeDocumentTitleByQuery]),(0,L.useEffect)(function(){return function(){(0,W.Ev)(tY.current),(0,W.Ev)(tJ.current)}},[]);var rs=(0,L.useRef)(0),rl=(0,L.useRef)(0),rc=(0,L.useRef)(0),ru=(0,eO.WS)(),rd=(0,E._)((0,L.useState)(e.mode),2),rh=rd[0],rf=rd[1],rp=(0,L.useRef)(""),rv=(0,E._)((0,L.useState)((null===(eI=e.history)||void 0===eI?void 0:eI.resultId)||""),2),rm=rv[0],rg=rv[1],rx=(0,E._)((0,L.useState)((null===(eL=e.history)||void 0===eL?void 0:eL.id)||""),2),rb=rx[0];rx[1];var rw=(0,E._)((0,L.useState)([]),2),ry=rw[0];rw[1];var rC=(0,E._)((0,L.useState)(!1),2),rS=rC[0],rj=rC[1],rk=(0,L.useRef)({}),rE=nl.useBridge("resultAPI"),r_=(0,L.useRef)(null),rT=(0,L.useRef)(null),rI=(0,L.useRef)(null),rL=(0,L.useRef)(null),rR=(0,L.useRef)(null),rZ=(0,L.useRef)(null),rM=(0,L.useRef)(null),rD=(0,L.useRef)([]),rA=(0,E._)((0,L.useState)(!1),2),rO=rA[0],rN=rA[1],rP=(0,Y.F)(),rF=(0,L.useRef)(""),rH=nl.useBridge("menuAPI"),rG=(0,E._)((0,L.useState)(e.history&&(e.history.debugId||e.history.resultId)),2),rW=rG[0];rG[1];var rB=(0,E._)((0,L.useState)(!0),2),rq=rB[0],rz=rB[1],rU=(0,E._)((0,L.useState)("ds-r1"===e.model||e.history&&"ds-r1"===e.history.model),2),rV=rU[0];rU[1];var rK=(0,E._)((0,L.useState)(!0),2),rQ=rK[0],rY=rK[1],rJ=(0,E._)((0,L.useState)(!e.isLast),2),rX=rJ[0],r$=rJ[1],r0=(0,L.useRef)(!1),r1=(0,E._)((0,L.useState)(e.isLast),2),r2=r1[0],r3=r1[1],r5=(0,E._)((0,L.useState)(null===(eP=e.history)||void 0===eP?void 0:eP.notFound),2),r4=r5[0],r6=r5[1],r7=(0,E._)((0,L.useState)(!e.history),2),r8=r7[0],r9=r7[1],ie=(0,L.useRef)(!1),it=(0,E._)((0,L.useState)(!1),2),ir=it[0],ii=it[1],ia=(0,E._)((0,L.useState)("回答"),2),io=ia[0],is=ia[1],il=(0,E._)((0,L.useState)((null===(eF=e.history)||void 0===eF?void 0:eF.realTimeData)||null),2),ic=il[0],iu=il[1],id=(0,E._)((0,L.useState)((null===(eH=e.history)||void 0===eH?void 0:eH.htmlGenerable)||{clawer:!1,result:!1}),2),ih=id[0],ip=id[1],iv=(0,eM.A8)().cmdList,im=(i=(r={apiRef:n,setCollapse:r$,collapse:rX,props:e,initialScroll:!!r2&&0!==e.index&&!rX,isH5:rP,scrollDelay:400,beforeScroll:function(){return!iv.find(function(e){return e.type===eZ.a.ExportReport})}}).apiRef,a=r.setCollapse,o=r.collapse,s=r.props,l=r.initialScroll,c=r.scrollDelay,u=r.isH5,d=r.beforeScroll,h=(0,L.useRef)(null),f=(0,L.useRef)(!1),(0,L.useImperativeHandle)(i,function(){return{collapse:function(){(0,L.startTransition)(function(){a(!0)})}}}),p=(0,L.useRef)(!0),(0,L.useEffect)(function(){setTimeout(function(){return p.current=!1},500)},[]),v=(0,L.useCallback)(function(){var e,n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;eT.Z.scroll(h.current,{positioning:{top:u?nA:0},delay:n,duration:function(n){return eC()(n,200,e)},onFinished:function(){var e,n;null==h||null===(e=h.current)||void 0===e||e.focus(),null===(n=s.onExpand)||void 0===n||n.call(s),f.current=!0}})};0!==s.index&&(u?s.onTitleClick(s.question,s.mode):s.onMouseEnter()),(!d||d())&&(null===(e=s.onAppendStart)||void 0===e||e.call(s),p.current?n(800,800):n(500,c))},[d,u,s]),(0,Y.fl)(),(0,L.useEffect)(function(){l&&v()},[]),(0,Y.gU)(function(){if(!o){v();return}f.current=!1},[o]),(0,L.useEffect)(function(){if(f.current&&s.showMind&&s.engineType!==B.rG.WORKFLOW){var e=h.current;setTimeout(function(){null==e||e.scrollIntoView({block:"start",behavior:"smooth"})},100)}},[s.showMind]),{containerRef:h}).containerRef,ig=(0,E._)((0,L.useState)(!1),2),ix=ig[0],ib=ig[1];(0,L.useEffect)(function(){rX||ib(!0)},[rX]);var iw=(0,L.useMemo)(function(){return!!nf.length||!!tc.length},[nf,tc]),iy=(0,L.useMemo)(function(){return nj?nj.filter(function(e){return!e.danger}):[]},[nj]),iC=(0,L.useMemo)(function(){return!!nL&&nL.indexOf("Clawer")>=0},[nL]),iS=nl.useBridge("searchBox");(0,L.useEffect)(function(){if(e.engineType!==B.rG.IMAGE&&nL===B.Qo.ImageSearch&&!e.imgId){var n;null===(n=iS.current)||void 0===n||n.updateEngineType(B.rG.IMAGE)}},[nL,e.engineType,e.imgId]),(0,L.useEffect)(function(){if(e.imgInfo&&e.imgInfo.thumbnailUrl||e.imgId){var n;null===(n=iS.current)||void 0===n||n.updateEngineType(B.rG.DEFAULT)}},[e.imgInfo,e.imgId]),(0,L.useEffect)(function(){if(ic)nf||ic.needSearch||(ny.current="",(0,L.startTransition)(function(){is("查询"),rY(!0)}));else{var n="";n=!e.engineType&&ea.a2.getState().isTraditionalSearchEngineModeActive?"AI":iC?"阅读":e.engineType?e.searchTopicName||e.engineType===B.rG.KNOWLEDGE?"回答":nv[e.engineType]:"回答",(0,L.startTransition)(function(){is(n)})}},[iC,e.engineType,ic,nf]),(0,L.useEffect)(function(){!rP&&rX&&r9(!1)},[rX]),(0,L.useEffect)(function(){(0,L.startTransition)(function(){r3(e.isLast)}),e.activeResultId&&r0.current?(0,L.startTransition)(function(){r$(e.activeResultId!=tQ.current)}):!r0.current&&(r0.current=!0,e.isLast&&(0,L.startTransition)(function(){r$(!1)}))},[e.activeResultId,e.isLast]),(0,L.useEffect)(function(){e.isLast},[ir,e.isLast,rQ,rm]),(0,L.useEffect)(function(){r4&&e.engineType===B.rG.PODCAST&&(0,G.m3j)().then(function(e){0===e.data.errCode?(0,L.startTransition)(function(){nk(e.data.data.slice(0,5))}):(0,q.y)("获取推荐播客列表失败",{variant:"error",autoHideDuration:3e3})})},[r4,e.engineType]);var ij=(0,L.useMemo)(function(){return{resultExist:rQ,label:nL,noData:r4,isLast:r2,collapse:rX,engineType:e.engineType}},[rQ,nL,r4,r2,rX,e.engineType]),ik=(0,Y.fl)(),iE=nl.useBridge("modelTip");(0,L.useEffect)(function(){if(ik.current&&0===e.index&&(!ij||ij.engineType!==B.rG.WEBPAGE)&&ij.label!==B.Qo.ImageSearch){var n;null===(n=iE.current)||void 0===n||n.show()}},[ij,e.index]),(0,L.useEffect)(function(){var e;null===(e=rE.current)||void 0===e||e.updateNoData(r4)},[r4]);var i_={concise:rP?.5:1,research:rP?.02:.04,detail:rP?.15:.25,"strong-research":rP?.02:.04},iT=(0,ee.LM)(function(e){return e.userInfo}),iI=(0,L.useMemo)(function(){return iT?e.owner!==iT.uid:"guest"!==e.owner},[e.owner,iT]),iL=nc.useBridge("LinkBoxAPI"),iR=(0,L.useRef)({});rk.current.stop=function(){var e,n;null===(n=iR.current)||void 0===n||null===(e=n.stop)||void 0===e||e.call(n)};var iZ={commonEventListener:function(e,n){var t,r;null===(r=rk.current)||void 0===r||null===(t=r.commonEventListener)||void 0===t||t.call(r,e,n)},begin:function(){rk.current.begin&&rk.current.begin()},receive:function(e){rk.current.receive&&rk.current.receive(e)},down:function(n,t){rk.current.down&&rk.current.down();var r,i=(null===(r=iR.current)||void 0===r?void 0:r.startTime)?new Date().getTime()-iR.current.startTime.getTime():0,a={sessionId:e.id,question:e.question,searchType:e.searchType,client:(0,el.Fk)(),spendTime:i,source:"down"};Object.assign(a,{spendTime:i}),i>2e4&&Object.assign(a,{spendTimeTooLong:!0}),(0,W.dW)(W.Gy.SEARCH_FINISH_FRONTPAGE_SPEND_TIME,a),W.oG.remove(),setTimeout(function(){var e;null===(e=iL.current)||void 0===e||e.refresh()},500)},error:function(e){if(!rk.current.aborting){if(rk.current.stop(),e&&e.code===eA.cO.TOO_MANY_REQUESTS2){rk.current.verifyByCloudflare&&rk.current.verifyByCloudflare();return}if(e&&e.code===eA.cO.TOO_MANY_REQUESTS){rk.current.verify&&rk.current.verify();return}rk.current.error&&rk.current.error(e)}},checkCancel:function(){return!1},beforeSkip:function(e,n){var t;null===(t=rk.current)||void 0===t||t.beforeSkip(e,n)}},iM=(0,E._)((0,ni.Z)(rb,{defaultValue:!1}),2),iD=iM[0],iA=iM[1],iO=(0,E._)((0,L.useState)(!1),2),iN=iO[0],iP=iO[1],iF=(0,nr.Z)(function(){(0,L.startTransition)(function(){iA(!1),iP(!0),tw([]),tm([]),tS([]),tE({burn:0})})}),iH=(0,L.useMemo)(function(){return tF&&iI&&!iD},[tF,iI,iD]),iG=(0,L.useMemo)(function(){return iI},[iI]),iW=(0,nr.Z)((0,y._)(function(){var e,n;return(0,T.Jh)(this,function(t){return iD||(null===(n=iR.current)||void 0===n||null===(e=n.stop)||void 0===e||e.call(n),tH(!1),iF(),iR.current=(0,no.F)("api/search/".concat(rb,"/stream-replay"),{},iZ,!1)),[2]})})),iB=(m=(0,y._)(function(n,t,r){return(0,T.Jh)(this,function(i){return iR.current=(0,ne.b2)(t?r:e.id,n,iZ,function(e){iR.current=e}),[2]})}),function(e,n,t){return m.apply(this,arguments)});(0,na.Z)("keyup",function(e){"Escape"!==e.code||tF||i3()});var iq=(0,L.useCallback)(function(){var n=ee.LM.getState(),t=n.login,r=n.userInfo;(0,L.startTransition)(function(){"guest"===e.owner||t&&(null==r?void 0:r.uid)===e.owner?ii(!0):(rY(!1),ii(!1))})},[e.owner]);(0,L.useEffect)(function(){return iq(),ee.LM.subscribe(function(){iq()})},[iq]),rk.current.begin=function(){rj(!1),rk.current&&(rk.current.startTime=new Date,rk.current.textReturned=!1)},rk.current.beforeSkip=(0,nr.Z)(function(e,n){"generated"===n.type&&i2(n,rk)}),rk.current.receive=function(n){try{(0,L.startTransition)(function(){i2(n,rk)})}catch(t){throw(0,W.dW)("search-net-work-error",{data:n,error:t?t.stack?t.stack.toString():t.message:"error null"},{mode:e.mode,model:e.model,deepResearchModel:e.deepResearchModel,sessionId:e.id,question:e.question,searchType:e.searchType,client:(0,el.Fk)(),source:"receive_handle_error",resultId:rm}),t}},rk.current.down=function(){try{var n,t;eq(),null===(t=iR.current)||void 0===t||null===(n=t.stop)||void 0===n||n.call(t)}catch(n){throw(0,W.dW)("search-net-work-error",n?n.stack?n.stack.toString():n.message:"error null",{mode:e.mode,model:e.model,sessionId:e.id,question:e.question,searchType:e.searchType,client:(0,el.Fk)(),source:"down_handle_error",resultId:rm}),n}};var iz=(0,ee.LM)(),iU=(iz.model,iz.setModel);rk.current.error=function(n){if(!rk.current.aborting){if(n&&n.message===Z.ze.CANCEL);else if(n&&n.code===eA.cO.SENSITIVE_WORD)(0,q.y)("本次请求涉及的领域暂不支持",{variant:"warning",autoHideDuration:3e3,keep:!0}),(0,W.mh)(ru);else{(0,W.Eu)()||(0,q.y)("网络错误",{variant:"error",autoHideDuration:3e3,keep:!0});var t="";t=n?n.stack?n.stack.toString():n.message?n.message:JSON.stringify(n):"error null",(0,W.dW)("search-net-work-error",t,{mode:e.mode,model:e.model,sessionId:e.id,question:e.question,searchType:e.searchType,client:(0,el.Fk)(),source:"instance.error",resultId:rm}),rF.current&&eq(),iU("")}}},rk.current.verifyByCloudflare=function(){if(!(0,G.RGK)()){ru.push(eD.l.Home);return}var n=0,t=setInterval(function(){n+=1,"true"===localStorage.getItem("cloudflareVerifySuccess")&&(iQ(e.mode),(0,W.Ev)(t)),n>=300&&(0,W.Ev)(t)},1e3)};var iV=(0,L.useRef)(null);rk.current.verify=function(){var n=ee.LM.getState();n.updateVerify({val:!0,params:{isRequestFrequently:!0}}),(0,e_.Z)(function(){n.updateVerify((0,j._)((0,S._)({},n.verify),{val:!1,isRequestFrequently:!1})),iV.current(e.mode)},function(){})};var iK=(0,E._)((0,e5.L)("showImageCategory"),1)[0],iQ=(0,L.useCallback)(function(n,t,r){r?rk.current.scholarSearchDomain=r:rk.current.scholarSearchDomain=e.languageDomain;var i=ee.LM.getState().login,a=ea.a2.getState().canSearch;if(!i&&!e.noCredit&&!a(1,e.advanceMath)){var o,s,l,c,u=new URL(location.href);u.searchParams.set("aq",e.question),sessionStorage.setItem("after-copy-show-sessionId",e.id),(0,ed.x3)({showTips:!0,redirectUrl:u.href,logDesc:"do-search-but-not-available"}),eq(!0),null===(c=rE.current)||void 0===c||c.deleteItem(e.index);return}null===(o=i6.current)||void 0===o||o.setLoadingTime(0);var d=0;tJ.current=setInterval(function(){var e;null===(e=i6.current)||void 0===e||e.setLoadingTime(++d)},500),null===(s=rE.current)||void 0===s||s.updateLoading(!0),ny.current="",rp.current="",(0,L.startTransition)(function(){ng(""),tH(!1)}),setTimeout(function(){var e;null===(e=tG.current)||void 0===e||e.setStartLoading(!0)},10),rl.current=rP?15:0,rs.current=0,tY.current=setInterval(function(){var e,n,t=rP?45:31;rs.current+=1,rs.current<=10?null===(e=n2.current)||void 0===e||e.onProgress({step:1,totalProgress:0,currentStepProgress:10*rs.current}):(rl.current+=rl.current<t-3?.6:(t-rl.current)/10,null===(n=n2.current)||void 0===n||n.onProgress({step:2,totalProgress:rl.current,currentStepProgress:rl.current})),rl.current>=t&&((0,W.Ev)(tY.current),tY.current=null)},50),null===(l=i6.current)||void 0===l||l.setShowProgress(!0),rp.current="",ny.current="";var h=(0,e6.WR)(e.id),f=e.id,p={sessionId:h?(0,e6.uz)(e.id):e.id,question:e.question,searchType:e.searchType,engineType:e.engineType,lang:eR.ZP.outputLang.get(),mode:(0,G.rkk)(n,rP),resultId:t,enableMix:!0,scholarSearchDomain:rk.current.scholarSearchDomain,debug:location.href.indexOf("debug")>-1,expectedCurrentSessionSearchCount:e.index?e.index+1:1,newEngine:!0,enableImage:!0,topicId:e.topicId,advanceMath:e.advanceMath||"题目"===e.imgCategory&&"深度推理"===e.question,imgId:e.imgId,enableImageGroup:e1.ZP.load("showImageCategory"),model:e.model,deepResearchModel:e.deepResearchModel};if(h){var v=(0,e6.rP)(e.id);(null==v?void 0:v.variable)&&(v.variableJson=JSON.stringify(v.variable),delete v.variable),p=Object.assign(p,v)}rk.current.scholarSearchDomain=p.scholarSearchDomain,iB(p,h,f),p.isContinueSearch=e.index>0,p.engineType=e.engineType,e.index>0&&(0,W.dW)("search-create-session",{query:p.question,s:new URLSearchParams(location.search).get("s")||localStorage.getItem("s")||e1.ZP.load("s"),mode:p.mode,engineType:p.engineType,sessionId:e.id,imgId:p.imgId||void 0,searchTopic:p.searchTopicId,advanceMath:!!p.advanceMath,client:(0,el.Fk)(),model:p.model,deepResearchModel:p.deepResearchModel}),(0,W.dW)("search-event",p),(0,W.oh)("search-event"),(0,G.jgw)(p)},[e.id,e.question,rh,rP,nf,e.topicId,iK,e.model]),iY=(0,E._)((0,Y.W6)(function(){if(e.history){var n;null===(n=rE.current)||void 0===n||n.updateLoading(!1),"concise"!==e.mode&&e.engineType!==B.rG.PODCAST&&e.engineType!==B.rG.PDF&&e.engineType!==B.rG.WORKFLOW&&nj.length>=4&&eB(rm)}else iQ(e.mode);return function(){var e,n;(0,W.Ev)(tY.current),(0,W.Ev)(tJ.current),(0,W.Ev)(rM.current),null===(n=iR.current)||void 0===n||null===(e=n.cancel)||void 0===e||e.call(n)}},[rE,eB,iQ,nj.length,e.engineType,e.history,e.mode,rm]),1)[0];(0,L.useEffect)(function(){return eN.wS.done.then(iY.current),function(){var e;null===(e=rk.current)||void 0===e||e.stop()}},[]),(0,L.useEffect)(function(){iV.current=iQ},[iQ]);var iJ=function(n){var t=rP?45:33;if(i$.current)null===(i=n2.current)||void 0===i||i.updateStepTips(1,"阅读网页");else if(rP||rl.current<66.66&&n.length>0){if(n.length>0&&!i$.current){var r,i,a,o=rP?12:e.noMind?(im.current.clientWidth-200)/40:12;null===(a=n2.current)||void 0===a||a.updateStepTips(1,"#"+(0,W.IA)(n[Math.floor(rs.current/5)%n.length],o))}rs.current+=1}null===(r=n2.current)||void 0===r||r.onProgress({step:Math.ceil(rl.current/t)+1,totalProgress:rl.current,currentStepProgress:rl.current}),rl.current<=(rP?80:96)&&(rl.current<(rP?75:90)?rl.current+=rl.current>(rP?60:66.66)?i_[e.mode]:2:rl.current+=((rP?80:96)-rl.current)/100)},iX=function(n){var t,r,i,a=rP?50:33;if(i$.current)null===(o=n2.current)||void 0===o||o.updateStepTips(1,"阅读网页");else if((rP&&rl.current<=50||rl.current<43&&n.length>0)&&!rp.current){var o,s,l=rP?12:e.noMind?(im.current.clientWidth-200)/40:12;null===(s=n2.current)||void 0===s||s.updateStepTips(1,"#"+(0,W.IA)(n[Math.floor(rs.current/5)%n.length],l),rP),rs.current+=1}rP&&rc.current<100&&!rp.current?(rc.current+=3,null===(t=n2.current)||void 0===t||t.onProgress({step:2,totalProgress:49,currentStepProgress:rc.current})):((rP||rp.current)&&(null===(i=n2.current)||void 0===i||i.updateStepTips(1,rP?"初步研究":i$.current?"阅读网页":e.engineType?np[e.engineType]:"全网搜索",!1)),rl.current<=(rP?80:66)&&(rl.current<(rP?75:60)?rl.current+=rl.current>(rP?60:45)?.5:1.5:rl.current+=((rP?80:66)-rl.current)/100),null===(r=n2.current)||void 0===r||r.onProgress({step:Math.ceil(rl.current/a)+1,totalProgress:rl.current,currentStepProgress:rl.current}))},i$=(0,L.useRef)(!1);(0,L.useEffect)(function(){i$.current=iC},[iC]);var i0=nl.useBridge("sessionApi"),i1=(0,L.useRef)(null);null==i1.current&&(i1.current=new Map);var i2=(0,nr.Z)(function(n,t){var r,i,a,o,s,l,c,u=ee.LM.getState(),d=u.login,h=(u.userInfo,u.extensionReadingEnable,u.isShareMath),f=u.productType;if("session-created"===n.type){var p=n.data;(0,e6.Jc)(e.id,p.id),iR.current.mergeParams({sessionId:p.id,expectedCurrentSessionSearchCount:1}),i0.current.sessionCreated(p)}else if("generated"===n.type){var v,m,g,x,b,w,y,C,k,E,T=n.result;if("strong-research"===T.mode){T.strongResearchAnswer.steps=(0,eY.h0)(T.strongResearchAnswer.steps);var L,R,Z,M,D,O,N,P,F,H,z,U,V={finalAnswer:T.strongResearchAnswer.steps.find(function(e){return"final_answer"===e.name}),subQuestions:T.strongResearchAnswer.steps.filter(function(e){return"sub_question"===e.name}),plan:T.strongResearchAnswer.steps.find(function(e){return"plan"===e.name})};rp.current=null==V?void 0:null===(L=V.finalAnswer.texts.find(function(e){return"text"===e.type}))||void 0===L?void 0:L.text,ng(null==V?void 0:null===(R=V.finalAnswer.texts.find(function(e){return"text"===e.type}))||void 0===R?void 0:R.text);var K=Array.from({length:(null===(M=T.strongResearchAnswer)||void 0===M?void 0:null===(Z=M.subQuestions)||void 0===Z?void 0:Z.length)||0},function(){return""});null==V||null===(D=V.subQuestions)||void 0===D||D.forEach(function(e){var n;K[parseInt(e.extra.index)]=null===(n=e.texts.find(function(e){return"text"===e.type}))||void 0===n?void 0:n.text}),n8(K),n4(null===(O=T.strongResearchAnswer)||void 0===O?void 0:O.subQuestions);var Q=Array.from({length:(null===(P=T.strongResearchAnswer)||void 0===P?void 0:null===(N=P.subQuestions)||void 0===N?void 0:N.length)||0},function(){return""});null==V||null===(F=V.subQuestions)||void 0===F||F.forEach(function(e){var n;Q[parseInt(e.extra.index)]=null===(n=e.texts.find(function(e){return"cot"===e.type}))||void 0===n?void 0:n.text}),tt(Q),tu((null==V?void 0:null===(z=V.finalAnswer)||void 0===z?void 0:null===(H=z.texts.find(function(e){return"cot"===e.type}))||void 0===H?void 0:H.text)||""),to((null==V?void 0:null===(U=V.plan.texts.find(function(e){return"cot"===e.type}))||void 0===U?void 0:U.text)||""),nk(T.references)}else if("think-research"===T.mode){T.thinkResearchAnswer.steps=(0,eY.h0)(T.thinkResearchAnswer.steps);var Y,J,X,$,en,et,er,ei,eo,es,ec,eu=0;tm((null===(Y=T.thinkResearchAnswer)||void 0===Y?void 0:Y.thinkSearchStepMetas.map(function(n){return n.questions.forEach(function(n){var t,r,i,a;n.answer=null===(a=e.history)||void 0===a?void 0:null===(i=a.thinkResearchAnswer)||void 0===i?void 0:null===(r=i.steps[eu].texts)||void 0===r?void 0:null===(t=r.find(function(e){return"text"===e.type}))||void 0===t?void 0:t.text,eu++}),n}))||[]);var eh=null===(J=T.thinkResearchAnswer)||void 0===J?void 0:J.steps.find(function(e){return"deep_think_final_answer"===e.name});tu((null==eh?void 0:null===($=eh.texts)||void 0===$?void 0:null===(X=$.find(function(e){return"cot"===e.type}))||void 0===X?void 0:X.text)||""),rp.current=(null==eh?void 0:null===(et=eh.texts)||void 0===et?void 0:null===(en=et.find(function(e){return"text"===e.type}))||void 0===en?void 0:en.text)||"",tw(tg(null===(er=T.thinkResearchAnswer)||void 0===er?void 0:er.thinkSearchStepMetas,null===(ei=T.thinkResearchAnswer)||void 0===ei?void 0:ei.connections)||[]),tS((null===(eo=T.thinkResearchAnswer)||void 0===eo?void 0:eo.consoleMessages)||[]),nk((null===(ec=T.thinkResearchAnswer)||void 0===ec?void 0:null===(es=ec.steps)||void 0===es?void 0:es.filter(function(e){return e.extra}).flatMap(function(e){return e.extra.links||[]}))||[]),ng(rp.current)}else T.normalAnswer&&(T.normalAnswer.steps=(0,eY.h0)(T.normalAnswer.steps),rp.current=(null===(b=T.normalAnswer)||void 0===b?void 0:null===(x=b.steps)||void 0===x?void 0:null===(g=x[0])||void 0===g?void 0:null===(m=g.texts)||void 0===m?void 0:null===(v=m.filter(function(e){return"text"===e.type}))||void 0===v?void 0:v.map(function(e){return e.text}).join(""))||"",tu((null===(E=T.normalAnswer)||void 0===E?void 0:null===(k=E.steps)||void 0===k?void 0:null===(C=k[0])||void 0===C?void 0:null===(y=C.texts)||void 0===y?void 0:null===(w=y.filter(function(e){return"cot"===e.type}))||void 0===w?void 0:w.map(function(e){return e.text}).join(""))||""),ng(rp.current)),nk(T.references);rg(T.resultId),rF.current=T.resultId,T.realQuestion&&nd(T.realQuestion),T.label&&nR(T.label),T.xiezuocat&&nD(T.xiezuocat),T.imgMeta&&(nE.current=T.imgMeta),rY(!0),T.references&&e.engineType!==B.rG.PODCAST&&e.engineType!==B.rG.PDF&&e.engineType!==B.rG.WORKFLOW&&T.references.length>=4&&eB(T.resultId)}else if("query"===n.type){if(!d&&!ie.current){ie.current=!0;var ef=n.id,ep=eQ.Z.countAddedResultIdList.get();if("string"==typeof ef){if(ep.includes(ef))return;ep.push(ef),eQ.Z.countAddedResultIdList.set(ep)}ea.a2.getState().addResultCount(e.id,1,e.advanceMath,e.noCredit)}rl.current=rP?65:33.34,tY.current&&((0,W.Ev)(tY.current),tY.current=null,rs.current=0);var ev=n.data;rD.current=ev,rs.current=0,tY.current=setInterval(function(){"research"===e.mode?iX(ev):iJ(ev)},100),n.id&&(tQ.current=n.id),n.debugId&&"think-research"==e.mode&&(rg(n.debugId),rY(!0),rF.current=n.debugId),n.list&&nk(n.list),n.realQuestion&&eV(n.id),nR(n.label),nD(n.xiezuocat)}else if("set-reference"===n.type){if(n.resultId&&("think-research"!==e.mode||tT.current)&&(rg(n.resultId),rY(!0),rF.current=n.resultId),n.question&&(null===(ew=rE.current)||void 0===ew||ew.updateQuestion(n.question),null===(ey=rH.current)||void 0===ey||ey.reload()),n.originReferNums&&"strong-research"===e.mode){var em=n.originReferNums,eg=0;to(ts.current.split(/(\[\[\d+]])/).map(function(e){var n=e.match(/\[\[(\d+)]]/);return n?e.replace(n[1],em[eg++].toString()):e}).join("")),n9.current.forEach(function(e,n){var t=tr.current[n];t&&(t=t.split(/(\[\[\d+]])/).map(function(e){var n=e.match(/\[\[(\d+)]]/);return n?e.replace(n[1],em[eg++].toString()):e}).join(""),tr.current[n]=t);var r=n9.current[n].split(/(\[\[\d+]])/).map(function(e){var n=e.match(/\[\[(\d+)]]/);return n?e.replace(n[1],em[eg++].toString()):e}).join("");n9.current[n]=r}),tt((0,_._)(tr.current)),n8((0,_._)(n9.current)),tu(td.current.split(/(\[\[\d+]])/).map(function(e){var n=e.match(/\[\[(\d+)]]/);return n?e.replace(n[1],em[eg++].toString()):e}).join(""));var ex=rp.current.split(/(\[\[\d+]])/).map(function(e){var n=e.match(/\[\[(\d+)]]/);return n?e.replace(n[1],em[eg++].toString()):e}).join("");ny.current=ex,rp.current=ex,ng(ex)}n.list&&(nk(n.list),"detail"===e.mode&&e.engineType!==B.rG.PODCAST&&e.engineType!==B.rG.PDF&&e.engineType!==B.rG.WORKFLOW&&n.list.length>=4&&eB(n.resultId)),t.current&&t.current.startTime&&(0,W.dW)(W.Gy.SEARCH_RETURN_LINK_SPEND_TIME,{spendTime:iR.current.firstLinkSpendTime,sessionId:e.id,question:e.question,searchType:e.searchType,client:(0,el.Fk)()})}else if("set-deep-think-reference"===n.type){if("think-research"===e.mode){if(tT.current)nk(n.list);else{var eb=n.list.filter(function(e){return!e.danger}).length;tm(function(e){return e.map(function(t,r){return r!==e.length-1?t:(0,j._)((0,S._)({},t),{questions:t.questions.map(function(e,r){return r!==t.questions.length-1?e:(0,j._)((0,S._)({},e),{links:n.list})})})})}),nk(function(e){return(0,_._)(e).concat((0,_._)(n.list))}),tw(function(e){return e.map(function(e){var t,r,i=e.parent;return(i.sourceCount||(i=(0,j._)((0,S._)({},i),{sourceCount:(null===(t=i1.current)||void 0===t?void 0:t.get(e.parent.id))||0})),e.child.id===t_.current)?(null===(r=i1.current)||void 0===r||r.set(e.child.id,eb),{id:e.id,relation:e.relation,parent:i,child:(0,j._)((0,S._)({},e.child),{sourceCount:eb,links:n.list.filter(function(e){return!e.danger})})}):e})})}}}else if("img-meta"===n.type)nE.current=n.list;else if("generate-table"===n.type)ar({generateTableHeaders:n.value});else if("question-start"===n.type)t_.current=n.id,tm(function(e){var t=(0,_._)(e);return t[t.length-1].questions.push({title:n.question,id:n.id,answer:"",links:[]}),t});else if("question-connection"===n.type)tw(function(e){return(0,_._)(e).concat([n.data])});else if("heartbeat"===n.type)iP(!0);else if("think-console-message"===n.type)tS(function(e){return(0,_._)(e).concat([n.data])});else if("question-disconnection"===n.type)tw(function(e){var t=e.find(function(e){return e.id===n.data.id});if(t){var r=e.indexOf(t);e.splice(r,1)}return(0,_._)(e)});else if("question-connection-update"===n.type)tw(function(e){var t=e.find(function(e){return e.id===n.data.id});return t&&(t.child=(0,j._)((0,S._)({},t.child),{status:n.data.child.status,desc:n.data.child.desc,title:n.data.child.title,writing:n.data.child.writing,video:n.data.child.video}),t.parent=(0,j._)((0,S._)({},t.parent),{status:n.data.parent.status,desc:n.data.parent.desc,title:n.data.parent.title,writing:n.data.parent.writing,video:n.data.parent.video}),t.relation=n.data.relation),(0,_._)(e)});else if("deep-think-step-usage"===n.type)tE(n.data);else if("update-reference"===n.type){var ew,ey,eC,eS,ej=rP?50:33;rP&&(null===(eS=n2.current)||void 0===eS||eS.updateStepTips(2,"深度研究",!0)),rc.current=0,rP?rl.current<88&&(rl.current=88):rl.current<=66.66&&(rl.current=66.66),null===(eC=n2.current)||void 0===eC||eC.onProgress({step:Math.ceil(rl.current/ej)+1,totalProgress:rl.current,currentStepProgress:rc.current}),n.list&&(nk(n.list),n.list.length>=4&&e.engineType!==B.rG.PDF&&e.engineType!==B.rG.WORKFLOW&&eB(rF.current)),(0,W.Ev)(tY.current),tY.current=setInterval(function(){var n;rP?rc.current<90?rc.current+=.15:rc.current+=(100-rc.current)/100:rl.current<=96&&(rl.current<90?rl.current+=rl.current>80?i_[e.mode]:.2:rl.current+=((rP?80:96)-rl.current)/100),null===(n=n2.current)||void 0===n||n.onProgress({step:Math.ceil(rl.current/ej)+1,totalProgress:rl.current,currentStepProgress:rc.current})},50)}else if("fixed-content"===n.type)ny.current=n.content,rp.current=n.content,ng(n.content);else if("append-text"===n.type||"videos"===n.type){var ek,eE,e_,eT=n.text;if(t.current&&!t.current.textReturned&&eT.trim().length>0&&((0,W.dW)(W.Gy.SEARCH_RETURN_TEXT_SPEND_TIME,{spendTime:iR.current.firstTextSpendTime,connectionSpendTime:iR.current.connectSpendTime,sessionId:e.id,question:e.question,searchType:e.searchType,client:(0,el.Fk)()}),t.current.textReturned=!0),"videos"===n.type&&(eT=(0,eY.vE)(n.data),n.refs))for(var eI=0;eI<n.refs.length;eI++)nT.set(n.data[eI],n.refs[eI]);"strong-research"===e.mode&&1===tD.current?"text"===tL.current?(n9.current[tI.current]+=eT,n8((0,_._)(n9.current))):(tr.current[tI.current]+=eT,tt((0,_._)(tr.current))):"strong-research"===e.mode&&0===tD.current?(ts.current+=eT,to(ts.current)):"strong-research"===e.mode&&2===tD.current?(td.current+=eT,tu(td.current)):"think-research"===e.mode?tT.current?"cot"===tL.current?(td.current+=eT,tu(td.current)):(ny.current=rp.current,rp.current+=eT,ng(rp.current)):tm(function(e){var n=(0,_._)(e),t=n[n.length-1];return t.questions[t.questions.length-1].answer+=eT,n}):"cot"===tL.current?(td.current+=eT,tu(td.current)):(ny.current=rp.current,rp.current+=eT,ng(rp.current)),"research"!==e.mode?rP?rl.current<66&&(rl.current=66):rl.current<=66.66&&(rl.current=66.66):rP&&(rl.current<66&&(rl.current=66,null===(eE=n2.current)||void 0===eE||eE.onProgress({step:Math.ceil(rl.current/50)+1,totalProgress:rl.current,currentStepProgress:rc.current})),null===(ek=n2.current)||void 0===ek||ek.updateStepTips(1,"初步研究",!1)),rP||null===(e_=n2.current)||void 0===e_||e_.updateStepTips(1,i$.current?"阅读网页":e.engineType?np[e.engineType]:"全网搜索"),"append-text"===n.type&&rp.current.length>500&&ip(function(e){return Object.assign(e,{result:!0})})}else if("official-website"===n.type)nP(n.officialWebsite);else if("matched-paper"===n.type)nB(n.data);else if("recommended-question"===n.type)nU(n.data);else if("answer-link-num-highlights"===n.type)nQ(n.data);else if("pan-links"===n.type)n1(!1),nX(n.panLinks);else if("pan-links-init"===n.type)n1(!0);else if("html-generable"===n.type){var eL=n.data;rp.current.length>500&&(eL=Object.assign(eL,{result:!0})),ip(eL)}else if("error"===n.type){if((0,W.Ev)(tY.current),(0,W.Ev)(tJ.current),(0,W.Ev)(rM.current),n.code&&n.code===eA.cO.NOT_FOUND){e.engineType===B.rG.SCHOLAR&&t.current.scholarSearchDomain!==B.wb.ALL&&Object.values(B.wb).some(function(e){return e===t.current.scholarSearchDomain})?(eq(!0),t.current.stop(),(0,q.y)((0,I.jsx)(A.Z,{sx:{fontSize:"16px",fontFamily:"Noto Sans SC"},children:"[中/英]文库中未找到相关的参考文献，已为您自动切换到不限范围 "}),{variant:"info",autoHideDuration:6e3,style:{alignItems:"start"}}),setTimeout(function(){var n,t;null===(n=i6.current)||void 0===n||n.setShowProgress(!0),iQ(e.mode,void 0,B.wb.ALL),null===(t=i6.current)||void 0===t||t.setShowProgress(!0)},300)):(r6(!0),eq(!0));return}if(n.code===eA.cO.UNKOWN_ERROR?(null===(r=t.current)||void 0===r||r.error(n),(0,W.dW)(W.Gy.SEARCH_UNKNOWN_ERROR,{sessionId:e.id,question:e.question,searchType:e.searchType,client:(0,el.Fk)()})):n.msg&&(n.code===eA.cO.USER_CREDIT_RUN_OUT?e.advanceMath||"题目"===e.imgCategory&&"深度推理"===e.question?(0,q.y)("今日深度推理次数已用完，".concat(h()||f()!==B.kv.FREE?"请明天再来":"可分享获得更多次数"),{variant:"warning",autoHideDuration:3e3,keep:!0}):e.engineType===B.rG.KNOWLEDGE?(0,G.Icd)().then(function(e){e.data.data.count<=0&&e.data.data.externalPackage.rest<=0?(0,e$.Z)(function(){(0,nn.U4)(ru)}):(0,q.y)((0,I.jsxs)(I.Fragment,{children:["您的计算额度不足，",(0,I.jsx)(e2.default,{href:eD.l.TopUp,children:"去充值→"})]}),{variant:"warning",autoHideDuration:1e4,keep:!0})}):(0,e$.Z)(function(){(0,nn.U4)(ru)}):n.code===eA.cO.OWNER_CREDIT_RUN_OUT?(0,q.y)((0,I.jsx)(I.Fragment,{children:"专题所有者的计算额度不足，请联系专题所有者充值"}),{variant:"warning",autoHideDuration:1e4,keep:!0}):(0,q.y)(n.msg,{variant:"warning",autoHideDuration:3e3,keep:!0}),null===(i=rE.current)||void 0===i||i.deleteItem(e.index)),4001===n.code){sessionStorage.setItem("after-copy-show-sessionId",e.id),(0,ed.x3)({showTips:!0,redirectUrl:eD.l.Home,logDesc:"search-stream-generate-4001-code"}),(0,e4.n8)("add"),eq(!0),null===(a=rE.current)||void 0===a||a.deleteItem(e.index);return}if(n.code===eA.cO.SENSITIVE_WORD){if(d?null===(o=rH.current)||void 0===o||o.reload():ea.a2.getState().deleteRecord(e.id),!(null==iR?void 0:iR.current.isPPTSearch())){(0,e4.n8)("remove"),setTimeout(function(){ru.replace(eD.l.Home)},0);return}eq(!0)}else d?null===(s=rH.current)||void 0===s||s.reload():ea.a2.getState().deleteRecord(e.id),(null==iR?void 0:iR.current.isPPTSearch())||((0,e4.n8)("add"),eq(!0),setTimeout(function(){ru.replace(eD.l.Home)},100))}else"real-time-info"===n.type?(iu(n),n.needSearch||(is("查询"),rY(!0),eq(!0))):"search-sub-questions"===n.type?(n4(n.data),n9.current=Array.from({length:n.data.length},function(){return""}),n8(n9.current),tr.current=Array.from({length:n.data.length},function(){return""}),tt(tr.current)):"deep-think-step-start"===n.type?"deep_think_final_answer"===n.name?tT.current=!0:tm(function(e){var t=(0,_._)(e);return t.push({title:n.name,questions:[]}),t}):"step-start"===n.type?"plan"===n.name?(null===(l=i6.current)||void 0===l||l.setShowProgress(!1),tD.current=0,tN(0)):"sub_question"===n.name?(tD.current=1,tN(1),tI.current=n.extra.index):"final_answer"===n.name&&(tD.current=2,tN(2)):"text-start"===n.type?("cot"===n.textType&&(null===(c=i6.current)||void 0===c||c.setShowProgress(!1),"think-research"===e.mode&&(tT.current=!0)),tL.current=n.textType,tM(n.textType)):"text-end"===n.type&&"cot"===n.textType&&2===tD.current&&(tD.current=3,tN(3))}),i3=(0,nr.Z)(function(){var n=function(){rk.current.aborting=!0,(0,G.Grb)((0,e6.uz)(e.id)).then(function(n){var t,r;rk.current.stop(),eq(!0),rY(!1),tq(!1),rj(!1),tK(!0),e.index>0?null===(t=rE.current)||void 0===t||t.deleteItem(e.index):(null===(r=rE.current)||void 0===r||r.updateNoData(!0),rP&&e.onTitleClick(e.question,e.mode,!0))}).finally(function(){rk.current.aborting=!1})};"think-research"!==e.mode||iI?n():(0,ns.Z)({title:"确定终止？",content:"终止深度研究后，不可继续本次研究。"}).then(function(){n()}).catch(function(){})}),i5=nl.useBridge("exportMarkdownAPI"),i4=(0,L.useCallback)(function(){setTimeout(function(){var n="";(n=e.engineType===B.rG.PODCAST?nf.split(/(\[\[\d+]])/gi).map(function(e,n){var t=e.match(/\[\[(\d+)]]/);return t?"《".concat(nj[parseInt(t[1])-1].episode_name,"》(").concat(nj[parseInt(t[1])-1].episode_url,")"):e}).join(""):nf.replace(/\[\[\d+]]/g,""))||!ic||!i5.current||(n=i5.current.getExportMarkdownTextMap("realTimeInfo",rm)),n=n.replace(/<span[^>]*>.*?AI生成.*?<\/span>/g,""),(0,W.vQ)(n,!0),(0,q.y)("回答已成功复制到剪贴板",{variant:"success"})},1)},[nf,ic,rm]),i6=(0,L.useRef)(null),i7=(0,E._)((0,L.useState)(30),2),i8=i7[0],i9=i7[1];(0,L.useEffect)(function(){(0,L.startTransition)(function(){if(e.question){var n=e.question.length;n<=3*Math.floor(t.maxWidth/30)?i9(30):n<=4*Math.floor(t.maxWidth/24)?i9(24):i9(20)}})},[e.question,t.maxWidth]);var ae=(0,L.useMemo)(function(){var n=nj.filter(function(e){return!e.danger});return(0,e8.p)(n,e.engineType).links.length},[nj,e.engineType]),an=(0,E._)((0,L.useState)(null===(eG=e.history)||void 0===eG?void 0:eG.resultTableData),2),at=an[0],ar=an[1],ai=(0,L.useRef)(null),aa=nl.useBridge("exportMarkdownAPI");(0,L.useEffect)(function(){if(null==at?void 0:at.headers){var e,n="<!-- TOC -->\n\n## 汇总表格\n\n"+(0,e0.Zj)(at);null===(e=aa.current)||void 0===e||e.updateExportMarkdownTextMap("otherInfoTable",rm,n)}},[at]),(0,L.useEffect)(function(){var n;ar(null===(n=e.history)||void 0===n?void 0:n.resultTableData)},[null===(eW=e.history)||void 0===eW?void 0:eW.resultTableData]);var ao=(0,E._)((0,L.useState)(!1),2),as=ao[0],al=ao[1],ac=(0,L.useRef)(new Z.ZP({begin:function(){},receive:function(e){if(e.headers){var n,t;ar(e),(null===(n=ai.current)||void 0===n?void 0:n.isClosed())||null===(t=ai.current)||void 0===t||t.show(null==e?void 0:e.headers,null==e?void 0:e.rows)}else e.error&&(al(!1),(0,q.y)(e.errMsg,{variant:"error",autoHideDuration:3e3}))},down:function(){al(!1)},error:function(){al(!1),(0,q.y)("网络错误",{variant:"error",autoHideDuration:3e3})}}));(0,L.useEffect)(function(){return function(){ac.current.stop()}},[]);var au=(0,L.useCallback)(function(n){al(!0),(0,W.dW)("search-create-session",{query:e.question,s:new URLSearchParams(location.search).get("s")||localStorage.getItem("s")||e1.ZP.load("s"),mode:e.mode,engineType:e.engineType,sessionId:e.id,imgId:e.imgId||void 0,searchTopic:e.searchTopicId,advanceMath:!!e.advanceMath,tableHeaders:n,client:(0,el.Fk)()}),ac.current.post("api/result/".concat(rm,"/table"),{headers:JSON.stringify(n)})},[rm]),ad=(0,E._)((0,L.useState)(!1),2),ah=ad[0],af=ad[1];return(0,L.useEffect)(function(){iw&&setTimeout(function(){af(!0)},1e3)},[iw,e.engineType]),{finished:tF,searchProgressRef:i6,result:nf,isResultLessThan100:nw,lastTextRef:ny,links:nj,modeSelectRef:tz,showExtends:tB,setShowExtends:tq,analyzeMode:rh,setAnalyzeMode:rf,idRef:tQ,doSearch:iQ,replaySearch:iW,showReplayBackup:iH,isReplay:iG,resultId:rm,loadingSkeletonRef:tG,mindMappingLoaded:rS,setMindMappingLoaded:rj,eventTableRef:r_,eventTableFilterRef:rT,organizationTableRef:rI,organizationTableFilterRef:rL,userTableRef:rR,userTableFilterRef:rZ,eventDataNotEmptyAfterLoad:rO,setEventDataNotEmptyAfterLoad:rN,notDangerLinks:iy,extensionReadings:ry,noData:r4,setNoData:r6,label:nL,xiezuocat:nM,officialWebsite:nN,officialWebsiteFileId:nH,matchedPaper:nW,answerLinkNumHighlights:ra,panLinks:nJ,panLinksInit:n0,debugId:rW,isClawerLabel:iC,showAppendBox:rq,setShowAppendBox:rz,isR1Model:rV,collapse:rX,setCollapse:r$,isLast:r2,setIsLast:r3,resultExist:rQ,showFadeAnimation:r8,realQuestion:nu,resultStatus:ij,hasResult:iw,abortSearching:i3,abort:tV,answerTypeName:io,realTimeData:ic,containerRef:im,copyContent:i4,fontSize:i8,sourceCount:ae,imgMetas:nE,doGenerateTable:au,tableData:at,tableLoading:as,resultTableDialogRef:ai,isShare:iI,qaEdited:nb,showAnswerTipText:ah,recommendedQuestion:nz,multiReasoningList:n5,multiReasoningText:n7,multiReasoningThinkingText:tn,thinkingReasoningText:ta,finalAnswerThinkingText:tc,reasoningStep:tO,currentTextType:tZ,researchLinkNumHighlights:ro,canAppendSearch:ir,videoMap:nT,contentExpanded:ix,setContentExpanded:ib,idForResult:eU,htmlGenerable:ih,htmlReportTargetType:t1,setHtmlReportTargetType:rt,clawerHtmlReportTargetType:t5,setClawerHtmlReportTargetType:rr,deepThinkSearchSteps:tv,questionConnection:tb,deepThinkResearchConsoleMessage:tC,deepThinkUsage:tk,getHtmlReportId:rn,reportMap:t7,showConsoleAnimation:iN}},nx=new Map;function nb(){var e=(0,E._)((0,L.useState)(),2),n=e[0],t=e[1];nl.useRegister("shareKey",{getSearchNormalShareKey:function(){return n}},[n]);var r=(0,L.useMemo)(function(){return(0,e3.I)()},[]),i=(0,L.useCallback)(function(e){if(!nx.has(e)){var n;nx.set(e,new Promise((n=(0,y._)(function(n){var r,i,a;return(0,T.Jh)(this,function(o){switch(o.label){case 0:if(!((r=new URLSearchParams(location.search)).has(B.Vp.COMMON)&&r.has("shareKey")))return[3,1];return t(r.get("shareKey")),n((0,W.HU)(r.get(B.Vp.COMMON))),[3,5];case 1:return o.trys.push([1,4,,5]),[4,(0,G.XS6)(e)];case 2:return t((i=o.sent().data.data).shareKey),[4,(0,W.HU)(i.shortUrlKey)];case 3:return a=o.sent(),localStorage.setItem("shareLink",a),n(a),[3,5];case 4:return o.sent(),(0,W.Eu)()||(0,W.dW)(W.Gy.GET_SHARE_KEY_FAILED,{id:e}),n(""),[3,5];case 5:return[2]}})}),function(e){return n.apply(this,arguments)})))}return nx.get(e).then(function(e){return r.resolve(e),e})},[]);return{shareLinkProTool:r,getShareLink:i,searchNormalShareKey:n}}(0,y._)(function(e){var n;return(0,T.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,G.XS6)(e)];case 1:return n=t.sent(),[2,(0,W.HU)(n.data.data)]}})});var nw=(x={},(0,C._)(x,eE.oN.All,B.rG.DEFAULT),(0,C._)(x,eE.oN.Scholar,B.rG.SCHOLAR),(0,C._)(x,eE.oN.PodCast,B.rG.PODCAST),(0,C._)(x,eE.oN.WEBPAGE,B.rG.WEBPAGE),(0,C._)(x,eE.oN.PDF,B.rG.PDF),(0,C._)(x,eE.oN.Knowledge,B.rG.KNOWLEDGE),(0,C._)(x,eE.oN.Image,B.rG.IMAGE),(0,C._)(x,eE.oN.Video,B.rG.VIDEO),x),ny=(b={},(0,C._)(b,B.rG.DEFAULT,eE.oN.All),(0,C._)(b,B.rG.SCHOLAR,eE.oN.Scholar),(0,C._)(b,B.rG.PODCAST,eE.oN.PodCast),(0,C._)(b,B.rG.WEBPAGE,eE.oN.WEBPAGE),(0,C._)(b,B.rG.PDF,eE.oN.PDF),(0,C._)(b,B.rG.KNOWLEDGE,eE.oN.Knowledge),(0,C._)(b,B.rG.IMAGE,eE.oN.Image),(0,C._)(b,B.rG.VIDEO,eE.oN.Video),(0,C._)(b,B.rG.WORKFLOW,void 0),b),nC=function(e){var n=e.question,t=e.mode,r=e.engineType,i=e.searchType,a=e.path,o=e.flowId,s=e.variable,l=e.topicId,c=e.topicName,u=e.searchTopicId,d=e.imageInfo,h=e.imgId,f=e.imgCategory,p=e.advanceMath,v={q:n,m:t,st:i,et:r,pt:a,fi:o,var:JSON.stringify(s),ti:l,tn:c,sti:u,imi:d,iid:h,imc:f,advm:JSON.stringify(p)};return(0,W.lz)(location.origin,v)},nS=[{id:0,label:"简洁",checked:!1,value:"concise",icon:(0,I.jsx)(function(e){return V.createElement("svg",K({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),o||(o=V.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.5 7.083h15m-15 5.834h15"})))},{}),disable:!1},{id:1,label:"深入",checked:!0,value:"detail",icon:(0,I.jsx)(function(e){return V.createElement("svg",Q({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),s||(s=V.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.333 8.333H2.5M16.667 5H2.5m14.167 6.667H2.5M13.333 15H2.5"})))},{}),disable:!1},{id:2,label:"研究",checked:!1,value:"research",icon:(0,I.jsx)(function(e){return V.createElement("svg",eu({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),c||(c=V.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3.75 18.333v-4.166m0-8.334V1.667M1.667 3.75h4.166m-4.166 12.5h4.166m5-13.75L9.388 6.257c-.235.611-.352.917-.535 1.174a2.5 2.5 0 0 1-.589.589c-.257.182-.562.3-1.173.535L3.333 10l3.758 1.445c.61.235.916.353 1.173.535q.344.245.589.59c.183.256.3.562.535 1.173l1.445 3.757 1.445-3.757c.236-.611.353-.917.536-1.174a2.5 2.5 0 0 1 .588-.589c.257-.182.563-.3 1.174-.535L18.333 10l-3.757-1.445c-.611-.235-.917-.353-1.174-.535a2.5 2.5 0 0 1-.588-.59c-.183-.256-.3-.562-.536-1.173z"})))},{}),disable:!1}],nj=new Set;nS.forEach(function(e){return nj.add(e.value)});var nk=(0,L.memo)(function(e){var n=e.mode||eI.DefaultSetting.searchMode,t=(0,E._)((0,L.useState)(n),2),r=t[0],i=t[1];(0,Y.gU)(function(){(0,L.startTransition)(function(){i(n)})},[n]);var a=(0,E._)((0,L.useState)(!1),2),o=a[0],s=a[1],l=(0,E._)((0,L.useState)(!1),2),c=l[0],u=l[1],d=(0,E._)((0,L.useState)(e.title||""),2),h=d[0],f=d[1],p=(0,L.useRef)(null),v=(0,L.useRef)(!1),m=e.engineType===B.rG.WORKFLOW?B.rG.DEFAULT:e.engineType,g=(0,E._)((0,L.useState)(m||B.rG.DEFAULT),2),x=g[0],b=g[1],w=(0,E._)((0,L.useState)(m||B.rG.DEFAULT),2),y=w[0],k=w[1],_=(0,E._)((0,L.useState)(e.searchTopicId||null),2),T=_[0],R=_[1],Z=(0,E._)((0,L.useState)(e.searchTopicName||null),2),M=Z[0],D=Z[1];(0,L.useEffect)(function(){R(e.searchTopicId||null),D(e.searchTopicName||null)},[e.searchTopicId,e.searchTopicName]),(0,Y.gU)(function(){if(void 0!==e.engineType){(0,L.startTransition)(function(){b(m),k(m)});return}b(eR.l$.getDefaultEngine())},[m]);var F=(0,L.useCallback)(function(){e.onSubmit({question:h,_mode:r,engineType:x,searchTopicName:T,topicName:activeTopicNamel})},[h,e.onSubmit,r,x,T,M]);nl.useRegister("searchBox",{show:function(e){e&&f(e),c||u(!0)},updateEngineType:function(e){k(e)},activeEngine:x,setTitleIfNotPolluted:function(e){return!q.current&&(f(e),!0)},hide:function(){c&&u(!1)},isFocused:function(){return o},getQuestion:function(){return h}},[h,c]),(0,Y.gU)(function(){h||v.current||!e.title||(v.current=!0,f(e.title))},[e.title,h,o]);var H=(0,L.useRef)(null),G=(0,Y.I1)(F),W=nu.useAPI("searchInputDrawer"),q=(0,L.useRef)(!1);(0,Y.gU)(function(){if(x===B.rG.PODCAST&&"research"===r){var n;i("detail"),null===(n=e.onModeChange)||void 0===n||n.call(e,"detail")}},[x,r]);var z=(0,L.useCallback)(function(n){var t;null===(t=e.onModeChange)||void 0===t||t.call(e,n)},[e.onModeChange]),U=(0,L.useCallback)(function(n,t){e.onSubmit({question:n,_mode:r,engineType:x,searchTopicId:T,searchTopicName:M,model:t})},[e.onSubmit,r,x]),V=(0,eX.useImageSearch)(e.onSubmit,""),K=V.actions,Q=V.selectImage,J=V.onImageSelected,$=V.onActionClicked,ee=V.imgCategory,et=V.imgId,ea=V.imgUrl,eo=V.activeImageSearchId,el=V.currentImage,ec=V.clearImageSearch,eu=V.textInputRef,ed=(0,L.useCallback)(function(n){f(n),e.onSubmit({question:n,_mode:r,engineType:x})},[e.onSubmit,r,x]),eh=eG.GO.useAPI("catalogDrawer");return(0,L.useMemo)(function(){if(e.flowId&&e.variable)return{flowId:e.flowId,variableInputs:e.variable}},[e.flowId,e.variable]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(A.Z,{component:"form",onSubmit:function(e){return e.preventDefault()},sx:e.sx,className:X()([er()["search-box"],er()["search-box-h5"],e.className],(0,C._)({},er().active,c)),children:[(0,L.createElement)(O.ZP,(0,j._)((0,S._)({},ej()(G,"onKeyDown")),{onKeyDown:function(e){var n;null===(n=G.onKeyDown)||void 0===n||n.call(G,e),q.current=!0},sx:{flex:1,fontSize:14,fontFamily:"Noto Sans SC",color:"var(--black)",px:1},id:"search-result-input",onClick:function(){var n,t,i,a;e.engineType===B.rG.WORKFLOW?(null===(n=W.current)||void 0===n||n.openWorkflowSettingDrawer({populateData:{flowId:e.flowId}}),null===(t=W.current)||void 0===t||t.setText(h)):(null===(i=W.current)||void 0===i||i.show(e.imgId?"":h,r),null===(a=W.current)||void 0===a||a.setImageSearchIconVisible(!0),(0,e7.Kn)(e7.Df.OpenSourceDrawer,-1))},value:h,placeholder:"点击输入想了解的问题",key:"search-box-base-input",className:"search-box-base-input",onFocus:function(n){var t;null===(t=e.onFocus)||void 0===t||t.call(e,n),s(!0)},ref:H,onBlur:function(n){var t;null===(t=e.onBlur)||void 0===t||t.call(e,n),s(!1)},onChange:function(e){f(e.target.value.length>1e3?e.target.value.substring(0,1e3):e.target.value)}})),(0,I.jsx)("input",{ref:eu,onChange:function(e){var n;J(e),null===(n=W.current)||void 0===n||n.hide()},style:{display:"none"},type:"file",accept:"image/*"}),!e.hideMicroPhone&&(0,I.jsx)(N.Z,{className:"search-box-ops",sx:{height:1},direction:"row",alignItems:"center",onClick:function(e){return e.preventDefault()},children:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(en.K,{sx:{height:1,"&>.MuiIconButton-root":{boxSizing:"content-box"}},children:(0,I.jsx)(ei.o4,{activeEngine:x,searchTopicId:T,onChange:ed})})})})]}),e.engineType===B.rG.WORKFLOW&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(P.Z,{sx:{p:1,width:35,height:35,ml:.5,mr:-1.5},onClick:function(){var e;null===(e=eh.current)||void 0===e||e.open()},children:(0,I.jsx)(es,{style:{color:"var(--black)"}})}),(0,I.jsx)(eK,{template:e.template,variable:e.variable})]}),(y===B.rG.IMAGE||"strong-research"===n)&&(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(P.Z,{sx:{p:1,width:35,height:35,ml:.5,mr:-1.5},onClick:function(){var e;null===(e=eh.current)||void 0===e||e.open()},children:(0,I.jsx)(es,{style:{color:"var(--black)"}})})}),(0,I.jsx)(n_,{onSearchConsultInputSubmit:U,showSettingButton:e.engineType!==B.rG.KNOWLEDGE,hideImageIcon:e.engineType==B.rG.KNOWLEDGE,activeEngine:x,model:e.model,onImageSearchClick:Q,searchTopicId:e.searchTopicId}),el&&(0,I.jsx)(eX.H5ImageSearchWindow,{actions:K,onSubmit:e.onSubmit,imgId:et,mode:e.mode,imgCategory:ee,list:K,activeActionId:eo,onBack:function(){var e;null===(e=eu.current)||void 0===e||e.click()},onClose:function(){ec()},onBtnClick:$,img:ea}),(0,I.jsx)(eL.L,{searchMode:r,drawerTitle:"设置",showBackBtn:!0,engineType:x,ref:p,subjectId:e.topicId,subjectName:e.topicName,onSubjectChange:function(e,n){R(e),D(n)},onModeChange:z,onEngineTypeChange:function(e){b(e),eR.l$.updateDefaultEngine(e)}}),(0,I.jsx)(eP.X9,{onSubmit:e.onSubmit})]})});function nE(e){var n=(0,E._)((0,L.useState)(e.title),2),t=n[0],r=n[1],i=(0,E._)((0,L.useState)(e.show||!1),2),a=i[0],o=i[1];e.className,e.engineType;var s=(0,k._)(e,["className","engineType"]);return(0,L.useEffect)(function(){r(e.title)},[e.title]),nl.useRegister("searchBoxV2",{show:function(e){e&&r(e),o(!0)},hide:function(){o(!1)},getQuestion:function(){return t}},[t]),(0,I.jsxs)(N.Z,(0,j._)((0,S._)({className:X()([er()["search-box"],er()["search-box-v2"],er()["search-box-desktop"],e.className],(0,C._)({},er().active,a)),direction:"row",alignItems:"center",spacing:.2},s),{children:[e.topicName&&(0,I.jsx)(A.Z,{className:er()["search-box-tag"],children:e.topicName.length>10?e.topicName.substring(0,10)+"...":e.topicName}),e.engineType===B.rG.WORKFLOW?(0,I.jsx)("svg",{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,I.jsx)("path",{d:"M13.1667 16.1666H13C11.5999 16.1666 10.8998 16.1666 10.365 15.8941C9.89462 15.6545 9.51217 15.272 9.27248 14.8016C9 14.2668 9 13.5668 9 12.1666V6.83329C9 5.43316 9 4.7331 9.27248 4.19832C9.51217 3.72791 9.89462 3.34546 10.365 3.10578C10.8998 2.83329 11.5999 2.83329 13 2.83329H13.1667M13.1667 16.1666C13.1667 17.0871 13.9129 17.8333 14.8333 17.8333C15.7538 17.8333 16.5 17.0871 16.5 16.1666C16.5 15.2462 15.7538 14.5 14.8333 14.5C13.9129 14.5 13.1667 15.2462 13.1667 16.1666ZM13.1667 2.83329C13.1667 3.75377 13.9129 4.49996 14.8333 4.49996C15.7538 4.49996 16.5 3.75377 16.5 2.83329C16.5 1.91282 15.7538 1.16663 14.8333 1.16663C13.9129 1.16663 13.1667 1.91282 13.1667 2.83329ZM4.83333 9.49996L13.1667 9.49996M4.83333 9.49996C4.83333 10.4204 4.08714 11.1666 3.16667 11.1666C2.24619 11.1666 1.5 10.4204 1.5 9.49996C1.5 8.57949 2.24619 7.83329 3.16667 7.83329C4.08714 7.83329 4.83333 8.57949 4.83333 9.49996ZM13.1667 9.49996C13.1667 10.4204 13.9129 11.1666 14.8333 11.1666C15.7538 11.1666 16.5 10.4204 16.5 9.49996C16.5 8.57949 15.7538 7.83329 14.8333 7.83329C13.9129 7.83329 13.1667 8.57948 13.1667 9.49996Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):(0,I.jsx)("svg",{width:"18",height:"17",viewBox:"0 0 18 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,I.jsx)("path",{d:"M16.5 16L12.875 12.375M14.8333 7.66667C14.8333 11.3486 11.8486 14.3333 8.16667 14.3333C4.48477 14.3333 1.5 11.3486 1.5 7.66667C1.5 3.98477 4.48477 1 8.16667 1C11.8486 1 14.8333 3.98477 14.8333 7.66667Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,I.jsx)(A.Z,{sx:{flex:1,textAlign:"left",marginLeft:"10px !important",overflow:"hidden",whiteSpace:"nowrap"},children:t})]}))}var n_=(0,L.memo)((0,L.forwardRef)(function(e,n){var t=e.onSearchConsultInputSubmit,r=(0,L.useRef)(null),i=(0,E._)((0,L.useState)(null),2),a=i[0],o=i[1],s=(0,E._)((0,L.useState)(null),2),l=s[0],c=s[1],u=(0,L.useRef)(null),d=(0,E._)((0,L.useState)(null),2),h=(d[0],d[1]),f=(0,E._)((0,L.useState)(function(){var e;return(null===(e=window.visualViewport)||void 0===e?void 0:e.height)||window.innerHeight}),2),p=f[0],v=f[1];(0,L.useEffect)(function(){var e=function(){window.visualViewport?v(window.visualViewport.height):v(window.innerHeight)};return e(),window.visualViewport&&window.visualViewport.addEventListener("resize",e),window.addEventListener("resize",e),function(){window.visualViewport&&window.visualViewport.removeEventListener("resize",e),window.removeEventListener("resize",e)}},[]);var m=(0,L.useCallback)(function(){(0,W.Kn)(function(){setTimeout(function(){var e=r.current.argumentRef.current.textareaRef.current;e.focus(),e.scrollTop=e.scrollHeight},0)},[],3)},[]),g=(0,L.useRef)(""),x=(0,E._)((0,L.useState)(!1),2),b=x[0],w=x[1];nu.useRegister("searchInputDrawer",function(){return{setText:function(e){var n;null===(n=r.current)||void 0===n||n.setText(e)},show:function(e,n,t,i){h(i||null),S(!0),setTimeout(function(){var n,t;i?null===(n=r.current)||void 0===n||n.setText(e||""):null===(t=r.current)||void 0===t||t.setText(g.current||e||""),m()},0),t&&c(function(){return t})},openWorkflowSettingDrawer:function(e){var n=j.current;null==n||n.openWorkflowSettingDrawer(e),null==n||n.setTuneData({onBack:function(){k()},onConfirm:function(){k()},onClose:function(){n.setTuneData(null)}})},edit:function(e,n){S(!0),setTimeout(function(){var t;null===(t=r.current)||void 0===t||t.setText(e),u.current=n,m()},0)},hide:function(){S(!1)},setTuneData:o,searchConsultInput:r,setImageSearchIconVisible:function(e){w(e)}}},[m]);var y=(0,E._)((0,L.useState)(!1),2),C=y[0],S=y[1];(0,L.useEffect)(function(){C||c(null),u.current&&(u.current=null)},[C]);var j=nu.useAPI("searchSettingDrawer"),k=(0,L.useCallback)(function(){j.current.toggle(!1),setTimeout(function(){S(!0),setTimeout(function(){var e,n,t;null===(t=r.current)||void 0===t||null===(n=t.argumentRef.current)||void 0===n||null===(e=n.textareaRef.current)||void 0===e||e.focus()})})},[j]),_=(0,L.useCallback)(function(){S(!1);var e=j.current;null==e||e.setTuneData({onBack:function(){k()},onConfirm:function(){k()},onClose:function(){e.setTuneData(null)}})},[j]);return(0,I.jsx)(F.ZP,{open:C,disableAutoFocus:!0,disableRestoreFocus:!0,transitionDuration:0,onClose:function(){var e;S(!1),null==a||null===(e=a.onClose)||void 0===e||e.call(a)},sx:{".MuiPaper-root":{borderRadius:"10px 10px 0 0",transition:"transform 0.3s ease-in-out"},maxHeight:"".concat(p,"px")},keepMounted:!0,anchor:"bottom",children:(0,I.jsx)(U.ZP,{ref:r,isH5:!0,model:e.model,activeEngine:e.activeEngine,searchTopicId:e.searchTopicId,sx:(0,W.KI)({borderRadius:"15px 15px 0 0","& .textarea-root":{px:"20px"},maxHeight:"".concat(Math.min(.8*p,400),"px"),overflow:"auto"}),showSettingButton:void 0!==(null==a?void 0:a.showSettingButton)?null==a?void 0:a.showSettingButton:e.showSettingButton,onSettingClicked:_,onArgumentChange:function(e){g.current=e},autoFocus:!0,placeholders:{argument:(null==a?void 0:a.placeholder)||e.placeholder||"点击输入想了解的问题"},onSubmit:function(e,n){if(null==a?void 0:a.onSubmit){a.onSubmit(e),S(!1);return}u.current?(u.current(e),S(!1)):(t(e,n),S(!1),l&&(l(e),c(null)))},hideIcon:!0,bottomRightComponent:b&&!e.hideImageIcon?(0,I.jsx)(P.Z,{onClick:e.onImageSearchClick,sx:{color:"var(--content-op-color)"},children:(0,I.jsx)(eJ.Z,{})}):(0,I.jsx)(I.Fragment,{})})})})),nT=(a=(0,y._)(function(){return(0,T.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,G.Urb)()];case 1:if(e.sent().data.data.count>0)return[2,!0];return[2,!1]}})}),function(){return a.apply(this,arguments)});function nI(e){var n=(0,L.useRef)(null),t=(0,E._)((0,L.useState)(!1),2),r=t[0],i=t[1],a=(0,E._)(L.useState(null),2),o=a[0];a[1];var s=(0,L.useContext)(ec.HO),l=(0,L.useRef)(null),c=e.inputRef||n,u=(0,L.useRef)(null),d=nl.useBridge("resultAPI"),h=(0,E._)((0,L.useState)([{label:"简洁",value:"concise",icon:(0,I.jsx)(ef,{}),active:!1},{label:"深入",value:"detail",icon:(0,I.jsx)(es,{}),active:!0},{label:"研究",value:"research",icon:(0,I.jsx)(ev,{}),active:!1},{label:"多步",value:"strong-research",icon:(0,I.jsx)(ev,{}),active:!1}]),2),f=h[0],p=h[1],v=(0,E._)((0,L.useState)([{label:(0,W.Y0)(),value:void 0,icon:(0,I.jsx)(eg,{}),active:!0},{label:"学术",value:"scholar",icon:(0,I.jsx)(eb,{}),active:!1}]),2),m=v[0],g=v[1];(0,$.bQ)({anchor:function(){return o},popover:function(){var e;return s||(null===(e=l.current)||void 0===e?void 0:e.nodeRef.current)}},r,function(){return i(!1)});var x=function(e){var n=(0,_._)(f);n.forEach(function(n,t){n.active=n.label===e.label}),p(n)},b=function(e){var n=(0,_._)(m);n.forEach(function(n,t){n.active=n.label===e.label}),g(n)};return(0,I.jsxs)(A.Z,{className:er()["append-search-textarea"]+" last-qa-o",ref:u,children:[(0,I.jsx)(z.Z,{isH5:!1,model:e.model,ref:c,autoFocus:e.autoFocus,onSubmit:function(n){var t;null===(t=d.current)||void 0===t||t.appendItem({question:n[0],mode:"research"===e.mode?"detail":e.mode,model:e.model,engineType:e.engineType,searchTopicId:e.searchTopicId}),e.onSubmit()},onArgumentChange:function(){if(e.isH5){var n,t,r=null===(t=c.current)||void 0===t?void 0:null===(n=t.argumentRef.current)||void 0===n?void 0:n.textareaRef.current;r&&(r.style.setProperty("height","0px"),r.style.setProperty("height","".concat(r.scrollHeight,"px")))}},sx:{height:"100%",padding:"0 !important","& > label":{paddingLeft:"5px"}},placeholder:"继续追问..."}),(0,I.jsx)($.ZP,{anchor:o,placement:"top-start",offsetOptions:{mainAxis:10},ref:l,open:r,isAutoUpdate:!0,children:(0,I.jsxs)(A.Z,{className:er()["append-setting-container"],children:[f.map(function(e,n){return(0,I.jsx)(ew.Z,{arrow:!0,placement:"top",classes:{tooltip:"custom-tooltip-popper",arrow:"custom-tooltip-arrow"},title:"强度:".concat(e.label),children:(0,I.jsx)(P.Z,{className:X()(er()["append-setting-icon-button"],(0,C._)({},er()["button-active"],e.active)),onClick:function(){return x(e)},children:e.icon})},n)}),(0,I.jsx)(H.Z,{orientation:"vertical",sx:{height:"20px",margin:"0 5px"}}),m.map(function(e,n){return(0,I.jsx)(ew.Z,{arrow:!0,placement:"top",classes:{tooltip:"custom-tooltip-popper",arrow:"custom-tooltip-arrow"},title:"范围:".concat(e.label),children:(0,I.jsx)(P.Z,{className:X()(er()["append-setting-icon-button"],(0,C._)({},er()["button-active"],e.active)),onClick:function(){return b(e)},children:e.icon})},n)})]})})]})}var nL=function(){var e=(0,L.useRef)(new Map);return(0,L.useRef)(0),{getResultRefProps:(0,L.useCallback)(function(n,t,r){return{onExpand:function(){e.current.forEach(function(e,n){n!==r&&(null==e||e.collapse())})},onAppendStart:function(){},_ref:function(n){if(!n){e.current.delete(r);return}e.current.set(r,n)},ref:function(n){if(!n){e.current.delete(r);return}e.current.set(r,n)}}},[])}};function nR(e){var n=(0,E._)((0,L.useState)(new Date),2),t=n[0];return n[1],(0,L.useEffect)(function(){return function(){if(t){var n=new Date().getTime()-t.getTime();if(n>2e3){var r={param:e,client:(0,el.Fk)(),spendTime:n},i=(0,ek.vn)(ek.LE.SearchSkeletonDataReadyTime);if(i){var a=new Date().getTime()-i;Object.assign(r,{spendTimeAfterDataReady:a}),a>1e3&&Object.assign(r,{spendTimeAfterDataReadyTooSlow:!0})}(0,W.dW)(W.Gy.SEARCH_SKELETON_DISAPPEAR_TIME_TOO_LONG,r)}}}},[]),{startTime:t}}var nZ=(0,L.memo)(function(){var e=(0,E._)((0,L.useState)(!1),2),n=e[0],t=e[1];return nl.useRegister("modelTip",{show:function(){t(!0)}},[]),!!n&&(0,I.jsx)(I.Fragment,{})}),nM=(w={},(0,C._)(w,B.rG.DEFAULT,"来源"),(0,C._)(w,B.rG.VIDEO,"来源"),(0,C._)(w,B.rG.SCHOLAR,"参考文献"),(0,C._)(w,B.rG.PODCAST,"相关播客"),(0,C._)(w,B.rG.PDF,"来源"),(0,C._)(w,B.rG.WORKFLOW,"参考资料"),(0,C._)(w,B.rG.IMAGE,""),(0,C._)(w,B.rG.WEBPAGE,""),(0,C._)(w,B.rG.KNOWLEDGE,"参考资料"),w);function nD(e,n){return e&&e.id?e.id:n}var nA=64},53998:function(e,n,t){"use strict";t.d(n,{kq:function(){return eb},$r:function(){return eC},tK:function(){return ey},TT:function(){return eS},Pt:function(){return ef},vE:function(){return ev},h0:function(){return ep},RG:function(){return ex},oo:function(){return ew},ww:function(){return eg},qd:function(){return eh}});var r,i=t(2403),a=t(5194),o=t(1780),s=t(46796),l=t(50059),c=t(85735),u=t(5853),d=t(57437),h=t(2265),f=t(47812),p=t(22629),v=t(23760),m=t(99376),g=t(39207),x=t(22322),b=t(7870),w=t(96339),y=t(55833),C=t(54493),S=t(36570),j=t(75825),k=t(89831),E=t(36956),_=t(79943),T=t(89480),I=t(74634),L=t(66687),R=t(79817),Z=t(41443),M=t.n(Z),D=t(68956),A=t(76492),O=t(15707),N=t(56275),P=t(15102),F=t(56731),H=t(27030),G=t(88872),W=t(70626),B=t(76904),q=t(68791),z=t(89574),U=t(63791),V=t(87928),K=t(79778),Q=t(20929),Y=t(10638),J=t(94746);function X(){return(X=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var $=function(e){return J.createElement("svg",X({xmlns:"http://www.w3.org/2000/svg",width:23,height:23,fill:"none",viewBox:"0 0 23 23"},e),r||(r=J.createElement("path",{fill:"#667085",d:"M16.798 7.078v5.584a.767.767 0 0 1-.772.772.72.72 0 0 1-.755-.755l-.026-3.844-7.705 7.704a.767.767 0 0 1-1.373-.519.77.77 0 0 1 .296-.558l7.704-7.705-3.92.051a.92.92 0 0 1-.645-.865.77.77 0 0 1 .772-.772l5.457-.06a.828.828 0 0 1 .967.967"})))},ee=t(78693),en=t(58494),et=t(71931),er=t(53263),ei=t(94084),ea=t(26058),eo=t(67144),es=t(23301),el=t(54887),ec=t(25566),eu=null,ed=null;function eh(){var e,n=(0,_.WS)(),t=(0,E.W)(),r=y.vs.useBridge("homeAPI");(0,I.F)();var a=(0,l._)((0,h.useState)(""),2),o=a[0],s=a[1],c=(0,l._)((0,h.useState)(""),2),d=c[0],T=c[1],L=(0,m.usePathname)(),R=(0,h.useContext)(G.mp),Z=(0,h.useRef)(null);(0,v.LM)(function(e){return e.model}),(0,h.useEffect)(function(){Z.current=R.data},[R.data]),(0,h.useEffect)(function(){var e=new URL(location.href);d&&o&&(ec.env.NEXT_PUBLIC_DISABLE_SEARCH_PAGE_REVALIDATE||(ed=setTimeout(function(){e.pathname===j.l.Home&&e.searchParams.has("q")?(0,b.dW)("urlSearch-router-pending",{path:e.pathname}):(0,b.dW)("router-pending",{path:e.pathname}),location.replace(o)},5e3)),"replace"===d?n.replace(o):n.push(o))},[d,o]);var M=function(){var e,t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];null===(e=r.current)||void 0===e||e.showHome(),n.replace(j.l.Home),(0,W.n8)(t?"add":"remove")};return{onSubmit:(e=(0,i._)(function(e,r,a){var o,l,c,d,h,m,E,_;return(0,u.Jh)(this,function(I){switch(I.label){case 0:if(l=(0,O.u)(L),c=new Date,e.engineType===f.rG.PODCAST&&"research"===e.mode&&(e.mode="detail",(0,x.y)('播客搜索暂不支持"研究模式"，已为您自动切换到"深入"模式',{variant:"warning",autoHideDuration:5e3,keep:!0})),e.engineType===f.rG.IMAGE&&(e.mode="detail"),d=(0,y.G2)({question:e.question,mode:e.mode,engineType:e.engineType,searchType:e.searchType,flowId:e.flowId,variable:e.variable,topicId:e.topicId,topicName:e.topicName,searchTopicId:e.searchTopicId,searchTopicName:e.searchTopicName,imageInfo:e.imgInfo,imgId:e.imgId,imgCategory:e.imgCategory,advanceMath:e.advanceMath}),h=e.cost,!v.LM.getState().login&&!(Z.current&&Z.current.noLoginCanVisit)&&!p.a2.getState().canSearch(e.cost))return(0,w.x3)({showTips:!0,tipsHtml:e.engineType!==f.rG.WORKFLOW||(0,D.gF)()?"登录后，可继续<b>免费</b>使用":"登录后，可继续<b>免费</b>使用工作流",redirectUrl:d,logDesc:e.engineType===f.rG.WORKFLOW?"use-workflow-not-available":"do-search-but-not-available"}),null==r||r(),n.replace(j.l.Home),[2];if(!(null===(o=(0,ea.ZD)())||void 0===o?void 0:o.isMiniWebView))return[3,4];if(!v.LM.getState().login)return(0,w.x3)({showTips:!0,tipsHtml:"登录后，可继续<b>免费</b>使用",logDesc:"wx-minipro-do-search-but-not-login"}),[2];I.label=1;case 1:return I.trys.push([1,3,,4]),[4,(0,g.qQ1)(3,e.question)];case 2:if(0!=(m=I.sent()).data.errCode)return(0,x.y)(m.data.errMsg,{variant:"error",autoHideDuration:3e3}),M(!1),[2];if(0!=(E=m.data.data).errcode)return(0,x.y)(m.data.errmsg,{variant:"error",autoHideDuration:3e3}),M(!1),[2];if(100!=E.result.label)return g.faC[E.result.label]?(0,x.y)("您输入的内容含有".concat(g.faC[E.result.label],"等敏感信息，请修改后重试"),{variant:"error",autoHideDuration:3e3}):(0,x.y)("您输入的内容含有敏感信息，请修改后重试",{variant:"error",autoHideDuration:3e3}),M(!1),[2];return[3,4];case 3:return I.sent(),[3,4];case 4:var R;return e.cost=void 0,_={debug:location.href.indexOf("debug")>-1,url:location.href,lang:S.ZP.outputLang.get(),enableMix:!0,newEngine:!0,enableImage:!0},a&&(_.shareKey=a),Object.assign(e,_),e.enableImageGroup=en.ZP.load("showImageCategory"),(0,g.ed6)(e).then((R=(0,i._)(function(n){var r,i,o,d;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(0!==n.data.errCode)return[3,3];if((r=n.data.data).results=[{question:r.question,template:r.template,variable:r.variable,advanceMath:e.advanceMath,mode:r.mode,model:r.model,deepResearchModel:r.deepResearchModel,uuid:(0,g.DOL)(),noCredit:!!(Z.current&&Z.current.noLoginCanVisit)}],!a)return[3,2];return[4,(0,b.i9)(r.id,a)];case 1:u.sent(),u.label=2;case 2:return v.LM.getState().login||(0,B.WR)(r.id)||p.a2.getState().appendRecord(r),c&&(0,b.dW)(b.Gy.CREATE_SESSION_TIME_LOG,(0,B.Zq)(c,e,"create-session-success")),i={id:r.id},a&&(i[f.Vp.SEARCH_TOPIC_SHARE_KEY]=a),(o=new URL(location.origin+(0,b.gY)(j.l.Search,i))).searchParams.set("q",r.question.substring(0,100)),e.topicId&&o.searchParams.set("topicId",e.topicId),e.searchTopicId&&l.path===j.l.SubjectDetail&&(o=(0,A.Qn)({fromSubject:!0,subjectId:e.searchTopicId,fromCard:!1},o)),t.set("newSearch",!0),sessionStorage.setItem("newSearch",JSON.stringify(r)),d=new URL(location.href),s((0,g.k3p)(o.href)),d.pathname===j.l.Home&&d.searchParams.has("q")?T("replace"):T("push"),[3,4];case 3:n.data.errCode===k.cO.SENSITIVE_WORD?((0,x.y)("本次请求涉及的领域暂不支持",{variant:"warning",autoHideDuration:3e3,keep:!0}),c&&(0,b.dW)(b.Gy.CREATE_SESSION_TIME_LOG,(0,B.Zq)(c,e,"create-session-sensitive")),M(!1)):(n.data.errCode===k.cO.USER_CREDIT_RUN_OUT?(v.LM.getState().productType()===f.kv.FREE?(e.engineType===f.rG.WORKFLOW&&(0,x.y)("您今日搜索额度已不足".concat(h,"次，无法使用工作流"),{variant:"info",autoHideDuration:3e3,className:"info-blue",keep:!0}),(0,F.Z)()):e.engineType===f.rG.WORKFLOW?(0,x.y)("您今日搜索额度已不足".concat(h,"次，无法使用工作流"),{variant:"info",autoHideDuration:3e3,className:"info-blue",keep:!0}):(0,x.y)("今日搜索额度已用尽",{variant:"info",autoHideDuration:3e3,className:"info-blue",keep:!0}),c&&(0,b.dW)(b.Gy.CREATE_SESSION_TIME_LOG,(0,B.Zq)(c,e,"create-session-USER_CREDIT_RUN_OUT"))):(c&&(0,b.dW)(b.Gy.CREATE_SESSION_TIME_LOG,(0,B.Zq)(c,e,"create-session-error",{res:n.data})),(0,x.y)(n.data.errMsg,{variant:"warning",autoHideDuration:3e3})),M()),u.label=4;case 4:return[2]}})}),function(e){return R.apply(this,arguments)})).catch(function(n){n instanceof C.dp?n.code===k.cO.CREDIT_RUN_OUT&&((0,w.x3)({showTips:!0,redirectUrl:d,logDesc:"credit-run-out"}),M()):(c&&(0,b.dW)(b.Gy.CREATE_SESSION_TIME_LOG,(0,B.Zq)(c,e,"create-session-error",{error:{message:null==n?void 0:n.message,stack:null==n?void 0:n.stack}})),(0,x.y)("网络错误",{variant:"warning",autoHideDuration:3e3}),M())}),[2]}})}),function(n,t,r){return e.apply(this,arguments)})}}function ef(e){var n=!0,t=!1,r=void 0;try{for(var i,a=e.results[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var o=i.value;o.normalAnswer?o.normalAnswer.steps=ep(o.normalAnswer.steps):o.strongResearchAnswer?o.strongResearchAnswer.steps=ep(o.strongResearchAnswer.steps):o.thinkResearchAnswer&&(o.thinkResearchAnswer.steps=ep(o.thinkResearchAnswer.steps))}}catch(e){t=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}}function ep(e){var n=[],t=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value,l=s.texts,u=function(e){var n=[],t="",r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;if(l.type===f.cX.VIDEOS){if(n.length>0){var c=n[n.length-1];c.text&&(c.text=c.text+em(l))}else t+=em(l)}else t&&l.text&&(l.text=t+l.text,t=""),n.push(l)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(l);u=function(e){var n=[],t=null,r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;if(u=t,l.type!==u||l.extra)n.push(l);else{var u,d,h=n[n.length-1];h.text=h.text+l.text,(d=h.originReferNums).push.apply(d,(0,c._)(l.originReferNums))}t=l.type}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(u),n.push(Object.assign({},s,{texts:u}))}}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return n}function ev(e){return"<mt type='videos' data='".concat(JSON.stringify(e),"'></mt>\n\n")}function em(e){return e.type==f.cX.VIDEOS?ev(e.extra.nums):e.text}var eg=function(e){var n,t,r,s,w,C,k,L,R,Z,M=arguments.length>1&&void 0!==arguments[1]&&arguments[1],D=arguments.length>2?arguments[2]:void 0,A=(0,l._)((0,h.useState)(null),2),O=A[0],P=A[1],F=(0,l._)((0,h.useState)(null),2),G=F[0],W=F[1],q=(0,m.useSearchParams)(),z=(0,l._)((0,h.useState)(""),2),U=z[0],V=z[1],K=(0,l._)((0,h.useState)([]),2),Q=K[0],Y=K[1],J=(0,l._)((0,h.useState)(""),2),X=J[0],$=J[1],ee=function(e){(0,h.startTransition)(function(){P(e)})},en=(0,y.a3)(),ea=en.shareLinkProTool,ec=en.getShareLink,ep=en.searchNormalShareKey;(0,h.useEffect)(function(){if(O){var e=(0,B.uz)(O.id);e&&ec(e)}},[O]);var ev=(0,m.useSearchParams)(),em=(0,v.LM)(function(e){return e.login});n=(0,h.useRef)(!1),t=(0,h.useRef)(0),s=(r=(0,l._)((0,h.useState)(null),2))[0],w=r[1],C=(0,h.useCallback)(function(){n.current=!0,(0,g.yEX)(O.id,G.pageNumber+1,G.pageSize,q.get("shareKey"),q.get(f.Vp.SEARCH_TOPIC_SHARE_KEY),location.href.indexOf("debug")>-1).then(function(e){Y(function(n){var t=[],r=n.map(function(e){return e.id});return r.push.apply(r,(0,c._)(O.results.map(function(e){return e.id}))),t.push.apply(t,(0,c._)(e.data.data.list.filter(function(e){return!r.includes(e.id)}))),t.push.apply(t,(0,c._)(n)),t}),W(e.data.data.page)}).finally(function(){w(D.scrollHeight),n.current=!1})},[O,G,q,D]),(0,h.useLayoutEffect)(function(){if(null!=s&&!(D.scrollTop>0)){var e=D.scrollHeight-s;D.scrollTop=D.scrollTop+e}},[s]),k=(0,et.y1)(C,30),L=(0,h.useCallback)(function(){if(D&&(null==O?void 0:O.results)&&!n.current){var e=D.scrollTop,r=e<t.current;t.current=e,r&&(null==G?void 0:G.hasNext)&&D.scrollTop<window.innerHeight&&!n.current&&k()}},[D,null==O?void 0:O.results,null==G?void 0:G.hasNext,k]),R=(0,et.y1)(L,M?15:30),Z=(0,h.useRef)(L),(0,h.useEffect)(function(){Z.current=R},[L]),(0,h.useEffect)(function(){var e=M?window:D;if(e){var n=function(){Z.current()};return e.addEventListener("scroll",n),function(){e.removeEventListener("scroll",n)}}},[D]),(0,h.useEffect)(function(){if(!em){var n,t=(n=(0,i._)(function(){var n,t;return(0,u.Jh)(this,function(r){switch(r.label){case 0:return[4,(0,b.PP)((0,B.uz)(e.params.id))];case 1:return(n=r.sent())&&((t=new URL(location.href)).searchParams.set(f.Vp.SEARCH_TOPIC_SHARE_KEY,n),eH.replace(t.href)),[2]}})}),function(){return n.apply(this,arguments)});ev.has(f.Vp.SEARCH_TOPIC_SHARE_KEY)||t()}},[em]);var eg=(0,h.useCallback)(function(){ea.data&&(0,b.vQ)(ea.data).then(function(e){(0,x.y)("分享链接已成功复制到剪贴板",{variant:"success"})})},[]),ex=y.vs.useBridge("menuAPI"),eb=y.vs.useBridge("topRightButtons"),ew=y.HK.useAPI("searchHeader"),ey=(0,E.W)(),eC=(0,l._)((0,h.useState)(0!==ey.get("hideLeftMenu")),2),eS=eC[0],ej=eC[1],ek=(0,l._)((0,h.useState)(!1),2),eE=ek[0],e_=ek[1],eT=(0,h.useRef)(!1),eI=(0,l._)((0,h.useState)(!1),2),eL=eI[0],eR=eI[1],eZ=(0,h.useMemo)(function(){return(0,H.I)()},[]),eM=eh().onSubmit,eD=(0,l._)((0,h.useState)(!1),2),eA=eD[0],eO=eD[1],eN=(0,l._)((0,h.useState)([]),2),eP=eN[0],eF=eN[1],eH=(0,_.WS)(),eG=(0,l._)((0,h.useState)((null==O?void 0:O.topicId)||null),2),eW=eG[0],eB=eG[1],eq=(0,l._)((0,h.useState)(null==O?void 0:O.topicName),2),ez=eq[0],eU=eq[1],eV=(0,l._)((0,h.useState)(!1),2),eK=eV[0],eQ=eV[1],eY=(0,l._)((0,h.useState)(null),2),eJ=eY[0];eY[1];var eX=(0,h.useMemo)(function(){return new Map},[]),e$=(0,h.useMemo)(function(){return new Map},[]),e0=(0,h.useMemo)(function(){var e="detail";return O&&O.mode&&(e=O.mode),e},[O]),e1=(0,l._)((0,h.useState)("-1"),2),e2=e1[0],e3=e1[1];(0,h.useEffect)(function(){"-1"!=e2&&eW!=e2&&(eQ(!!eW),e3(eW))},[eW,e2]),(0,h.useEffect)(function(){},[eK]);var e5=y.vs.useBridge("leftMenu");(0,h.useEffect)(function(){if(O){var e,n,t,r,i,o=(0,a._)({},O);o.results=[],sessionStorage.setItem("sessionDTO",JSON.stringify(o)),eB(O.topicId),eU(O.topicName),eQ(O.canEditQa),O.searchTopicId?!O.searchTopicHideLogo&&O.topicId?null===(e=e5.current)||void 0===e||e.setHideLeftMenu(O.topicId,O.searchTopicHideLogo):null===(n=e5.current)||void 0===n||n.setHideLeftMenu(O.searchTopicId,O.searchTopicHideLogo):O.topicId?null===(t=e5.current)||void 0===t||t.setHideLeftMenu(O.topicId,O.searchTopicHideLogo):null===(r=e5.current)||void 0===r||r.setHideLeftMenu(null,!1),O.searchTopicHideLogo&&(null===(i=ex.current)||void 0===i||i.hide(),ej(!0))}},[O]);var e4=function(e){if(ej(!0),"left-menu"!=e){var n;null===(n=ex.current)||void 0===n||n.hide()}},e6=(0,h.useCallback)(function(e){var n;if(!v.LM.getState().login&&(null==e?void 0:e.resultCount)&&p.a2.getState().updateResultCount(e.id,e.resultCount),!e){ee(e);return}e.mode&&"standard"!==e.mode||(e.mode="detail"),null===(n=ex.current)||void 0===n||n.updateActiveId(e.id),ef(e),e.page&&W(e.page),ee(e)},[]),e7=function(){if(window.performance){var e=window.performance.getEntriesByType("navigation");if(e.length>0){var n=e[e.length-1];if("reload"!==n.type&&"back_forward"!==n.type)return!0}}return!1},e8=(0,h.useCallback)(function(){(null==O?void 0:O.topicId)?eH.push((0,g.SkV)((0,b.gY)(j.l.SubjectDetail,{id:null==O?void 0:O.topicId}),[{pageUrlParamName:"tsk",requestUrlParamName:"ssi"}])):(null==O?void 0:O.searchTopicId)?eH.push((0,g.SkV)((0,b.gY)(j.l.SubjectDetail,{id:null==O?void 0:O.searchTopicId}),[{pageUrlParamName:"tsk",requestUrlParamName:"ssi"}])):e7()?eH.push(j.l.Home):eH.back()},[null==O?void 0:O.topicId,eH,null==O?void 0:O.searchTopicId]),e9=(0,l._)((0,I.W6)(function(){var n,t=new URL(location.href);if(ey.get("newSearch")||null!=sessionStorage.getItem("newSearch")){clearTimeout(ed),ey.set("newSearch",!1),null===(r=ex.current)||void 0===r||r.hide(),eT.current=!0,eR(!0);var r,i,a=JSON.parse(sessionStorage.getItem("newSearch"));sessionStorage.removeItem("newSearch"),null==a||(0,B.WR)(a.id)||null===(i=ex.current)||void 0===i||i.add(a,!0),eB(a.topicId),e3(a.topicId),eU(a.topicName),eQ(a.canEditQa),e6(a)}else eu&&eu.id===e.params.id&&(e6(eu),eu=null);t.searchParams.has("hideMenu")&&(null===(n=ex.current)||void 0===n||n.hide(),t.searchParams.delete("hideMenu"),_.C$.nextNavigationTick(function(){eH.replace(t.href)},-1))},[ey,e.params.id]),2),ne=(e9[0],e9[1]);(0,h.useLayoutEffect)(function(){ne()},[]),y.vs.useRegister("sessionApi",{sessionCreated:function(e){return(0,i._)(function(){var n,t,r,i;return(0,u.Jh)(this,function(a){switch(a.label){case 0:if(!(0,B.WR)(O.id))return[3,4];return n=(0,b.gY)(j.l.Search,{id:e.id})+"?",ev?n+=ev.toString():n+="q="+encodeURIComponent(e.question),[4,(0,b.PP)(O.id)];case 1:if(!(null!=(t=a.sent())))return[3,3];return[4,(0,b.i9)(e.id,t)];case 2:a.sent(),n+="&".concat(f.Vp.SEARCH_TOPIC_SHARE_KEY,"=").concat(t),a.label=3;case 3:history.replaceState(null,"",n),(r=((null==O?void 0:O.mode)||e.mode)&&e.mode!=(null==O?void 0:O.mode))&&O&&O.results&&1==O.results.length&&(O.results[0].mode=e.mode),e6(Object.assign({},O,e)),r&&$(g.DOL),v.LM.getState().login?null===(i=ex.current)||void 0===i||i.add(e,!1):p.a2.getState().appendRecord(e),a.label=4;case 4:return[2]}})})()}},[O,ev]),y.vs.useRegister("resultAPI",{hideMind:function(e){if(ej(!1),"left-menu"!=e){var n;null===(n=ex.current)||void 0===n||n.open()}},showMind:function(e){e4(e)},updateLoading:function(e){var n,t;M?null===(n=ew.current)||void 0===n||n.toggleShareBtn(!e):null===(t=eb.current)||void 0===t||t.toggle(!e)},setFinishResult:function(e){eZ.resolve(e)},updateNoData:function(e){eA===e||M||eO(e)},appendItem:function(e){var n="".concat(O.groupId,"-").concat(O.engineType||"","-").concat(O.languageDomain);ei.vP.delete("group-session-cache",n);var t=(0,c._)(eP);t.push(e),eF(t)},deleteItem:function(e){if(e<O.results.length){var n=(0,a._)({},O);n.results.splice(e,1),ee(n)}else{var t=(0,c._)(eP);t.splice(e-O.results.length,1),eF(t)}},center:function(){e_(!0)},updateTopic:function(e,n){eB(e),eU(n)},updateQuestion:function(e){var n=(0,o._)((0,a._)({},O),{question:e});n.results[0].question=e,ee(n)}},[O,eP,eA]),y.vs.useRegister("exportMarkdownAPI",{updateExportMarkdownTextMap:function(e,n,t){if(eX.set(e+n,t),t){var r=n+"_count";eX.has(r)||eX.set(r,0),eX.set(r,eX.get(r)+1)}},getExportMarkdownTextMap:function(e,n){return eX.get(e+n)},isEmpty:function(e){return!eX.has(e+"_count")},needWaitMindMap:function(e){var n=y.r$.MindMap+e;return eX.has(n)&&!eX.get(n)},setMindMapMd:function(e,n){e$.set(e,n)},getMindMapMd:function(e){return e$.get(e)}}),y.vs.useRegister("presentationApi",{showSearchResultToPresentationDialog:function(e,n,t){var r;null===(r=nn.current)||void 0===r||r.showDialogByText("转ppt","根据搜索结果生成",n,e,es.N.SEARCH_RESULT,t)}});var nn=(0,h.useRef)(null),nt=(0,l._)((0,h.useState)(!1),2),nr=nt[0],ni=nt[1],na=(0,I.a8)()?(0,el.createPortal)((0,d.jsx)(eo.Z,{ref:nn,open:nr,setOpen:ni,onClose:function(){return ni(!1)}}),document.body):null;(0,h.useEffect)(function(){T.wS.done.then(function(){eT.current||(eT.current=!0,nl.current())})},[]);var no=(0,h.useCallback)(function(){eH.replace(j.l.Home)},[eH]),ns=(0,er.T)({id:e.params.id,searchParam:q,errBack:no,onAppendResult:eF,onUpdateSessionDTO:e6,onSetTopicId:eB,onSetPreTopicId:e3}),nl=(0,h.useRef)(function(){}),nc=(0,m.usePathname)(),nu=(0,h.useCallback)(function(){(0,N.q)(j.l.Search,nc)&&nl.current()},[nc]);(0,h.useLayoutEffect)(function(){nl.current=ns},[ns]),(0,h.useEffect)(function(){return window.addEventListener("popstate",nu),function(){window.removeEventListener("popstate",nu)}},[nu]);var nd=(0,h.useRef)(null),nh=(0,h.useRef)(null),nf=(0,l._)((0,h.useTransition)(),2),np=nf[0],nv=nf[1],nm=(0,h.useCallback)(function(e,n){if(e_(!1),O){var t="".concat(O.groupId,"-").concat(e,"-").concat(n),r=ei.vP.get("group-session-cache",t);if(r){setTimeout(function(){nv(function(){eu=r;var e=new URL(location.href);e.searchParams.set("bs",r.id),e6(r),eH.push(e.href)})},300);return}nh.current=setTimeout(function(){nh.current=null,nd.current&&nv(function(){eu=nd.current;var e=new URL(location.href);e.searchParams.set("bs",nd.current.id),e6(nd.current),nd.current=null,eH.push(e.href)})},300),(0,g.bIb)(O.groupId,e,n).then(function(r){if(r.data.data){var i=r.data.data;0===i.results.length?i.results=[{question:i.question,mode:i.mode,uuid:(0,g.DOL)()}]:ei.vP.set("group-session-cache",t,i,{maxSize:50}),nh.current?nd.current=i:nv(function(){eu=i;var e=new URL(location.href);e.searchParams.set("bs",i.id),e6(i),eH.push(e.href)})}else eM({imgId:O.imgId||void 0,question:O.question,mode:O.mode||S.ZP.defaultMode.get(),model:O.model,engineType:e,scholarSearchDomain:n,searchTopicId:e===f.rG.KNOWLEDGE&&n!==f.wb.ALL?n:null,searchType:"web",groupId:O.groupId})})}},[eM,O]),ng=(0,h.useCallback)(function(e,n){var t=n;if(!t&&O){var r="".concat(O.groupId,"-").concat(y.lf[e],"-"),i="";if(ei.vP.has("group-session-cache")){for(var a=ei.vP.getKeys("group-session-cache"),o=a.length-1;o>=0;o--)if(a[o].startsWith(r)){i=a[o];break}}i&&(t=i.substring(r.length))}nm(y.lf[e],t||f.wb.ALL)},[nm,O]);return{isDomainSwitching:np,showMind:eS,setShowMind:ej,sessionDTO:O,setSessionDTO:ee,shareLinkProTool:ea,requestRecordRef:nl,copyShareLink:eg,finishResultProTool:eZ,isNewSearch:eL,setIsNewSearch:eR,noData:eA,appendSessionResults:eP,center:eE,searchMode:e0,getGroupSessionRecord:nm,setAppendSessionResults:eF,onSearchDomainChange:ng,topicName:ez,setTopicName:eU,topicId:eW,setTopicId:eB,topicAnchor:eJ,searchNormalShareKey:ep,canEditQa:eK,setCanEditQa:eQ,handleSearchPageBack:e8,currentSearchResultId:U,setCurrentSearchResultId:V,preSearchResults:Q,setPreSearchResults:Y,refreshToken:X,setRefreshToken:$,PresentationDialogMemo:na}},ex=function(e){var n=(0,R.k)().fontSizeStyles;return(0,h.useMemo)(function(){return M()(e,function(e){return(0,L.Vl)(n.resultControllers,e)})},[n.resultControllers,e])},eb=h.memo(function(){var e=(0,l._)((0,h.useState)(void 0),2),n=e[0],t=e[1],r=(0,l._)((0,h.useState)(void 0),2),i=r[0],a=r[1],o=(0,l._)((0,h.useState)(!1),2),s=o[0],c=o[1],u=(0,l._)((0,h.useState)(void 0),2),f=u[0],p=u[1],v=(0,l._)((0,h.useState)(9999),2),m=v[0],g=v[1],x=(0,h.useRef)(null),b=(0,h.useRef)(null),w=(0,h.useRef)(!1),C=(0,h.useRef)(null);return y.vs.useRegister("tooltip",{setAnchorAndContent:function(e,n,r,i,o){clearTimeout(x.current),clearTimeout(b.current),C.current&&C.current(),C.current=i,x.current=setTimeout(function(){a(e),t(n),p(r),c(!0),o&&g(o)},300)},cancel:function(e){if(clearTimeout(x.current),e){c(!1);return}clearTimeout(b.current),b.current=setTimeout(function(){c(!1)},100)},keepVisible:function(e){w.current=e}}),(0,h.useEffect)(function(){i&&!s&&(a(void 0),C.current&&C.current(),C.current=null)},[i,s]),i&&(0,d.jsx)(P.u2,{sxs:{contentWrapper:{"&[class]":{padding:"0",border:"none",borderRadius:"8px",fontWeight:400,fontSize:"12px",maxWidth:f?"min(80vw, 600px)":"min(80vw, 400px)",lineHeight:"18px",color:"#667085"}}},placement:"bottom",anchor:i,delay:10,metaPopoverProps:{isAutoUpdate:!1},onMouseEnter:function(){clearTimeout(b.current)},open:s,onOpenChange:function(e){e||(clearTimeout(b.current),b.current=setTimeout(function(){w.current?w.current=!1:c(!1)},100))},zIndex:m,children:n})});function ew(e,n){var t=y.vs.useBridge("resultAPI");return{recommendQuestionClicked:(0,h.useCallback)(function(e){var r,i=(0,b.iu)(e);null===(r=t.current)||void 0===r||r.appendItem({question:i,mode:"research"===n.mode?"detail":n.mode,model:n.model,engineType:n.engineType,searchTopicId:n.searchTopicId})},[e,n.engineType,n.searchTopicId]),getShowRecommendedQuestion:(0,h.useCallback)(function(e,n){return e+"<span style='display: inline-flex;flex-direction: column;justify-content:flex-end;height:24px;vertical-align:middle;'>"+'<svg width="23" transform="translate(0, '.concat(n,')" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.7978 7.07842L16.7978 12.6617C16.7984 12.7633 16.7788 12.864 16.7402 12.9579C16.7016 13.0518 16.6447 13.1372 16.5729 13.209C16.5011 13.2808 16.4157 13.3376 16.3218 13.3762C16.2279 13.4149 16.1272 13.4345 16.0257 13.4339C15.9251 13.4389 15.8247 13.4229 15.7308 13.3867C15.6369 13.3505 15.5516 13.2951 15.4804 13.2239C15.4093 13.1528 15.3538 13.0675 15.3177 12.9736C15.2815 12.8797 15.2654 12.7792 15.2705 12.6787L15.245 8.83488L7.54037 16.5395C7.47355 16.6256 7.38919 16.6964 7.29288 16.7473C7.19658 16.7983 7.09054 16.8281 6.98181 16.8349C6.87308 16.8418 6.76414 16.8254 6.66223 16.7868C6.56033 16.7483 6.46778 16.6885 6.39075 16.6115C6.31371 16.5345 6.25395 16.4419 6.21543 16.34C6.1769 16.2381 6.1605 16.1292 6.16731 16.0204C6.17412 15.9117 6.20398 15.8057 6.25492 15.7094C6.30586 15.6131 6.3767 15.5287 6.46274 15.4619L14.1674 7.75725L10.2472 7.80816C10.0625 7.74968 9.90095 7.63466 9.78523 7.47936C9.66951 7.32405 9.60552 7.13631 9.6023 6.94266C9.60174 6.8411 9.62134 6.74045 9.65995 6.64651C9.69856 6.55258 9.75541 6.46724 9.82723 6.39543C9.89904 6.32362 9.98438 6.26676 10.0783 6.22815C10.1722 6.18954 10.2729 6.16995 10.3745 6.1705L15.8305 6.1111C15.963 6.08607 16.0995 6.09377 16.2284 6.13353C16.3572 6.17328 16.4744 6.24389 16.5697 6.33922C16.665 6.43455 16.7356 6.55172 16.7754 6.68054C16.8151 6.80937 16.8228 6.94595 16.7978 7.07842Z" fill="currentColor"/></svg>')+"</span>"},[])}}function ey(e){var n=e.topOffset,t=(0,s._)(e,["topOffset"]);return(0,d.jsx)(ee.Z,(0,o._)((0,a._)({component:"span"},t),{sx:{display:"inline-flex",flexDirection:"column",justifyContent:"flex-end",height:"24px",verticalAlign:"middle",flexShrink:0},children:(0,d.jsx)($,{style:{transform:"translate(0, ".concat(n,"px)"),flexShrink:0}})}))}function eC(e){var n=e.children,t=e.onClick;return(0,d.jsx)(ee.Z,{sx:{display:"inline-flex",minWidth:0,maxWidth:"calc(100% - 24px)","& p":{margin:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},children:(0,d.jsx)(eS,{onClick:t,children:n})})}function eS(e){var n=e.children,t=e.onClick;return(0,d.jsx)(q.s,{remarkPlugins:[z.Z,U.Z,V.Z],rehypePlugins:[K.Z,[Q.Z,{detect:!1,ignoreMissing:!0}],Y.Z],components:{p:function(e,n){return(0,d.jsx)("p",(0,o._)((0,a._)({},e),{onClick:t}))}},children:n})}},56731:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var r=t(2403),i=t(5853),a=t(57437),o=t(6065),s=t(46387),l=t(54632),c=t(79078),u=t(7870),d=t(89480),h=t(47812);function f(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var n;return(0,i.Jh)(this,function(t){return n=d.Mb.getState().productType(),[2,(0,o.W)("",(0,a.jsx)(s.Z,{sx:{color:"var(--black4)"},textAlign:"center",children:"今日搜索额度已用尽"}),{sx:(0,u.KI)({width:"238px",minWidth:"200px",p:2},3),noHeader:!0,sxs:{content:{mb:2},footer:{justifyContent:"space-between"},actions:{flex:1},cancelAction:{mr:1}},slots:n===h.kv.FREE?{confirm:(0,a.jsx)(l.Z,{variant:"contained",sx:{width:1},children:"升级"}),cancel:(0,a.jsx)(l.Z,{variant:"outlined",sx:{width:1},children:"明天再来"})}:{confirm:(0,a.jsx)(l.Z,{variant:"contained",sx:{width:1},children:"购买搜索额度"}),cancel:(0,a.jsx)(l.Z,{variant:"contained",sx:{width:1},children:"明天再来"})}}).then(function(e){n===h.kv.FREE?(0,c.Iu)():(0,c.qZ)()}).catch(function(n){void 0===n&&e&&e()})]})})).apply(this,arguments)}},53263:function(e,n,t){"use strict";t.d(n,{T:function(){return f}});var r=t(47812),i=t(2265),a=t(79943),o=t(76904),s=t(39207),l=t(89831),c=t(7870),u=t(26058),d=t(22322),h=t(94084);function f(e){var n=e.id,t=e.searchParam,f=e.errBack,p=e.onAppendResult,v=e.onUpdateSessionDTO,m=e.onSetTopicId,g=e.onSetPreTopicId,x=(0,i.useRef)(!1),b=(0,a.WS)(),w=function(){var e=new Date,i=(0,o.uz)(n);if(!(0,o.WR)(i)&&i){var a=(null==t?void 0:t.get("bs"))||i,y={id:a,shareKey:null==t?void 0:t.get("shareKey")};return(0,s.VUo)((0,o.uz)(a),0,10,null==t?void 0:t.get("shareKey"),null==t?void 0:t.get(r.Vp.SEARCH_TOPIC_SHARE_KEY),location.href.indexOf("debug")>-1).then(function(n){if(n.data.errCode===l.cO.TOO_MANY_REQUESTS2)var t=0,r=setInterval(function(){t+=1,"true"===localStorage.getItem("cloudflareVerifySuccess")&&(w(),(0,c.Ev)(r)),t>=300&&(0,c.Ev)(r)},1e3);if(n.data.errCode===l.cO.TOO_MANY_REQUESTS)w(),(0,c.dW)(c.Gy.GET_SESSION_TIME_LOG,(0,o.Zq)(e,y,"get_search_record_too_many_requests",{client:(0,u.Fk)()}));else if(n.data.errCode===l.cO.SENSITIVE_WORD)(0,d.y)(n.data.errMsg,{variant:"warning",autoHideDuration:3e3}),(0,c.dW)(c.Gy.GET_SESSION_TIME_LOG,(0,o.Zq)(e,y,"get_search_record_reject_by_sensitive_check_",{client:(0,u.Fk)()})),null==f||f();else if(n.data.errCode===l.cO.NOT_FOUND)(0,d.y)(n.data.errMsg,{variant:"warning",autoHideDuration:3e3}),null==f||f();else{var i=n.data.data;if(0===i.results.length)i.results.push({question:i.question,mode:i.mode,model:i.model,uuid:(0,s.DOL)()});else{var a="".concat(i.groupId,"-").concat(i.engineType||"","-").concat(i.languageDomain);h.vP.set("group-session-cache",a,i,{maxSize:50})}if(i&&!x.current){x.current=!0;var C=new URL(location.href);if(C.searchParams.has("aq")){var S=C.searchParams.get("aq");C.searchParams.delete("aq");var j=[{question:S,mode:i.mode,engineType:i.engineType}];null==p||p(j),b.replace(C.href)}}return null==v||v(i),null==m||m(i.topicId),null==g||g(i.topicId),(0,c.dW)(c.Gy.GET_SESSION_TIME_LOG,(0,o.Zq)(e,y,"get_search_record_success",{client:(0,u.Fk)()})),i}}).catch(function(n){(0,d.y)("网络错误",{variant:"warning",autoHideDuration:3e3}),(0,c.dW)(c.Gy.GET_SESSION_TIME_LOG,(0,o.Zq)(e,y,"get_search_record_error",{client:(0,u.Fk)()})),null==f||f()})}};return w}},35170:function(e,n,t){"use strict";t.d(n,{GO:function(){return w},H6:function(){return x},sj:function(){return g},vH:function(){return b}});var r=t(5194),i=t(1780),a=t(50059),o=t(57437),s=t(2265),l=t(55833),c=t(78693),u=t(47080),d=t(23665),h=t.n(d),f=t(14382),p=t.n(f),v=t(74634),m=t(8090);function g(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var o=(0,a._)(n,3),c=o[0],u=o[1],d=o[2],h=(0,l.Rx)(c,u,d),f=h.result,p=h.containerRef;h.finished;var g=(0,a._)((0,s.useState)([]),2),x=g[0],w=g[1],y=b({template:c.template,variable:c.variable});(0,s.useEffect)(function(){(0,s.startTransition)(function(){w(y)})},[y]);var C=(0,a._)((0,s.useState)(null),2),S=C[0],j=C[1],k=(0,s.useCallback)(function(e){(0,s.startTransition)(function(){j(e)})},[]);(0,s.useEffect)(function(){var e,n=(null===(e=f.match(/([^#]|^)## [^\n]*\n/g))||void 0===e?void 0:e.length)||0;(0,s.startTransition)(function(){w(y.slice(n))});var t=setInterval(function(){var e,n=null===(e=p.current)||void 0===e?void 0:e.querySelectorAll(".markdown-body h2");n&&(null==n?void 0:n.length)>0&&(k(n),clearInterval(t))},200);return function(){clearInterval(t)}},[f,y]);var E=(0,v.F)(),_=(0,s.useRef)(!1),T=(0,s.useMemo)(function(){return E?function(e){e&&(_.current=!0,m.Z.scroll(e,{duration:500,positioning:{top:l.GG},strategy:"interrupt",onFinished:function(){_.current=!1}}))}:function(e){e&&e.scrollIntoView({behavior:"smooth",block:"start"})}},[E]),I=(0,s.useCallback)(function(e){var n,t=null===(n=p.current)||void 0===n?void 0:n.querySelectorAll(".markdown-body h2");t&&t.length>0&&T(t[e])},[p,T]);return(0,i._)((0,r._)({},h),{outlines:y,skeletonList:x,onOutlineClick:I,titleNodeList:S,isOutlineScrollingRef:_})}function x(e){var n=(0,a._)((0,s.useState)(!1),2),t=n[0],r=n[1];return(0,s.useEffect)(function(){r(e.startLoading)},[e.startLoading]),(0,o.jsxs)(c.Z,{className:h()["skeleton-container"],children:[(0,o.jsx)(u.Z,{className:h().sk,width:t?"100%":0}),(0,o.jsx)(u.Z,{className:h().sk,width:t?"100%":0}),(0,o.jsx)(u.Z,{className:h().sk,width:t?"80%":0}),(0,o.jsx)(u.Z,{className:h().sk,width:t?"20%":0})]})}function b(e){return(0,s.useMemo)(function(){var n;return e.template&&e.variable&&(null===(n=e.template.match(/[^#]## [^\\\n\}]*/g))||void 0===n?void 0:n.map(function(n){var t=n.substring(3),r=t.match(/\[([^\]]*)\]/);if(r){for(var i=r[1].replace(/（.*?）/,""),a=e.variable[i]||"",o=(t=t.replace(/\[([^\]]*)\]/,e.variable[i])).indexOf(a)+a.length,s=0;s<a.length;s++)if(0===t.substring(o).indexOf(a.substring(s))){t=t.substring(0,o)+t.substring(o+(a.length-s));break}}return{title:t}}))||[]},[e.template,e.variable])}var w=p()()},3864:function(e,n,t){"use strict";t.d(n,{QI:function(){return s},_p:function(){return l},ik:function(){return i}});var r,i,a={PDF:{fill:"rgba(217, 45, 32, 0.05)",stroke:"rgba(217, 45, 32, 1)"},Word:{fill:"rgba(1, 92, 171, 0.05)",stroke:"rgba(1, 92, 171, 1)"},PPT:{fill:"rgba(255, 109, 0, 0.05)",stroke:"rgba(255, 109, 0, 1)"}};(r=i||(i={})).Content="content",r.TABLE="table",r.TABLE_FULL="tableFull",r.Mapping="mapping",r.FLOW_CHART="flowChart";var o={PDF:{fill:"rgba(255, 18, 0, 0.05)",stroke:"rgba(255, 18, 0, 1)"},Word:{fill:"rgba(1, 92, 171, 0.05)",stroke:"rgba(1, 92, 171, 1)"},PPT:{fill:"rgba(255, 109, 0, 0.05)",stroke:"rgba(255, 109, 0, 1)"}},s=function(e){return a[e]?{color:a[e],hoverColor:o[e]}:{color:a.PDF,hoverColor:o.PDF}};function l(e,n){var t=new Map,r=0,i=!0,a=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,u=c.link;if(u&&u.display){var d=u.display.refer_id;t.has(d)?u.page>t.get(d).link.page?t.get(d).pages.push({page:u.page,index:c.index}):(t.get(d).pages.unshift({page:u.page,index:c.index}),t.get(d).link=u,t.get(d).num=c.index):t.set(d,{link:u,originListIndex:r,num:c.index,pages:u.page?[{page:u.page,index:c.index}]:[]})}r++}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}var h=Array.from(t.values()).sort(function(e,n){var t=e.link,r=n.link;return!r.video!==t.video?t.video?-1:1:!!t.file_meta==!!r.file_meta?e.link.display.refer_id-n.link.display.refer_id:t.file_meta&&!r.file_meta?1:-1});return h.forEach(function(e){e.pages&&(e.pages=e.pages.sort(function(e,n){return e.page-n.page}),n&&n(e))}),h}},50930:function(e,n,t){"use strict";t.d(n,{X:function(){return y}});var r,i,a=t(50059),o=t(57437),s=t(56316),l=t(8030),c=t(19643),u=t(78693),d=t(2265),h=t(74634),f=t(54632),p=t(94746);function v(){return(v=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var m=function(e){return p.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),r||(r=p.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.667,d:"M3.333 10h13.334m0 0-5-5m5 5-5 5"})))};function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var x=function(e){return p.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),i||(i=p.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.667,d:"M17.5 8.333h-15m10.833-6.667v3.333M6.667 1.666v3.333M6.5 18.333h7c1.4 0 2.1 0 2.635-.273a2.5 2.5 0 0 0 1.092-1.092c.273-.535.273-1.235.273-2.635v-7c0-1.4 0-2.1-.273-2.635a2.5 2.5 0 0 0-1.092-1.093c-.535-.272-1.235-.272-2.635-.272h-7c-1.4 0-2.1 0-2.635.272a2.5 2.5 0 0 0-1.093 1.093C2.5 5.232 2.5 5.933 2.5 7.333v7c0 1.4 0 2.1.272 2.635a2.5 2.5 0 0 0 1.093 1.092c.535.273 1.235.273 2.635.273"})))},b=t(71096),w=t.n(b),y=(0,d.memo)((0,d.forwardRef)(function(e){var n=(0,h.a8)(),t=(0,a._)((0,d.useState)("start"),2),r=t[0],i=t[1],f=(0,a._)((0,d.useState)(e.displayDate||new Date),2),p=f[0],v=f[1],g=(0,a._)((0,d.useState)(e.startDate||null),2),b=g[0],w=g[1],y=(0,a._)((0,d.useState)(e.endDate||null),2),j=y[0],k=y[1],E="end"===r?"start":"end",_="end"===r?j:b,T="end"===r?b:j,I="end"===r?k:w,L=(0,d.useMemo)(function(){return[b,j].map(function(e){return!!e&&{date:e,sx:{borderRadius:100,bgcolor:"#1570EF",color:"white"}}}).filter(function(e){return"object"==typeof e})},[j,b]),R=(0,d.useMemo)(function(){if(b&&j)return[{start:b,end:j}]},[b,j]);return(0,d.useEffect)(function(){var t;n&&(null===(t=e.onDateSelected)||void 0===t||t.call(e,{start:b,end:j},r))},[_]),(0,o.jsxs)(c.Z,{alignItems:"center",spacing:1,children:[(0,o.jsxs)(u.Z,{className:"fr-ac",sx:{px:1,height:38,width:1,boxSizing:"border-box",border:"1px solid #1570EF",borderRadius:"5px",justifyContent:"space-between"},children:[(0,o.jsx)(x,{style:{color:"var(--black3)"}}),(0,o.jsx)(C,{active:"start"===r,filled:!!b,onClick:function(){i("start")},children:b?S(b):"开始时间"}),(0,o.jsx)(m,{style:{color:"#98A2B3",margin:"0 12px"}}),(0,o.jsx)(C,{active:"end"===r,filled:!!j,onClick:function(){i("end")},children:j?S(j):"终止时间"})]}),(0,o.jsx)(u.Z,{sx:{width:1},children:(0,o.jsx)(s.Z,{date:p,onDateChange:v})}),(0,o.jsx)(l.Z,{displayDate:p,baseDate:"end"===r?b:j,baseDisableSide:"end"===r?"before":"after",highlightDates:L,highlightRanges:R,onDateItemClicked:function(e){var n=e.dateObj,t=n.getTime();if(T){var a=t>T.getTime(),o=t<T.getTime();"start"===r&&a||"end"===r&&o?(w(n),k(null),i("end")):(I(n),"start"===r&&i("end"))}else I(n),i(E)}})]})}));function C(e){var n=e.children,t=e.onClick,r=(e.active,e.filled);return(0,o.jsxs)(f.Z,{onClick:t,sx:{justifyContent:"flex-start",flex:1,height:36,p:0,whiteSpace:"nowrap",color:r?"var(--black)":"#98A2B3",px:1,position:"relative",fontWeight:"normal"},color:"action3",children:[n,(0,o.jsx)(u.Z,{sx:{height:3,bgcolor:"primary.main",width:1,transform:"scaleX(".concat(e.active?1:0,")"),transformOrigin:"center",transition:".2s",position:"absolute",bottom:0,left:0}})]})}var S=function(e){return w()(e).format("YYYY-MM-DD")}},9950:function(e,n,t){"use strict";t.d(n,{A:function(){return m}});var r=t(5194),i=t(1780),a=t(46796),o=t(50059),s=t(45008),l=t(57437),c=t(2265),u=t(16210),d=t(78693),h=t(46387),f=t(48365),p=t(7870);function v(){var e=(0,s._)(["\n    color: var(--black);\n    background-color: transparent;\n\n    &.meta-input-label-status-- {\n        &focusing {\n            color: #1570ef;\n        }\n\n        &error {\n            color: #F64C4C\n        }\n\n        &disabeld {\n            color: #CACACA;\n        }\n    }\n\n    display: block;\n    cursor: text;\n    padding: 0;\n    user-select: none;\n    flex: 1;\n"]);return v=function(){return e},e}var m=(0,u.ZP)(function(e){var n=e.children,t=e.className,s=e.cnName,u=e.showIndicateText,v=(0,a._)(e,["children","className","cnName","showIndicateText"]),m=(0,o._)((0,c.useState)(new Set),2),g=m[0],x=m[1],b=(0,f.bc)(),w=(b.controllerAPI,b.fieldState);f.BZ.useRegister("inputLabel",function(){return{optStatusSet:function(e,n){"add"===n?g.add(e):g.delete(e),x(new Set(g))}}},[]);var y=Object.fromEntries(Array.from(g.entries()).map(function(e){var n=(0,o._)(e,1)[0];return["meta-input-label-status--".concat(n),!0]}));return(0,l.jsxs)(d.Z,(0,i._)((0,r._)({className:(0,p.zk)([t,"meta-input-label"],(0,r._)({},y)),component:"label"},v),{children:[(void 0===u||u)&&(void 0!==e.titleSlot?e.titleSlot:(0,l.jsxs)(h.Z,{mb:.5,fontSize:12,color:"inherit",children:["输入",s||(null==w?void 0:w.contextProps.cnName)]})),n]}))},{name:"input-label"})(v())},93593:function(e,n,t){"use strict";var r=t(12249),i=t(5194),a=t(1780),o=t(50059),s=t(45008),l=t(98158),c=t(57437),u=t(2265),d=t(16210),h=t(35108),f=t(36760),p=t.n(f),v=t(43180),m=t(11741),g=t(20144),x=t(39293),b=t(72784);function w(){var e=(0,s._)(["\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n    min-width: 0;\n    \n    .","."," > & {\n        color: #1570Ef;\n    }\n"]);return w=function(){return e},e}function y(){var e=(0,s._)(["\n  font-size: 13px;\n"]);return y=function(){return e},e}n.Z=function(e){var n=(0,o._)((0,u.useState)(!1),2),t=n[0],s=n[1],d=(0,u.useMemo)(function(){return e.options.find(function(n){return n.value===e.value})},[e.options,e.value]),h=(0,o._)((0,u.useState)(null),2),f=h[0],w=h[1],y=(0,o._)((0,v.gZ)(s,200,{anchor:f}),2)[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(b.P,{value:e.value,label:null==d?void 0:d.label,ref:w,sx:e.sx,className:e.className,active:t}),(0,c.jsx)(v.ZP,(0,a._)((0,i._)({anchor:f,open:t,offsetOptions:{mainAxis:4}},y,e.popoverProps),{children:(0,c.jsx)(S,{sx:e.listSx,className:p()(x.M.List,e.listClassName),children:e.renderListItem?e.options.map(e.renderListItem):e.options.map(function(n,t){var i=["string","number","bigint"].includes((0,l._)(n.value))?n.value:t,a=e.value===n.value;return(0,c.jsxs)(m.Z,{className:p()(x.M.ListItem,(0,r._)({},x.M.Selected,a)),onClick:function(){e.onChange(n.value),e.closeAfterClicked&&s(!1)},children:[(0,c.jsx)(C,{className:"meta-selector-option--label",children:n.label}),(0,c.jsx)(x.Z,{className:"meta-selector-option--suffix",sx:{pl:1,ml:"auto",width:20,height:20},children:a&&(0,c.jsx)(g.Z,{})})]},i)})})}))]})};var C=(0,d.ZP)(x.Z)(w(),x.M.ListItem,x.M.Selected),S=(0,d.ZP)(h.Z)(y())},26852:function(e,n,t){"use strict";t.r(n),t.d(n,{Caption:function(){return Z},CustomRangeFilterButton:function(){return A},FilterItemButton:function(){return D},ItemButtonContainer:function(){return M},default:function(){return R}});var r=t(12249),i=t(5194),a=t(46796),o=t(50059),s=t(45008),l=t(57437),c=t(78693),u=t(19643),d=t(16210),h=t(35791),f=t(46387),p=t(9026),v=t(20042),m=t(54632),g=t(2265),x=t(49409),b=t.n(x),w=t(36760),y=t.n(w),C=t(96343),S=t(25590),j=t(71096),k=t.n(j),E=t(77143),_=t(35642),T=t(50930);function I(){var e=(0,s._)(["\n    font-size: 14px;\n    font-weight: 700;\n    line-height: 24px;\n    color: var(--black);\n    \n"]);return I=function(){return e},e}function L(){var e=(0,s._)(["\n    display: flex;\n    justify-content: flex-start;\n    flex-wrap: wrap;\n    margin-left: -12px;\n    & .filter-item-button[class] {\n        \n        min-width: 60px;\n        margin-left: 8px;\n        margin-top: 8px;\n    }\n"]);return L=function(){return e},e}function R(e){var n,t=(0,g.useRef)({formatValue:e.formatValue,typeValue:e.typeValue,timeValue:e.timeValue,timeDate:e.timeDate}),r=(0,g.useRef)(null),i=(0,g.useMemo)(function(){var n,r,i,a,o=t.current;return e.formatValue!==o.formatValue||e.typeValue!==o.typeValue||e.timeValue!==o.timeValue||(null===(n=e.timeDate)||void 0===n?void 0:n.start.getTime())!==(null===(r=o.timeDate)||void 0===r?void 0:r.start.getTime())||(null===(i=e.timeDate)||void 0===i?void 0:i.end.getTime())!==(null===(a=o.timeDate)||void 0===a?void 0:a.end.getTime())},[e.formatValue,e.typeValue,e.timeValue,e.timeDate]);return(0,g.useEffect)(function(){if(!e.open){var n=t.current;e.onFormatChange(n.formatValue),e.onTimeChange(n.timeValue,n.timeDate),e.onTypeChange(n.typeValue)}},[e.open]),(0,l.jsx)(v.Z,{open:e.open,direction:"down",onOpenChange:function(n){var t;null!==(t=r.current)&&void 0!==t&&t.pickerOpen||e.onOpenChange(n)},children:(0,l.jsxs)(c.Z,{className:b()["attach-box"],children:[(0,l.jsxs)(u.Z,{spacing:1,children:[(0,l.jsxs)(c.Z,{children:[(0,l.jsx)(Z,{children:"类型"}),(0,l.jsx)(M,{children:E.ZJ.map(function(n){return(0,l.jsx)(D,{active:n.value===e.typeValue,onClick:function(){e.onTypeChange(n.value)},children:n.label},n.value)})})]}),(0,l.jsxs)(c.Z,{children:[(0,l.jsx)(Z,{children:"时间"}),(0,l.jsxs)(M,{children:[E._Q.map(function(n){return(0,l.jsx)(D,{active:n.value===e.timeValue,onClick:function(){e.onTimeChange(n.value,null)},children:n.label},n.value)}),(0,l.jsx)(A,{active:e.timeValue===_.u.CUSTOM&&!!(null===(n=e.timeDate)||void 0===n?void 0:n.start),ref:r,onRangeChange:function(n){e.onTimeChange(_.u.CUSTOM,n)},children:e.timeDate&&e.timeValue===_.u.CUSTOM?"".concat(O(e.timeDate.start),"至").concat(O(e.timeDate.end)):"自定义时间..."})]})]})]}),(0,l.jsx)(m.Z,{disabled:!i,sx:{width:1,mt:3},onClick:e.onConfirm,variant:"contained",children:"确定"})]})})}var Z=(0,d.ZP)(c.Z)(I()),M=(0,d.ZP)(c.Z)(L());function D(e){var n=e.active,t=e.className,o=e.sx,s=(0,a._)(e,["active","className","sx"]);return(0,l.jsx)(m.Z,(0,i._)({variant:"contained",className:y()("filter-item-button ".concat(t||""),b()["filter-item"],(0,r._)({},b()["filter-item--active"],n)),sx:o},s))}var A=(0,g.forwardRef)(function(e,n){var t=e.onRangeChange,r=(e.active,(0,a._)(e,["onRangeChange","active"])),s=(0,o._)((0,g.useState)(!1),2),u=s[0],d=s[1],v=(0,o._)((0,g.useState)(null),2),x=v[0],b=v[1];(0,g.useImperativeHandle)(n,function(){return{pickerOpen:u}},[u]);var w=(0,g.useCallback)(function(e,n){b(e)},[]),y=function(){setTimeout(function(){d(!1)})},j=(0,o._)((0,g.useState)(!1),2),k=j[0],E=j[1];return(0,g.useEffect)(function(){(0,g.startTransition)(function(){E(!0)})},[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(D,(0,i._)({active:e.active,onClick:function(){d(!0)}},r)),k&&(0,l.jsxs)(h.Z,{open:u,keepMounted:!0,sx:{".MuiDialog-container":{alignItems:"flex-start"},".MuiPaper-root":{p:1,mt:"calc(calc(100vh - 450px) / 2)",width:"min(80vw, 400px)"}},onClose:function(){return y()},children:[(0,l.jsxs)(C.DialogHeader,{children:[(0,l.jsx)(f.Z,{sx:{fontSize:"16px",fontWeight:700,textAlign:"center",width:1,px:4,boxSizing:"border-box"},children:"自定义时间"}),(0,l.jsx)(S.P,{sx:{color:"var(--black)",top:4,right:12},onClick:function(){return y()}})]}),(0,l.jsx)(C.DialogBody,{children:(0,l.jsx)(c.Z,{sx:{mt:1},children:(0,l.jsx)(T.X,{onDateSelected:w})})}),(0,l.jsxs)(p.Z,{sx:{justifyContent:"center"},children:[(0,l.jsx)(m.Z,{variant:"outlined",sx:{color:"var(--black)",borderColor:"var(--border-color2)"},onClick:function(){return y()},children:"取消"}),(0,l.jsx)(m.Z,{variant:"contained",disabled:!x||!x.end||!x.start,onClick:function(){x&&x.end&&x.start&&t({start:x.start,end:x.end}),y()},children:"确定"})]})]})]})}),O=function(e){return k()(e).format("YYYY-MM-DD")}},77143:function(e,n,t){"use strict";t.d(n,{Ke:function(){return b},ZJ:function(){return w},_Q:function(){return y},jE:function(){return x},zh:function(){return g}});var r,i,a,o,s=t(5194),l=t(50059),c=t(57437),u=t(2265),d=t(19643);t(43180),t(19029),t(36760);var h=t(47812),f=t(24757),p=t(35642),v=t(93593);function m(e){var n=(0,l._)((0,u.useState)(w[0]),2),t=n[0],r=n[1];return(0,u.useLayoutEffect)(function(){r(w.find(function(n){return n.value===e.value}))},[e.value]),(0,c.jsx)(v.Z,{value:t.value,popoverProps:{placement:"bottom"},onChange:function(n){e.onChange(n,w.find(function(n){return n.value===e.value}).label)},sx:{fontSize:13,color:"var(--tip-label-color,#667085)",fontFamily:"Noto Sans SC",cursor:"pointer"},options:w})}function g(e){var n={format:"",type:"",rangeType:p.u.UNLIMITED,date:null};if(e&&!Object.values(h.wb).some(function(n){return n===e})){var t,r,i=e.split("|");if(i.length<4)return n;var a=null===(t=i[3].match(/^(\d+-\d+-\d+):/))||void 0===t?void 0:t[1],o=null===(r=i[3].match(/:(\d+-\d+-\d+)$/))||void 0===r?void 0:r[1];Object.assign(n,{format:i[0],type:i[1],rangeType:i[2],date:a&&o?{start:new Date(a),end:new Date(o)}:null})}return n}function x(e){var n=e.date,t=e.format,r=e.rangeType,i=e.type;if(!t&&!i&&!r)return"all";var a=n?"".concat((0,f.p6)(n.start),":").concat((0,f.p6)(n.end)):"";return"".concat(t,"|").concat(i,"|").concat(r||"","|").concat(a)}function b(e){var n=(0,u.useMemo)(function(){return g(e.languageDomain||h.wb.ALL)},[e.languageDomain]);return(0,c.jsxs)(d.Z,{direction:"row",spacing:3,alignContent:"center",children:[(0,c.jsx)(m,{value:n.type,onChange:function(t,r){var i=(0,s._)({},n);i.type=t,e.onChange(x(i))}}),(0,c.jsx)(f.fU,{type:n.rangeType,dateRange:n.date,onChange:function(t,r,i){var a=(0,s._)({},n);a.rangeType=t,t&&r&&i?a.date={start:r,end:i}:a.date=null,e.onChange(x(a))}})]})}(r=a||(a={})).All="",r.Word="word",r.PDF="pdf",r.PPT="ppt",(i=o||(o={})).All="",i.Report="report",i.Article="article",i.Government="government",i.Book="book",i.Convention="convention";var w=[{label:"不限",value:""},{label:"报告",value:"report"},{label:"论文",value:"article"},{label:"书籍",value:"book"},{label:"政府",value:"government"},{label:"标准",value:"convention"}],y=[{label:"不限",value:p.u.UNLIMITED},{label:"一天内",value:p.u.DAY},{label:"一周内",value:p.u.WEEK},{label:"一月内",value:p.u.MONTH},{label:"一年内",value:p.u.YEAR}]},75545:function(e,n,t){"use strict";t.d(n,{E:function(){return i},p:function(){return a}});var r=t(47812),i={pdfEnterPreviewMode:"pdf-enterPreviewMode",pdfExitPreviewMode:"pdf-exitPreviewMode",pdfTranslateClick:"pdf-translateClick",pdfSettingClick:"pdf-settingClick",pdfChangePage:"pdf-changePage",pdfChangeColumn:"pdf-changeColumn",pdfChangeFullScreen:"pdf-changeFullScreen",pdfShowPPT:"pdf-showPPT",pdfClosePPT:"pdf-closePPT"};function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.rG.PDF;if(n==r.rG.PODCAST)return{links:e,map:new Map};var t=new Map;return e.forEach(function(e,n){e.display&&(!t.has(e.display.refer_id)||e.page<t.get(e.display.refer_id).link.page)&&t.set(e.display.refer_id,{link:e,index:n})}),{links:Array.from(t.values()).map(function(e){return e.link}).sort(function(e,n){return e.display.refer_id-n.display.refer_id}),map:t}}},67144:function(e,n,t){"use strict";t.d(n,{Z:function(){return eO}});var r,i,a,o,s,l,c,u,d,h,f,p,v,m,g,x,b,w,y=t(5194),C=t(50059),S=t(57437),j=t(2265),k=t(40100),E=t(59832),_=t(46387),T=t(31876),I=t(40374),L=t(1780),R=t(25222),Z=t(92498),M=t(39155),D=t(58914),A=t(56206),O=t(75825),N=t(56424),P=(0,j.memo)((0,j.forwardRef)(function(e,n){e.markdownText;var t=e.disableGenerate,r=void 0!==t&&t,i=e.onGenerate,a=e.presentationId,o=(0,D.Z)(),s=(0,Z.Z)(function(){i&&i({pageNum:o.pages.toString(),contentDensity:o.wordCount.toString(),lang:o.language})});(0,j.useImperativeHandle)(n,function(){return{handleGenerate:s}});var l=(0,Z.Z)(function(){if(a){var e=(0,N.u)(O.l.Presentation,{id:a});window.open(e,"_blank")}});return(0,S.jsxs)("div",{className:"flex items-end justify-between gap-8",children:[(0,S.jsx)(A.Z,{options:o}),(0,S.jsxs)("div",{className:"flex-1 flex flex-row justify-end gap-4",children:[a&&(0,S.jsx)(M.Z,{variant:"contained",onClick:l,disabled:r,fullWidth:!0,sx:{backgroundColor:"var(--white)",boxShadow:"none",color:"#1570EF",border:"1px solid #1570EF",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",textTransform:"none",height:"48px","&:hover":{backgroundColor:"var(--white)",boxShadow:"none"},"&:disabled":{backgroundColor:"#9ca3af",color:"white"}},children:"历史生成"}),(0,S.jsx)(M.Z,{variant:"contained",onClick:s,disabled:r,fullWidth:!0,sx:{backgroundColor:"#2563eb",color:"white",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",textTransform:"none",height:"48px",boxShadow:"none","&:hover":{boxShadow:"none",backgroundColor:"#1d4ed8"},"&:disabled":{backgroundColor:"#9ca3af",color:"white"}},children:"生成大纲"})]})]})})),F=t(47812),H=t(49744),G={src:"https://static-1.metaso.cn/_next/static/media/3d-message.4453b4a9.png"},W=(0,j.memo)(function(e){var n=e.onGenerate,t=e.consoleText,r=e.disableGenerate,i=(0,C._)((0,j.useState)(""),2);i[0],i[1];var a=(0,C._)((0,j.useState)(""),2),o=a[0],s=a[1],l=(0,j.useRef)(null),c=(0,Z.Z)(function(e){if("Enter"===e.key){var n;null===(n=l.current)||void 0===n||n.handleGenerate()}}),u=(0,Z.Z)(function(e){null==e||e.query}),d=(0,j.useRef)(null);return(0,S.jsxs)("div",{className:"flex flex-col h-full gap-6 box-border font-['Noto_Sans_SC']",children:[(0,S.jsx)("div",{className:"",children:(0,S.jsx)("p",{className:"m-0 text-black font-['Noto_Sans_SC']! font-medium dark:text-white text-base",children:"输入主题，通过搜索相关内容创建"})}),(0,S.jsxs)("div",{className:"flex-1 flex flex-col ",children:[(0,S.jsx)("div",{className:"relative",children:(0,S.jsx)(R.HomeSearchBox,{disableQuickAccess:!0,disableImageSearch:!0,disablePersonal:!0,hideItems:[F.rG.IMAGE,F.rG.WORKFLOW,F.rG.KNOWLEDGE],sxs:{wrapper:(0,y._)({maxWidth:"100%!important","&:focus-within":{border:"2px solid var(--search-generator-index) !important"},"& .send-arrow-button":{display:"none"}},o.length>0&&{border:"2px solid var(--search-generator-index) !important"})},hideDsModelSetting:!0,hideImageSearch:!0,hideDeepResearchModel:!0,onSubmit:u,inputRef:d,onArgumentChange:s,placement:"描述你想要生成的内容",onKeyUp:c})}),(0,S.jsx)("div",{className:"w-full flex-1 flex justify-center mt-4 py-4 px-2 box-border rounded-lg bg-[#F9F9F9] dark:bg-gray-800",children:t&&t.length>0?(0,S.jsx)(H.Z,{messages:t,className:"text-[13px] text-[#485365B2] dark:text-gray-300 h-[135px] w-full box-border leading-[1.5]",style:{"--cursor-color":"#485365B2","--cursor-height":"11px","--cursor-width":"2px","--cursor-margin-left":"2px"}}):(0,S.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,S.jsx)("img",{src:G.src,alt:"Message",className:"w-[100px] h-[100px] object-cover"}),(0,S.jsx)(_.Z,{className:"text-[#98A2B3] dark:text-white text-xs",children:"暂无搜索过程"})]})})]}),(0,S.jsx)(P,{ref:l,markdownText:o,disableGenerate:r||!o.trim(),onGenerate:function(e){var t;n((0,L._)((0,y._)({},e),{question:(null===(t=d.current)||void 0===t?void 0:t.getTexts()[0])||"",scope:"",generateType:1}))}})]})}),B=t(74475),q=(0,j.memo)(function(e){var n=e.onGenerate,t=e.disableGenerate,r=e.sourceId,i=e.sourceType,a=e.title,o=e.initText,s=e.presentationId,l=(0,C._)((0,j.useState)(o||""),2),c=l[0],u=l[1],d=(0,j.useRef)(null),h=(0,j.useRef)(null),f=function(){d.current&&u(d.current.textContent||"")};(0,B.Z)(function(){o&&d.current&&(d.current.innerHTML=o)});var p=!c||""===c.trim(),v=(0,Z.Z)(function(e){if("Enter"===e.key&&!e.shiftKey&&c.length>0){var n;e.preventDefault(),e.stopPropagation(),null===(n=h.current)||void 0===n||n.handleGenerate()}});return(0,S.jsxs)("div",{className:"flex flex-col h-full gap-6",children:[(0,S.jsx)("div",{className:"",children:(0,S.jsx)("p",{className:"m-0 text-black font-['Noto_Sans_SC']! font-medium dark:text-white text-base",children:a||"粘贴您要使用的笔记、大纲或文本内容"})}),(0,S.jsxs)("div",{className:"flex-1 relative overflow-auto",children:[(0,S.jsx)("div",{ref:d,contentEditable:!0,onKeyUp:v,onInput:function(e){f()},onPaste:function(e){e.preventDefault();var n=e.clipboardData.getData("text/plain");document.execCommand("insertText",!1,n)},className:" w-full h-full p-4 box-border border-2 border-gray-300 rounded-lg text-sm text-gray-700 dark:text-[#F0F0F0] leading-relaxed outline-none overflow-auto resize-none hover:border-gray-300 dark:hover:border-gray-500 focus:border-blue-600 dark:focus:border-blue-400 transition-colors duration-200 ",style:{minHeight:"200px",fontFamily:"inherit",fontSize:"14px",lineHeight:"1.5"},suppressContentEditableWarning:!0}),p&&(0,S.jsx)("div",{className:" absolute top-4 left-5 text-gray-400 text-sm pointer-events-none select-none ",style:{fontSize:"14px",lineHeight:"1.5"},children:"输入提示词或者粘贴文本"})]}),(0,S.jsx)(P,{presentationId:s,ref:h,markdownText:c,disableGenerate:!c.trim()||t,onGenerate:function(e){n((0,L._)((0,y._)({},e),{text:c,generateType:2,sourceId:r,sourceType:i}))}})]})}),z=t(12249),U=t(16210),V=t(5186),K=t(94746);function Q(){return(Q=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var Y=function(e){return K.createElement("svg",Q({xmlns:"http://www.w3.org/2000/svg",width:156,height:71,fill:"none",viewBox:"0 0 156 71"},e),r||(r=K.createElement("g",{clipPath:"url(#clip0_9754_99579)",opacity:.3},K.createElement("path",{fill:"#FFA000",d:"m35.649 33.206-15.08 3.07-4.035-2.668-8.378 1.707a3.43 3.43 0 0 0-2.669 4.033l1.365 6.703 33.513-6.826-.682-3.35a3.43 3.43 0 0 0-4.034-2.67"}),K.createElement("path",{fill:"#FFCA28",d:"m35.646 33.205-26.81 5.46a3.43 3.43 0 0 0-2.67 4.034L9.58 59.455a3.43 3.43 0 0 0 4.034 2.67l26.81-5.461a3.43 3.43 0 0 0 2.669-4.034L39.68 35.873a3.43 3.43 0 0 0-4.034-2.668"}))),i||(i=K.createElement("g",{opacity:.4},K.createElement("path",{fill:"#D92D20",d:"M125.194 32.277a3.484 3.484 0 0 1 3.021-3.893l11.667-1.471 10.219 7.93 2.234 17.716a3.484 3.484 0 0 1-3.02 3.893l-17.285 2.18a3.485 3.485 0 0 1-3.893-3.02z"}),K.createElement("path",{fill:"#fff",d:"m139.883 26.913 10.219 7.93-5.618.708a3.485 3.485 0 0 1-3.893-3.02z",opacity:.3}),K.createElement("path",{fill:"#fff",d:"m132.786 52.533-.713-5.657 2.232-.282q.643-.081 1.127.108.483.186.776.59.294.4.366.963.07.564-.118 1.026a1.7 1.7 0 0 1-.62.76q-.428.297-1.08.38l-1.422.18-.121-.96 1.229-.154q.345-.045.554-.19a.8.8 0 0 0 .295-.377q.086-.23.051-.51a1.03 1.03 0 0 0-.175-.476.77.77 0 0 0-.379-.287 1.24 1.24 0 0 0-.589-.046l-.807.102.59 4.679zm5.036-.636-.713-5.656 2.231-.282q.644-.081 1.128.108.483.186.776.59.294.4.366.963.07.564-.118 1.025a1.7 1.7 0 0 1-.62.76q-.428.3-1.08.38l-1.422.18-.121-.958 1.229-.155q.345-.045.554-.19a.8.8 0 0 0 .295-.378q.085-.23.051-.508a1.03 1.03 0 0 0-.175-.478.77.77 0 0 0-.379-.286 1.24 1.24 0 0 0-.589-.046l-.807.102.59 4.679zm4.232-5.278-.125-.986 4.646-.586.124.986-1.731.218.589 4.67-1.182.15-.59-4.67z"}))),a||(a=K.createElement("path",{fill:"#757BF0",d:"M17.653 26.936a5.63 5.63 0 0 1 3.859-6.962l18.26-5.236 18.275 10.13 7.951 27.729a5.63 5.63 0 0 1-3.859 6.961l-27.052 7.758a5.63 5.63 0 0 1-6.962-3.86z"})),o||(o=K.createElement("path",{fill:"#fff",d:"m39.766 14.737 18.275 10.13-8.792 2.521a5.63 5.63 0 0 1-6.962-3.859z",opacity:.3})),s||(s=K.createElement("path",{fill:"#fff",d:"m29.29 59.687-2.539-8.853 1.872-.537 1.047 3.653 3.8-1.09-1.047-3.653 1.867-.535 2.54 8.853-1.868.536-1.05-3.658-3.8 1.09 1.05 3.657zm6.649-9.818-.443-1.543 7.272-2.085.442 1.543-2.71.777 2.096 7.31-1.85.531-2.096-7.31zm8.026-3.972 2.309-.661 4.143 5.249.104-.03.733-6.648 2.308-.662L56.101 52l-1.816.52-1.652-5.762-.074.021-.65 6.376-1.237.355-3.937-5.084-.074.021 1.659 5.784-1.816.52zm13.678 5.66-2.538-8.854 1.871-.537 2.096 7.31 3.796-1.088.443 1.544z"})),l||(l=K.createElement("path",{fill:"#5C8DEF",d:"M110.568 24.679a4.29 4.29 0 0 1 5.304-2.94l13.913 3.99 7.718 13.923-6.058 21.126a4.29 4.29 0 0 1-5.304 2.94l-20.612-5.91a4.29 4.29 0 0 1-2.94-5.304z"})),c||(c=K.createElement("path",{fill:"#fff",d:"m129.781 25.729 7.718 13.923-6.698-1.92a4.29 4.29 0 0 1-2.941-5.305z",opacity:.3})),u||(u=K.createElement("path",{fill:"#fff",d:"m109.957 52.894-2.391-.686 1.934-6.745 2.411.69q1.018.293 1.636.909.62.612.798 1.48.183.868-.119 1.919-.301 1.053-.918 1.697-.612.645-1.469.837-.855.193-1.882-.101m-.615-1.499.906.26q.633.181 1.128.08a1.5 1.5 0 0 0 .854-.514q.357-.414.574-1.168.214-.748.129-1.285a1.5 1.5 0 0 0-.448-.885q-.367-.348-1-.529l-.909-.26zm12.138 1.153q-.317 1.103-.957 1.757a3 3 0 0 1-1.472.858 3.33 3.33 0 0 1-1.724-.056 3.3 3.3 0 0 1-1.496-.871 3 3 0 0 1-.791-1.507q-.193-.893.122-1.993.316-1.102.954-1.758a3 3 0 0 1 1.468-.855 3.3 3.3 0 0 1 1.731.054q.892.255 1.49.87.601.61.795 1.503.197.894-.12 1.998m-1.446-.415q.204-.715.131-1.267a1.7 1.7 0 0 0-.382-.915 1.67 1.67 0 0 0-.83-.513q-.518-.147-.975-.005a1.7 1.7 0 0 0-.813.573q-.352.43-.557 1.145-.204.714-.135 1.266.074.552.386.916.313.365.83.513.518.147.975.005.459-.144.81-.574.355-.429.56-1.144m8.744 1.413-1.443-.413a1.5 1.5 0 0 0-.019-.544 1.3 1.3 0 0 0-.205-.465 1.4 1.4 0 0 0-.373-.364 1.8 1.8 0 0 0-.513-.236q-.525-.15-.987-.002-.463.146-.818.578-.355.43-.556 1.131-.207.722-.134 1.274.076.552.394.915.317.36.827.508.286.082.552.076.269-.005.501-.095.234-.093.42-.268a1.5 1.5 0 0 0 .315-.43l1.441.42a2.804 2.804 0 0 1-1.353 1.412 2.9 2.9 0 0 1-1.042.279 3.4 3.4 0 0 1-1.219-.14q-.901-.258-1.497-.87a3 3 0 0 1-.78-1.504q-.187-.891.129-1.991.316-1.104.953-1.759a3 3 0 0 1 1.465-.856 3.3 3.3 0 0 1 1.717.05q.587.17 1.04.477.457.31.755.737.298.425.412.949.117.525.018 1.131"})),d||(d=K.createElement("path",{fill:"#D92D20",d:"M57.14 8.312a7.55 7.55 0 0 1 7.55-7.55h25.482l19.819 19.819v38.694a7.55 7.55 0 0 1-7.55 7.55h-37.75a7.55 7.55 0 0 1-7.55-7.55z"})),h||(h=K.createElement("path",{fill:"#fff",d:"M90.172.762 109.99 20.58H97.722a7.55 7.55 0 0 1-7.55-7.55z",opacity:.3})),f||(f=K.createElement("path",{fill:"#fff",d:"M67.992 55.748V43.393h4.874q1.407 0 2.395.537.99.531 1.508 1.478.525.942.525 2.172t-.53 2.172a3.66 3.66 0 0 1-1.539 1.466q-1.001.524-2.425.524h-3.107V49.65h2.685q.754 0 1.243-.26.495-.265.736-.73.246-.47.247-1.079 0-.615-.248-1.074a1.65 1.65 0 0 0-.735-.718q-.495-.26-1.255-.26h-1.762v10.22zm15.379 0h-4.38V43.393h4.416q1.864 0 3.21.742a5 5 0 0 1 2.068 2.118q.73 1.38.73 3.306 0 1.93-.73 3.318a5 5 0 0 1-2.08 2.129q-1.353.742-3.234.742m-1.768-2.238h1.659q1.159 0 1.948-.41.797-.417 1.195-1.285.404-.874.404-2.256 0-1.37-.404-2.238-.398-.87-1.188-1.28t-1.949-.41h-1.665zm9.747 2.238V43.393h8.18v2.154h-5.568v2.944h5.025v2.154h-5.025v5.103z"})),p||(p=K.createElement("defs",null,K.createElement("clipPath",{id:"clip0_9754_99579"},K.createElement("path",{fill:"#fff",d:"m.086 29.977 40.215-8.19 8.19 40.215-40.215 8.19z"})))))};function J(){return(J=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var X=function(e){return K.createElement("svg",J({xmlns:"http://www.w3.org/2000/svg",width:21,height:20,fill:"none",viewBox:"0 0 21 20"},e),v||(v=K.createElement("path",{stroke:"currentColor",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 3.75c0-.69.56-1.25 1.25-1.25h10.534L18 5.503V16.25c0 .69-.56 1.25-1.25 1.25H4.25c-.69 0-1.25-.56-1.25-1.25z"})),m||(m=K.createElement("path",{stroke:"currentColor",strokeLinejoin:"round",strokeWidth:1.5,d:"m10.506 2.5-.003 3.077c0 .142-.187.256-.417.256H6.753c-.23 0-.417-.114-.417-.256V2.5z"})),g||(g=K.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.25 2.5h10.534M6.336 10.833h8.333M6.336 14.167h4.17"})))};function $(){return($=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var ee=function(e){return K.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg",width:21,height:20,fill:"none",viewBox:"0 0 21 20"},e),x||(x=K.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18 7.5v9.167c0 .46-.373.833-.833.833H3.833A.833.833 0 0 1 3 16.667V7.5"})),b||(b=K.createElement("path",{stroke:"currentColor",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 3.333c0-.46.373-.833.833-.833h13.334c.46 0 .833.373.833.833V7.5H3z"})),w||(w=K.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.497 5.834a.833.833 0 1 0 0-1.667.833.833 0 0 0 0 1.667M7.997 5.834a.833.833 0 1 0 0-1.667.833.833 0 0 0 0 1.667M10.497 5.834a.833.833 0 1 0 0-1.667.833.833 0 0 0 0 1.667",clipRule:"evenodd"})))},en=t(43180),et=t(48365),er=t(85721),ei=t(38305),ea=t(92664),eo={fontSize:16,fontWeight:700,color:"var(--custom-tooltip-bg)",fontFamily:"Noto Sans SC",mb:.3125},es={boxShadow:"4px 4px 4px 0px #0000001A",border:"solid 1px var(--border-color)",borderRadius:"1px",padding:"16px",width:"368px"},el={width:"100%",display:"flex",justifyContent:"space-between"},ec={width:"100%"},eu={bgcolor:"var(--white)"},ed=j.memo(function(e){var n=e.anchor,t=e.websitePopoverOpen,r=e.onToggleWebsitePopover,i=e.onConfirm,a=e.websiteUrl,o=e.onChangeWebsiteUrl,s=j.useRef(null),l=(0,et.Q$)(),c=(0,C._)(j.useState(a||""),2),u=c[0],d=c[1],h=(0,Z.Z)(function(){var e;(null===(e=l.current)||void 0===e?void 0:e.validate().every(function(e){return 0===e.hitRules.length}))&&i(u)}),f=(0,Z.Z)(function(e){var n=e.target.value;d(n),n.match(F.Wh)?o(n):o("")}),p=(0,Z.Z)(function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),h())}),v=j.useMemo(function(){return{mainAxis:-4,crossAxis:2}},[]),m=j.useMemo(function(){return{zIndex:9999}},[]);return(0,en.bQ)({anchor:function(){return n},popover:function(){var e;return null===(e=s.current)||void 0===e?void 0:e.nodeRef.current}},t,function(){h(),r(!1)}),(0,S.jsxs)(en.ZP,{open:t,isAutoUpdate:!0,ref:s,style:m,offsetOptions:v,sxs:{contentWrapper:es},anchor:n,placement:"top-start",children:[(0,S.jsx)(_.Z,{sx:eo,children:"上传网页"}),(0,S.jsx)(et.mG,{_ref:l,sx:el,children:(0,S.jsx)(et.xf,{name:"fileName",children:(0,S.jsxs)(er.W,{sx:ec,children:[(0,S.jsx)(ea.H,{type:"text",autoComplete:"off",placeholder:"https://www.example.com",autoFocus:!0,sx:eu,value:u,onChange:f,onKeyDown:p}),(0,S.jsx)(ei.R,{rules:[{validate:function(e){return!!u.match(F.Wh)},message:"请输入正确格式的URL",isSkip:function(e){return!e.dirty||e.focused}}]})]})})})]})}),eh={color:"var(--black3)",borderColor:"var(--card-border-color)",backgroundColor:"var(--white)",width:"100%",borderRadius:"0.625rem",padding:"12px 24px",textTransform:"none","&:hover":{borderColor:"var(--card-border-color)",backgroundColor:"var(--white)"}},ef=t(2403),ep=t(5853),ev=t(39207),em=t(89831),eg=t(7870),ex=t(78156),eb=t(64654),ew=t(27648),ey=t(71632),eC=function(e){for(var n=e.size,t=n<=5242880?n:5242880,r=0,i=Math.min(t,n),a=[];r<n;){var o=e.slice(r,i);a.push(o),i=Math.min((r=i)+t,n)}return a},eS=t(20670),ej=(0,j.memo)(function(e){var n,t,r,i,a,o,s,l,c,u,d,h,f,p,v,m,g,x,b,w,k,E,T,I,R,D,A,N,F,H,G=e.onGenerate,W=e.disableGenerate,B=(0,C._)((0,j.useState)(!1),2),q=B[0],z=B[1],U=(0,j.useRef)(null),V=(t=(n=(0,C._)((0,ex.Z)(null),2))[0],r=n[1],a=(i=(0,C._)((0,ex.Z)(null),2))[0],o=i[1],l=(s=(0,C._)((0,ex.Z)(!1),2))[0],c=s[1],d=(u=(0,C._)((0,ex.Z)(null),2))[0],h=u[1],p=(f=(0,C._)((0,ex.Z)(0),2))[0],v=f[1],g=(m=(0,C._)((0,ex.Z)(!1),2))[0],x=m[1],w=(b=(0,C._)((0,ex.Z)(0),2))[0],k=b[1],E=(0,j.useRef)(void 0),T=(0,Z.Z)(function(e,n){E.current&&clearInterval(E.current),E.current=setInterval(function(){p<e?v(p+1):clearInterval(E.current)},Math.floor(n/e))}),I=(0,Z.Z)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o(null),v(0),x(!1),r(null),h(e),e?c(!0):c(!1),E.current&&clearInterval(E.current)}),R=(0,ey.a)({queryKey:["document-tokens",a],enabled:!1,queryFn:(0,ef._)(function(){var e;return(0,ep.Jh)(this,function(n){switch(n.label){case 0:if(!a)return[2,0];return[4,(0,ev.JCq)(a)];case 1:if(0===(e=n.sent()).data.errCode)return k(e.data.data.tokens||0),[2,e.data.data.tokens||0];return[2,0]}})})}),(0,ey.a)({queryKey:["book-upload",a],enabled:!!a,queryFn:(0,ef._)(function(){var e,n;return(0,ep.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),clearInterval(E.current),[4,(0,ev.SFo)([a])];case 1:if(0!=(e=t.sent()).data.errCode)return I(),(0,eb.yv)(e.data.errMsg,{variant:"error",autoHideDuration:3e3}),[2];if(null==(n=e.data.data[a||""]))return I(),(0,eb.yv)("上传失败",{variant:"error",autoHideDuration:3e3}),[2];if(n>=100)o(null),r(a),x(!0),c(!1),R.refetch();else{if(-1===n)return I(),(0,eb.yv)("处理失败，请重新上传",{variant:"error",autoHideDuration:3e3}),[2];v(Math.floor(.7*n)+30)}return[2,e||{}];case 2:return t.sent(),I(),(0,eb.yv)("上传失败",{variant:"error",autoHideDuration:3e3}),[2];case 3:return[2]}})}),refetchInterval:1e3,staleTime:1e3}),D=(0,Z.Z)(function(e){T(30,3e3);var n=new FormData;n.append("file",e),n.append("fileName",e.name),n.append("type",(0,eg.JB)(e)),(0,ev.hCt)(n).then(function(e){0==e.data.errCode?o(e.data.data.id):e.data.errCode==em.cO.USER_CREDIT_RUN_OUT?(I(),(0,eb.yv)((0,S.jsxs)(S.Fragment,{children:["您的计算额度不足，",(0,S.jsx)(ew.default,{href:O.l.TopUp,children:"去充值→"})]}),{variant:"warning",autoHideDuration:5e3})):(I(),(0,eb.yv)(e.data.errMsg,{variant:"error",autoHideDuration:1500}))}).catch(function(e){I(),(0,eb.yv)("添加到书架失败",{variant:"error",autoHideDuration:1500})})}),N=(0,Z.Z)((A=(0,ef._)(function(e){var n,t,r,i,a,s,l;return(0,ep.Jh)(this,function(c){switch(c.label){case 0:return T(Math.floor(1/((n=eC(e)).length+1)*30),3e3),[4,(0,ev.kEs)(e.type,e.size,e.name,(0,eg.JB)(e))];case 1:if(0!=(t=c.sent()).data.errCode)return[3,9];r=t.data.data.id,i=0,c.label=2;case 2:if(!(i<n.length))return[3,7];return T(Math.floor(((a=i+1)+1)/(n.length+1)*30),3e3),(s=new FormData).append("file",n[i]),s.append("partNum",a.toString()),[4,(0,ev.Sqh)(r,s,{})];case 3:if(0!==c.sent().data.errCode)return[3,4];return[3,6];case 4:return[4,H(r,s,3)];case 5:if(!c.sent().result)return I(),(0,eb.yv)("重试结束，上传失败",{variant:"error",autoHideDuration:1500}),[2];c.label=6;case 6:return i++,[3,2];case 7:return[4,(0,ev.mSW)(r,n.length)];case 8:if(0===(l=c.sent()).data.errCode)return o(t.data.data.id),[2];return 500!==l.data.errCode||(I(),(0,eb.yv)("上传失败",{variant:"error",autoHideDuration:1500})),[3,10];case 9:t.data.errCode==em.cO.USER_CREDIT_RUN_OUT?(I(),(0,eb.yv)((0,S.jsxs)(S.Fragment,{children:["您的计算额度不足，",(0,S.jsx)(ew.default,{href:O.l.TopUp,children:"去充值→"})]}),{variant:"warning",autoHideDuration:5e3})):(I(),(0,eb.yv)(t.data.errMsg,{variant:"error",autoHideDuration:1500})),c.label=10;case 10:return[2]}})}),function(e){return A.apply(this,arguments)})),F=(0,ef._)(function(e,n,t){return(0,ep.Jh)(this,function(r){var i;return[2,new Promise((i=(0,ef._)(function(r,i){var a;return(0,ep.Jh)(this,function(i){switch(i.label){case 0:a=0,i.label=1;case 1:if(!(a<t))return[3,4];return[4,(0,ev.Sqh)(e,n,{})];case 2:if(0===i.sent().data.errCode)return r({result:!0}),[2];i.label=3;case 3:return a++,[3,1];case 4:return r({result:!1}),[2]}})}),function(e,n){return i.apply(this,arguments)}))]})}),H=function(e,n,t){return F.apply(this,arguments)},{uploading:l,upload:(0,Z.Z)(function(e){I(e),e.size<31457280?D(e):N(e)}),progress:p,fileId:t,uploadingFile:d,finished:g,reset:I,tokens:w}),K=V.uploading,Q=V.upload,J=V.fileId,$=V.progress,en=V.uploadingFile,et=V.finished,er=V.reset,ei=V.tokens,ea=(0,C._)((0,j.useState)(null),2),eo=ea[0],es=ea[1],el=(0,C._)((0,j.useState)(null),2),ec=el[0],eu=el[1],eS=(0,j.useRef)(null),ej=(0,C._)((0,j.useState)(!1),2),eE=ej[0],e_=ej[1],eT=(0,j.useRef)(null),eI=(0,C._)((0,j.useState)(),2),eL=eI[0],eR=eI[1];(0,j.useEffect)(function(){eo?eR({name:eo,type:"html",size:0}):en&&eR({name:en.name,type:en.type,size:en.size})},[en,eo]);var eZ=(0,j.memo)(function(e){var n=e.type;return e.label,(0,S.jsx)("div",{className:"flex flex-col items-center",children:(0,S.jsx)("div",{className:"w-12 h-12 ".concat({HTML:"bg-blue-500",PDF:"bg-red-500",DOC:"bg-blue-600",TXT:"bg-gray-500"}[n]||"bg-gray-400"," rounded-lg flex items-center justify-center text-white text-xs font-bold shadow-md"),children:n})})}),eM=(0,Z.Z)(function(e){Q(e)}),eD=(0,Z.Z)(function(e){e.preventDefault(),z(!0)}),eA=(0,Z.Z)(function(e){e.preventDefault(),z(!1)}),eO=(0,Z.Z)(function(e){e.preventDefault(),z(!1);var n=Array.from(e.dataTransfer.files);n.length>0&&eM(n[0])}),eN=(0,Z.Z)(function(){var e;null===(e=U.current)||void 0===e||e.click()}),eP=(0,Z.Z)(function(){e_(!eE)}),eF=(0,Z.Z)(function(e){e_(!1),es(e),eu(e),setTimeout(function(){var e;null===(e=eT.current)||void 0===e||e.handleGenerate()},0)}),eH=(0,Z.Z)(function(e){var n=e.target.files;n&&n.length>0&&(eM(n[0]),U.current&&(U.current.value=""))}),eG=(0,Z.Z)(function(){if(eo)es(null),setTimeout(function(){e_(!0)},0);else{var e;er(),U.current&&(U.current.value=""),null===(e=U.current)||void 0===e||e.click()}}),eW=(0,Z.Z)(function(){es(null),er(),U.current&&(U.current.value="")}),eB=function(e){return e.includes("pdf")?"PDF":e.includes("word")||e.includes("doc")?"DOC":e.includes("html")?"HTML":e.includes("text")?"TXT":"FILE"};return(0,S.jsxs)("div",{className:"flex flex-col h-full gap-6",children:[(0,S.jsx)("div",{className:"flex-1 flex flex-col ",children:(0,S.jsxs)("div",{className:"\n            flex-1\n              border-1 border-dashed rounded-[0.625rem] p-5 text-center transition-colors\n              flex flex-col justify-between\n              ".concat(q?"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-[var(--card-border-color)] bg-[var(--code-text-bg)]","\n            "),onDragOver:eD,onDragLeave:eA,onDrop:eO,children:[(0,S.jsx)("div",{className:"flex flex-col justify-center items-center flex-1",children:(et||eo)&&eL?(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"flex justify-center items-center gap-4 mb-6",children:(0,S.jsx)(eZ,{type:eB(eL.type),label:eB(eL.type)})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"text-gray-600 dark:text-gray-300 mb-2 w-[400px] truncate",children:eL.name}),(0,S.jsx)("div",{className:"text-gray-400 dark:text-gray-500 text-xs",children:eo?"".concat(eB(eL.type)):"".concat(eB(eL.type),"\xb7").concat(function(e){if(0===e)return"0 B";var n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(1))+" "+["B","KB","MB","GB"][n]}(eL.size),"\xb7约").concat(function(e){if("number"!=typeof e||isNaN(e))return"0";var n=Math.abs(e),t=0,r=1;n>=1e8?(t=3,r=1e8):n>=1e4?(t=2,r=1e4):n>=1e3&&(t=1,r=1e3);var i=(e/r).toFixed(1);return(i=i.replace(/\.0+$/,""))+["","千","万","亿"][t]}(ei),"字")})]})]}):(0,S.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,S.jsx)("div",{className:"flex justify-center items-center gap-4 mb-6",children:(0,S.jsx)(Y,{})}),K?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"text-gray-400 dark:text-gray-500 text-xs mb-2 w-[400px] truncate",children:null==eL?void 0:eL.name}),(0,S.jsx)(ek,{variant:"determinate",value:$,className:"mb-2"}),(0,S.jsxs)("span",{className:"text-metaso-blue text-xs",children:[$,"%"]})]}):(0,S.jsx)(_.Z,{className:"text-gray-600 dark:text-gray-300 mb-8",children:"点击上传或者拖拽文件到此处"})]})}),(0,S.jsx)("div",{className:" mt-8 ",children:!K&&(0,S.jsx)(S.Fragment,{children:J||eo?(0,S.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,S.jsx)(M.Z,{variant:"outlined",onClick:eG,sx:eh,children:"重新上传"}),(0,S.jsx)(M.Z,{variant:"outlined",onClick:eW,sx:eh,children:"取消"})]}):(0,S.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,S.jsxs)(M.Z,{variant:"outlined",onClick:eN,sx:eh,children:[(0,S.jsx)(X,{className:"mr-1"})," 上传文件"]}),(0,S.jsxs)(M.Z,{variant:"outlined",onClick:eP,sx:eh,ref:eS,children:[(0,S.jsx)(ee,{className:"mr-1"})," 在线网页"]})]})})})]})}),(0,S.jsx)(ed,{anchor:eS.current,websitePopoverOpen:eE,onToggleWebsitePopover:eP,onConfirm:eF,websiteUrl:ec,onChangeWebsiteUrl:es}),(0,S.jsx)(P,{ref:eT,markdownText:"",disableGenerate:!J&&!eo||W,onGenerate:function(e){J?G((0,L._)((0,y._)({},e),{fileId:J,generateType:3})):eo&&G((0,L._)((0,y._)({},e),{websiteUrl:eo,generateType:4}))}}),(0,S.jsx)("input",{ref:U,type:"file",style:{display:"none"},onChange:eH,accept:".pdf,.doc,.docx,.html,.txt,.md"})]})}),ek=(0,U.ZP)(V.Z)(function(e){var n,t=e.theme;return n={height:10,width:"160px",borderRadius:5},(0,z._)(n,"&.".concat(eS.Z.colorPrimary),(0,y._)({backgroundColor:"#1570EF42"},t.applyStyles("dark",{backgroundColor:"#1570EF42"}))),(0,z._)(n,"& .".concat(eS.Z.bar),(0,y._)({borderRadius:5,backgroundColor:"#1570EF"},t.applyStyles("dark",{backgroundColor:"#1570EF"}))),n}),eE=t(10464),e_=t.n(eE),eT=t(51622),eI=t(50517),eL=t(26398),eR=t(23301),eZ=t(22322),eM=(0,j.memo)(function(){return(0,S.jsx)("img",{src:"https://static-1.metaso.cn/_next/static/media/3d-text.8b66c458.png",alt:"Text",className:"w-full h-full object-cover"})}),eD=(0,j.memo)(function(){return(0,S.jsx)("img",{src:"https://static-1.metaso.cn/_next/static/media/3d-search.e75754a2.png",alt:"Search",className:"w-full h-full object-cover"})}),eA=(0,j.memo)(function(){return(0,S.jsx)("img",{src:"https://static-1.metaso.cn/_next/static/media/3d-folder.8fe1ef9d.png",alt:"Folder",className:"w-full h-full object-cover"})}),eO=(0,j.memo)((0,j.forwardRef)(function(e,n){var t=e.open,r=e.onClose,i=e.setOpen,a=(0,C._)((0,j.useState)(null),2),o=a[0],s=a[1],l=(0,C._)((0,j.useState)("main"),2),c=l[0],u=l[1],d=(0,C._)((0,j.useState)(0),2),h=d[0],f=d[1],p=(0,C._)((0,j.useState)(!1),2),v=p[0],m=p[1],g=(0,eR.H)(),x=g.fetch,b=g.isPending,w=g.clearFn,L=g.finished,R=g.outlineData,M=g.consoleText,D=g.generateFetch,A=g.onOutlineChange,O=g.onStyleChange,N=g.style,P=g.progress,F=g.setConfirmCallback,H=g.credit,G=[{id:"text",title:"粘贴文本",description:"根据输入的文本创建幻灯片",icon:(0,S.jsx)(eM,{}),backgroundImage:"ocean"},{id:"search",title:"搜索生成",description:"输入主题，搜索相关素材",icon:(0,S.jsx)(eD,{}),backgroundImage:"starry"},{id:"import",title:"导入文件或URL",description:"根据上传的文件创建",icon:(0,S.jsx)(eA,{}),backgroundImage:"nature"}];(0,eT.Z)(function(){t||(w(),m(!1),u("main"),s(null),m(!1))},[t]);var B=(0,C._)((0,j.useState)(null),2),z=B[0],U=B[1],V=(0,C._)((0,ex.Z)(void 0),2),K=V[0],Q=V[1],Y=(0,C._)((0,ex.Z)(void 0),2),J=Y[0],X=Y[1],$=(0,C._)((0,ex.Z)(void 0),2),ee=$[0],en=$[1],et=(0,C._)((0,ex.Z)(void 0),2),er=et[0],ei=et[1],ea=(0,C._)((0,ex.Z)(void 0),2),eo=ea[0],es=ea[1],el=(0,Z.Z)(function(e,n,t,r,a,o){u("text"),s("text"),f(0),m(!1),U(e),Q(r),X(a),en(t),ei(n),es(o),i(!0)}),ec=(0,Z.Z)(function(e){s(e),"search"===e?u("search"):"text"===e?u("text"):"import"===e&&u("import")}),eu=(0,Z.Z)(function(){if(v){m(!1);return}if(h>0){f(h-1),w();return}if(K&&J){i(!1);return}u("main"),s(null)}),ed=(0,Z.Z)(function(e){x((0,y._)({},e)).catch(function(e){(null==e?void 0:e.code)!==4002&&(0,eZ.y)("大纲生成失败",{variant:"error"}),w(),f(0)}),1!==e.generateType&&f(1)});(0,eT.Z)(function(){"search"===c&&R&&R.length>0&&f(1)},[b,c]);var eh=(0,Z.Z)(function(){switch(c){case"search":return"搜索生成";case"text":return z||"粘贴文本";case"import":return"导入文件或URL";default:return"PPT"}}),ef=(0,eI.Z)(function(){return 100===P||0===h?eh():"生成中... ".concat(P,"%")},[P,h,c]),ep=(0,Z.Z)(function(e){"clickAway"!==e&&(f(0),r())}),ev=(0,Z.Z)(function(e){m(e)});return(0,j.useImperativeHandle)(n,function(){return{generateOutline:function(e,n,t){O(n||""),f(1),t&&F(t),x((0,y._)({},e))},showDialogByText:el}},[ed]),(0,S.jsx)(k.k,{open:t,onClose:ep,maskSx:{zIndex:"200!important","& .meta-dialog":{width:"950px",maxWidth:"95vw",padding:"0 !important",borderRadius:"20px",overflow:"hidden",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)",zIndex:200}},children:(0,S.jsxs)("div",{className:"bg-white h-[70vh] min-h-[602px] max-h-[800px] flex flex-col dark:bg-[#2D2D30]",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-100 dark:border-[#404040] ".concat(e_()["ppt-dialog-header"]),children:[(0,S.jsx)("div",{className:"w-8",children:"main"!==c&&(0,S.jsx)(E.Z,{onClick:eu,size:"small",className:"text-gray-600 hover:bg-gray-100",children:(0,S.jsx)(I.Z,{})})}),(0,S.jsx)("h6",{className:"font-['Noto_Sans_SC']! text-lg m-0 text-black dark:text-[#FFFFFF] font-bold text-center flex-1",children:v?"视觉效果":ef}),(0,S.jsx)("div",{className:"w-8 h-8",children:!v&&(0,S.jsx)("button",{onClick:function(e){return ep("button")},className:"w-8 cursor-pointer h-8 bg-transparent border-0 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-[#3A3A3C] transition-colors",children:(0,S.jsx)(T.Z,{})})})]}),(0,S.jsxs)("div",{className:"overflow-y-auto flex-1",children:[(0,S.jsx)("div",{className:"px-8 py-10 h-full box-border   ".concat(0===h?"block":"hidden"),children:"main"===c?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"text-center mb-10 mt-10",children:(0,S.jsx)(_.Z,{variant:"h5",fontSize:20,fontWeight:"500",className:"text-[#344054] dark:text-[#FFFFFF]",children:"选择生成方式"})}),(0,S.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 ",children:G.map(function(e){return(0,S.jsxs)("div",{onClick:function(){return ec(e.id)},className:"\n                      relative cursor-pointer rounded-lg border border-gray-200 dark:border-gray-700\n                      transform transition-all duration-200 \n                      hover:shadow-md hover:border-gray-300 dark:hover:border-gray-600 dark:hover:shadow-lg\n                      ".concat(o===e.id?"ring-2 ring-blue-500 ring-offset-2 dark:ring-blue-400 dark:ring-offset-gray-800":"","\n                      bg-white dark:bg-[#3A3A3C] p-4\n                    "),children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-2xl font-bold  text-gray-800 dark:text-[#E0E0E0] mb-2 text-left",children:e.title}),(0,S.jsx)("p",{className:"text-base text-gray-500 dark:text-[#B0B0B0] leading-relaxed text-left",children:e.description})]}),(0,S.jsx)("div",{className:"w-full flex items-center justify-end mt-2",children:(0,S.jsx)("div",{className:" w-25 h-25 ",children:e.icon})})]},e.id)})})]}):"search"===c?(0,S.jsx)(W,{onGenerate:ed,consoleText:M,disableGenerate:b}):"text"===c?(0,S.jsx)(q,{onGenerate:ed,disableGenerate:b,sourceId:K,sourceType:J,presentationId:eo,initText:ee,title:er}):"import"===c?(0,S.jsx)(ej,{onGenerate:ed,disableGenerate:b}):null}),1===h&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(eL.Z,{onGenerateConfirm:D,showAllStyles:v,onShowAllStyles:ev,onChangeMarkdown:A,content:R,style:N,onStylesChange:O,disableEditTab:!L,finished:L,credit:H})})]})]})})}))},56206:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(57437),i=t(2265),a=t(50059),o=t(38398),s=t(64213),l=t(92498),c=(0,i.memo)(function(e){var n=e.title,t=e.popoverTitle,c=e.value,u=e.options,d=e.onChange,h=e.onBeforeChange,f=e.suffix,p=e.minWidth,v=e.placeholder,m=e.popoverWidth,g=e.placement,x=void 0===g?"bottom":g,b=(0,a._)((0,i.useState)(null),2),w=b[0],y=b[1],C=(0,i.useRef)(null),S=!!w,j=u.find(function(e){return e.value===c}),k=j?"".concat(j.label).concat(void 0===f?"":f):void 0===v?"请选择":v,E=(0,s.Z)().theme,_=(0,l.Z)(function(){C.current&&y(C.current)}),T=(0,l.Z)(function(){y(null)}),I=(0,l.Z)(function(e){var n=u.find(function(n){return n.value===e});if(n){if(h&&!h(e,n)){T();return}d(e),T()}}),L=(0,l.Z)(function(){switch(x){case"top":return{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}};case"bottom":default:return{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}};case"left":return{anchorOrigin:{vertical:"center",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"right"}};case"right":return{anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"}}}})(),R=L.anchorOrigin,Z=L.transformOrigin,M=(0,i.useMemo)(function(){return t||n||""},[t,n]);return(0,r.jsxs)("div",{className:"flex flex-col",children:[n&&(0,r.jsx)("span",{className:"text-[#667085] dark:text-white text-sm mb-2",children:n}),(0,r.jsxs)("div",{ref:C,onClick:_,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(e.preventDefault(),_())},style:{minWidth:void 0===p?"100px":p},className:"\n          px-3 py-[14px] border border-[#D0D5DD] dark:border-gray-600 rounded-md \n          cursor-pointer bg-white dark:bg-gray-300 flex items-center justify-between\n          hover:border-[#85A3E0] dark:hover:border-blue-400 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400\n          ".concat(S?"border-[#2563eb] dark:border-blue-400 ring-1 ring-[#2563eb] dark:ring-blue-400":"","\n        "),role:"combobox","aria-expanded":S,"aria-haspopup":"listbox",tabIndex:0,children:[(0,r.jsx)("span",{className:"text-base text-[#344054] font-['Noto_Sans_SC'] font-bold truncate",children:k}),(0,r.jsx)("div",{className:"ml-2 text-gray-400 transition-transform flex items-center justify-center text-lg ".concat(S?"rotate-180":""),children:(0,r.jsx)("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M18.6719 9L12.6719 15L6.67188 9",stroke:"#98A2B3","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})})]}),(0,r.jsx)(o.ZP,{open:S,anchorEl:w,onClose:T,anchorOrigin:R,transformOrigin:Z,disablePortal:!0,slotProps:{paper:{sx:{width:void 0===m?"200px":m,maxHeight:300,borderRadius:"8px",border:"dark"===E?"1px solid #4b5563":"1px solid #D0D5DD",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",mt:"bottom"===x?.5:0,mb:"top"===x?.5:0}}},children:(0,r.jsxs)("div",{className:"px-1",children:[M&&(0,r.jsx)("div",{className:"px-4 py-3 text-[10px] font-medium text-[#98A2B3] dark:text-gray-200",children:M}),(0,r.jsx)("div",{className:"flex flex-col gap-1",children:u.map(function(e,n){return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{onClick:function(){return I(e.value)},className:"\n                        px-4 py-3 cursor-pointer flex items-center justify-between\n                        hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-sm\n                        ".concat(c===e.value?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-medium":"text-[#344054] dark:text-gray-300","\n                        ").concat(e.highlighted&&c!==e.value?"bg-blue-50/30 dark:bg-blue-900/10":"","\n                        "),role:"option","aria-selected":c===e.value,children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[e.icon&&(0,r.jsx)("div",{className:"flex-shrink-0 flex flex-col items-center justify-center",children:e.icon}),(0,r.jsx)("span",{children:e.label})]}),e.rightElement&&(0,r.jsx)("div",{className:"ml-2",children:e.rightElement})]}),n<u.length-1&&(0,r.jsx)("div",{className:"mx-2 border-b border-gray-100 dark:border-gray-400 opacity-50"})]},e.value)})})]})})]})}),u=(0,i.memo)(function(e){var n=e.options,t=n.pages,a=n.setPages,o=n.wordCount,s=n.setWordCount,l=n.language,u=n.setLanguage,d=n.checkUserPermission,h=n.pagesOptions,f=n.wordCountOptions,p=n.languageOptions;return(0,i.useEffect)(function(){},[n]),(0,r.jsxs)("div",{className:"flex flex-row gap-4 flex-shrink-0",children:[(0,r.jsx)(c,{title:"页数",value:t,options:h,onChange:function(e){return a(Number(e))},onBeforeChange:d,suffix:"页",popoverWidth:"200px",placement:"top"}),(0,r.jsx)(c,{popoverTitle:"单页字数",title:"字数",value:o,options:f,onChange:function(e){return s(Number(e))},popoverWidth:"200px",placement:"top"}),(0,r.jsx)(c,{title:"语言",value:l,options:p,onChange:function(e){return u(e)},popoverWidth:"200px",placement:"top"})]})})},23301:function(e,n,t){"use strict";t.d(n,{H:function(){return S},N:function(){return i}});var r,i,a=t(2403),o=t(50059),s=t(85735),l=t(5853),c=t(27030),u=t(78156),d=t(92498),h=t(50517),f=t(39207),p=t(75825),v=t(56424),m=t(12279),g=t(2265),x=t(64654),b=t(56731),w=t(28251),y=t(89831),C=t(22805);function S(){var e,n=(0,o._)((0,u.Z)(""),2),t=n[0],r=n[1],i=(0,o._)((0,u.Z)(!1),2),S=i[0],j=i[1],k=(0,o._)((0,u.Z)(!1),2),E=k[0],_=k[1],T=(0,o._)((0,u.Z)(null),2),I=T[0],L=T[1],R=(0,o._)((0,u.Z)(!1),2),Z=R[0],M=R[1],D=(0,o._)((0,u.Z)([]),2),A=D[0],O=D[1],N=(0,o._)((0,u.Z)(),2),P=N[0],F=N[1],H=(0,o._)((0,u.Z)(),2),G=(H[0],H[1]),W=(0,o._)((0,u.Z)(""),2),B=W[0],q=W[1],z=(0,o._)((0,u.Z)(0),2),U=z[0],V=z[1],K=(0,o._)((0,u.Z)(0),2),Q=K[0],Y=K[1],J=(0,o._)((0,u.Z)(!1),2),X=J[0],$=J[1],ee=(0,g.useRef)(),en=(0,g.useRef)(null),et=(0,d.Z)(function(){F(void 0),O([]),r(""),M(!1),_(!1),L(null),j(!1),G(void 0),V(0),Y(0),en.current&&(en.current.cancel(),en.current=null)}),er=(0,w.n)(),ei=er.config,ea=er.updateConfig;(0,g.useEffect)(function(){ei&&!B?q(ei.theme):ea({theme:B})},[ei,B]);var eo=(0,d.Z)((e=(0,a._)(function(e){var n,t,i;return(0,l.Jh)(this,function(a){return et(),n=(0,c.I)(),j(!0),G(e),Y(Number(e.pageNum)),t=e.pageNum,i=0,en.current=(0,C.F)("/api/presentation/outline/generate",e,{begin:function(){},receive:function(e){try{var a,o;if("init"===e.type);else if("outline"===e.type)O(function(n){return(0,s._)(n).concat([e.data.text])}),i++,V(Math.round(i/Number(t)*100)),j(!1);else if("append-text"===e.type){var l={texts:[{text:e.text,color:"search_query"===e.textType?"var(--console-blue)":"var(--console-gray)"}]};F(function(e){return e?(0,s._)(e).concat([l]):[l]})}else"presentation-init"===e.type?r(e.data.id):"error"===e.type&&(4002===e.code?(0,b.Z)():e.code===y.cO.SENSITIVE_WORD&&(0,x.yv)("本次请求涉及的领域暂不支持",{variant:"error"}),n.reject(e),null===(o=en.current)||void 0===o||o.cancel())}catch(e){_(!0),L(e),j(!1),M(!0),n.reject(e),null===(a=en.current)||void 0===a||a.cancel()}},down:function(e,t){M(!0),M(!0),n.resolve(!0)},error:function(e){j(!1),M(!0),_(!0),L(e),n.reject(e)}},!0),[2,n.done]})}),function(n){return e.apply(this,arguments)})),es=(0,d.Z)(function(e){var n=(0,v.u)(p.l.Presentation,{id:e});window.open(n,"_blank")}),el=(0,d.Z)(function(){t&&(0,f.DAF)({id:t,outlines:A,theme:B,reGenerate:X}).then(function(e){0===e.data.errCode?($(!0),ee.current?ee.current(e.data.data.id):es(e.data.data.id)):4002===e.data.errCode?(0,b.Z)():e.data.errCode===y.cO.SENSITIVE_WORD&&(0,x.yv)("本次请求涉及的领域暂不支持",{variant:"error"})}).catch(function(e){})}),ec=(0,d.Z)(function(e){O(e.split(m.DO))});return{outlineData:(0,h.Z)(function(){return A.join(m.DO)},[A]),consoleText:P,isPending:S,isError:E,error:I,finished:Z,fetch:eo,onOutlineChange:ec,generateFetch:el,onStyleChange:q,style:B,progress:U,clearFn:et,setConfirmCallback:function(e){ee.current=e},credit:Q}}(r=i||(i={}))[r.NONE=0]="NONE",r[r.FILE=1]="FILE",r[r.SEARCH_RESULT=2]="SEARCH_RESULT"},58914:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var r=t(50059),i=t(57437),a=t(2265),o=t(74475),s=t(92498),l=t(77961),c=t(79078),u=t(23760),d=t(47812),h=t(28251);function f(){var e=(0,u.LM)(function(e){return e.productType()}),n=(0,r._)((0,a.useState)([]),2),t=n[0],f=n[1],v=(0,r._)((0,a.useState)([]),2),m=v[0],g=v[1],x=(0,r._)((0,a.useState)([]),2),b=x[0],w=x[1],y=(0,r._)((0,a.useState)(10),2),C=y[0],S=y[1],j=(0,r._)((0,a.useState)(1),2),k=j[0],E=j[1],_=(0,r._)((0,a.useState)("cn"),2),T=_[0],I=_[1],L=(0,l.Cl)(),R=(0,h.n)(),Z=R.config,M=R.updateConfig;(0,o.Z)(function(){(null==L?void 0:L.presentationPageCount)&&f(L.presentationPageCount.map(function(e){var n=JSON.parse(e.description||"{}").pro;return{value:parseInt(e.value),label:e.label,rightElement:n?(0,i.jsx)(p,{}):void 0,highlighted:n}})),(null==L?void 0:L.presentationContentDensity)&&g(L.presentationContentDensity.map(function(e){return{value:parseInt(e.value),label:e.label,icon:(0,i.jsx)("img",{className:"size-6",src:e.icon,alt:e.label})}})),(null==L?void 0:L.presentationLanguage)&&w(L.presentationLanguage.map(function(e){return{value:e.value,label:e.label}}))}),(0,a.useEffect)(function(){Z&&(S(Number((0,l.WF)(L,"presentationPageCount",""))||10),E(Z.contentDensity||Number((0,l.WF)(L,"presentationContentDensity",Z.contentDensity))||1),I(Z.lang||(0,l.WF)(L,"presentationLanguage",Z.lang)||"cn"))},[Z,L]),(0,a.useEffect)(function(){M({pageNum:C,contentDensity:k,lang:T})},[C,k,T,M]);var D=(0,s.Z)(function(n,t){return!t.rightElement||e!==d.kv.FREE||((0,c.Iu)(),!1)}),A=(0,s.Z)(function(e){S(e.pageNum),E(e.contentDensity),I(e.lang)});return{pages:C,setPages:S,wordCount:k,setWordCount:E,language:T,setLanguage:I,checkUserPermission:D,update:A,pagesOptions:t,wordCountOptions:m,languageOptions:b}}var p=(0,a.memo)(function(){return(0,i.jsx)("span",{className:"bg-blue-500 text-white text-xs px-2 py-0.5 rounded font-medium",children:"Pro"})})},28251:function(e,n,t){"use strict";t.d(n,{n:function(){return d}});var r=t(2403),i=t(50059),a=t(5853),o=t(39207),s=t(77961),l=t(71632),c=t(2265),u=t(92498),d=function(){(0,s.Cl)();var e=(0,i._)((0,c.useState)({pageNum:10,contentDensity:1,lang:"cn",theme:"auto"}),2),n=e[0];e[1];var t=(0,u.Z)(function(e){(0,o.TId)(e)}),d=(0,c.useRef)(!1);return{config:(0,l.a)({queryKey:["presentation-config"],enabled:!d.current,queryFn:(0,r._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return d.current=!0,[4,(0,o.owH)()];case 1:return[2,e.sent().data.data]}})})}).data||n,updateConfig:t}}},77526:function(e,n,t){"use strict";t.d(n,{_R:function(){return eD},KW:function(){return eA},X6:function(){return j},X7:function(){return eN}});var r,i,a,o,s,l,c,u,d,h,f,p,v,m,g,x,b,w,y,C,S,j,k=t(12249),E=t(50059),_=t(57437),T=t(2265),I=t(7870),L=t(26058),R=t(99305),Z=t(78693),M=t(19643),D=t(8350),A=t(35389),O=t(36760),N=t.n(O),P=t(48359),F=t.n(P),H=t(94746);function G(){return(G=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var W=function(e){return H.createElement("svg",G({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),i||(i=H.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14.667A6.667 6.667 0 1 0 8 1.334a6.667 6.667 0 0 0 0 13.333"})))};function B(){return(B=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var q=function(e){return H.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",width:15,height:12,className:"icon",viewBox:"0 0 1280 1024"},e),a||(a=H.createElement("path",{fill:"#06A7FF",d:"M308.096 396.8a346 346 0 0 1-4.672-56.832C303.424 152.192 454.016 0 639.808 0c185.728 0 336.32 152.192 336.32 339.968 0 19.072-1.536 38.08-4.672 56.832 170.56.96 308.544 140.992 308.544 313.6 0 173.184-138.88 313.6-310.272 313.6a307.71 307.71 0 0 1-221.056-93.568 78.4 78.4 0 0 1 .448-109.568 76.416 76.416 0 0 1 111.68 3.008c28.16 27.648 66.624 44.736 109.056 44.736 86.4 0 156.416-70.784 156.416-158.08 0-87.36-70.08-158.08-156.416-158.08a154.88 154.88 0 0 0-103.424 39.424l-.128-.128-2.56 2.624a129 129 0 0 0-8.832 8.896l-5.888 5.952.064.128-317.056 320.448A307.71 307.71 0 0 1 310.208 1024C138.944 1024 0 883.584 0 710.4c0-172.48 137.728-312.384 308.096-313.6m2.304 471.808c86.4 0 156.416-70.784 156.416-158.08 0-87.36-70.08-158.08-156.416-158.08-86.4 0-156.416 70.72-156.416 158.08 0 87.296 70.016 158.08 156.416 158.08m329.408-344.32c100.736 0 182.4-82.56 182.4-184.32s-81.664-184.32-182.4-184.32-182.4 82.56-182.4 184.32 81.664 184.32 182.4 184.32"})),o||(o=H.createElement("path",{fill:"#FF436A",d:"M821.184 367.104a71 71 0 0 1-.448-8.32c0-40.896 34.752-73.984 77.632-73.984S976 317.888 976 358.784c0 3.136-.192 6.208-.64 9.28C964.928 535.808 818.752 668.8 640 668.8S315.072 535.808 304.64 368a71 71 0 0 1-.64-9.216c0-40.896 34.752-73.984 77.632-73.984s77.632 33.088 77.632 73.984c0 2.816-.128 5.568-.448 8.32 9.6 87.232 87.04 155.136 181.184 155.136 94.08 0 171.52-67.968 181.184-155.2z"})))};function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var U=function(e){return H.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",width:17,height:16,className:"icon",viewBox:"0 0 1088 1024"},e),s||(s=H.createElement("path",{fill:"#1855FB",d:"M492.504 1021.607c-175.51-20.915-326.588-116.41-416.965-264.033-31.342-51.17-57.246-118.457-70.358-184.018C1.215 553.728 0 533.452 0 483.115c0-57.118.895-68.951 6.972-98.949C46.756 188.316 186.576 49.52 387.032 6.217 411.145.908 424.769.013 477.985.013c69.718-.256 91.913 3.198 153.444 22.642 72.084 23.474 128.69 57.95 185.36 112.764 69.719 67.544 111.038 142.443 132.209 238.833 9.019 39.912 9.914 131.76 1.79 170.202-4.668 22.386-4.668 25.712-.639 33.068 4.99 9.594 4.67 9.338 74.132 27.12 52.576 13.56 58.972 16.694 62.746 31.66 4.094 15.863-33.708 97.862-68.247 147.88-84.877 123.19-217.086 206.596-370.785 233.46-30.83 5.372-123.446 7.675-155.427 3.965zm135.151-195.083a363.3 363.3 0 0 0 172.313-86.156c34.859-31.15 73.555-85.708 89.226-126.644 14.775-38.44 15.99-37.61-91.593-64.473-30.51-7.931-36.01-16.118-31.341-48.355 11.897-81.679-20.66-171.865-83.982-231.541a291.025 291.025 0 0 0-364.07-28.207c-82.51 57.118-126.131 149.542-121.206 257.51 4.093 91.272 40.104 170.457 106.624 234.61 84.557 82 206.02 116.73 324.029 93.256"})))};function V(){return(V=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var K=function(e){return H.createElement("svg",V({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,className:"icon",viewBox:"0 0 1024 1024"},e),l||(l=H.createElement("path",{fill:"#1855FB",d:"M469.344 990.4c-112.96-9.984-220.736-60.96-297.824-140.48-77.344-80-116.608-158.304-135.392-270.272-4.896-29.024-5.6-98.304-1.216-126.848 10.496-70.496 33.92-137.344 65.856-188.8C191.264 118.08 343.232 32 510.08 32c71.232 0 135.392 12.928 197.12 40 53.92 23.68 113.184 65.856 152.96 109.056 62.176 67.552 94.144 125.12 117.568 211.968 18.56 68.544 19.008 164.896 1.44 232.96-19.744 75.392-46.592 129.28-94.88 189.056-41.952 52.192-86.08 89.024-144.16 120.256-60.992 32.96-117.344 49.28-188.576 55.136-34.88 2.912-48.288 2.912-82.208 0zm86.112-244.384c11.968-5.12 21.216-19.52 21.216-33.44 0-23.904 4.64-50.976 10.752-62.944 12.448-24.384 29.024-32.928 79.264-40.736 19.52-2.912 39.52-7.04 44.416-9.024 13.888-6.08 25.376-17.792 32.928-34.144 6.816-14.88 7.072-16.32 7.072-54.4-.256-42.208-1.696-51.456-16.32-89.28-21.76-56.832-78.816-113.408-135.424-133.92a400 400 0 0 0-50.496-12.672c-26.816-4.384-31.936-4.64-55.104-1.952-45.856 5.344-74.176 14.4-105.888 33.408-20 12.192-21.44 13.44-45.6 37.312-35.392 34.88-53.664 68.8-64.896 119.552-19.52 89.024 15.872 182.944 90.016 239.552 30.976 23.648 76.352 42.688 109.28 45.856 28.288 2.912 68.32 1.216 78.784-3.2z"})))};function Q(){return(Q=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var Y=function(e){return H.createElement("svg",Q({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,className:"icon",viewBox:"0 0 1024 1024"},e),c||(c=H.createElement("path",{fill:"#FFFEFE",d:"M0 886.4V748l92-59.2c51.2-32.8 100.8-68 111.2-77.6 9.6-10.4 24.8-41.6 32-68.8C252 480 292.8 423.2 342.4 392c32.8-20.8 44.8-24 97.6-24 43.2 0 70.4 4.8 95.2 16.8 20 8.8 40 14.4 45.6 12s23.2-29.6 40-60.8c44-84 103.2-140 199.2-187.2 70.4-35.2 87.2-40 141.6-43.2l62.4-4V1024H0z"})),u||(u=H.createElement("path",{fill:"#FF6500",d:"M0 388.8V0h1024v125.6l-51.2 4c-39.2 3.2-68 12.8-129.6 43.2C748 220 690.4 274.4 644 360.8c-40.8 76-56 82.4-122.4 52.8-28.8-12.8-61.6-21.6-82.4-21.6-73.6.8-153.6 78.4-180 173.6-7.2 27.2-20 56.8-28.8 66.4-19.2 20.8-188.8 132-212 139.2L0 776.8z"})))};function J(){return(J=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var X=function(e){return H.createElement("svg",J({xmlns:"http://www.w3.org/2000/svg",width:14,height:14,className:"icon",viewBox:"0 0 1024 1024"},e),d||(d=H.createElement("path",{fill:"#3475ED",d:"M3.258 240.635C4.241 124.603 81.487 2.665 233.582 2.192c152.092-.51 416.83 0 555.651 1.455 138.747 1.455 232.294 93.891 232.294 239.426 0 145.538.472 385.001.472 535.457 0 150.451-97.957 244.38-262.805 243.356-164.848-.945-362.733.514-508.88 0-146.15-.469-243.632-78.667-246.546-252.208-2.99-173.54-1.496-413.008-.51-529.043"})),h||(h=H.createElement("path",{fill:"#FCFCFC",d:"M80.19 219.764c48.703 17.231 181.818 76.468 187.96 168.666 0 34.654-10.318 50.154-9.332 95.384.238 61.205 36.185 126.617 86.62 166.185 53.39 45.238 149.612 76.702 200.401 117.57 58.47 38.037 175.363 158.99 175.363 158.99S634.31 717.105 588.087 639.693c74.294-41.3 357.77-80.633 357.77-80.633-25.83-25.33-168.552-88.501-253.946-87.556 41.102-63.406 120.593-181.41 120.593-181.41l-27.56 4.172c34.922-75.208 73.784-135.193 109.73-183.609-154.064 40.785-315.722 126.1-461.873 245.087-21.415-32.45-75.787-102.27-141.501-100.577-25.826 0-34.961 1.493-51.655 11.093-47.993-20.651-110.242-42.557-159.459-46.496z"})))};function $(){return($=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var ee=function(e){return H.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,className:"icon",viewBox:"0 0 1024 1024"},e),f||(f=H.createElement("path",{fill:"#597DFB",d:"M998.172 513.82c0 96.37.456 192.74-.113 289.11-.455 76.117-34.361 133.916-99.67 172.714-29.127 17.295-61.212 25.032-95.004 25.145-194.788.114-389.575.57-584.477-.113-108.999-.342-194.446-86.244-194.787-195.47-.569-194.56-.455-389.007 0-583.567.227-109.682 86.699-194.901 197.29-195.129 135.169-.341 270.337-.114 405.505-.114 57.116 0 114.346-.113 171.463 0 105.358.114 186.709 72.477 198.997 177.152.91 8.079.683 16.27.683 24.349.113 95.346.113 190.578.113 285.923M258.276 286.948v80.44h132.096c12.06 0 24.007.683 35.726 3.528 28.103 6.599 41.529 23.893 40.96 53.134-.455 24.348-16.953 42.553-43.008 47.559-19.229 3.64-38.685 1.479-58.027 2.048-53.02 1.593-90.112 29.127-106.496 79.53-5.916 18.205-8.647 37.092-8.76 56.207-.115 40.618-.115 81.123 0 121.742 0 3.072-.911 6.372 1.592 9.216h309.02v-80.327H347.25c1.139-22.528-1.592-44.032 2.39-65.309 3.413-18.66 14.336-30.037 32.427-35.043 7.85-2.162 15.815-3.413 24.007-3.413 19.456-.114 38.912.682 58.14-.683 42.78-3.072 76.118-21.163 94.208-62.35 17.522-39.709 20.822-80.441 8.42-121.743-13.653-45.624-43.805-73.841-91.591-81.578-11.492-1.82-23.097-2.845-34.702-2.958-58.255-.456-116.395-.456-174.65-.57-2.275 0-4.664.342-7.622.57m363.52 373.304v79.417c1.251.57 1.934 1.024 2.503 1.024 60.302-.455 120.718 3.3 180.793-2.844 32.995-3.413 61.553-17.522 83.626-43.008 34.816-40.164 37.66-129.82-25.486-176.583-3.186-2.39-7.168-3.982-9.216-8.42 19.456-12.402 36.181-26.738 46.763-47.104 40.39-77.369-14.678-172.714-102.059-175.218-56.434-1.592-112.868-.796-169.301-1.137-2.39 0-4.779.341-7.282.569v80.554c39.026 0 77.141-.114 115.257 0 8.76 0 17.75 0 26.396 1.252 28.558 4.21 42.78 23.324 41.757 55.068-.91 28.103-15.133 42.44-44.032 45.511-28.559 3.072-57.117.91-85.675 1.707-3.755.114-7.737-1.252-11.264 1.593v77.71c4.551 2.162 8.875 1.138 12.97 1.252 28.218.91 56.434-1.707 84.538 1.82 18.545 2.276 33.792 9.671 39.936 28.217 6.94 21.163 7.395 42.44-7.51 61.326-4.892 6.258-11.491 10.354-19.114 12.63-9.558 2.844-19.229 4.437-29.128 4.437-37.432.114-74.752.114-112.184.227zm-418.816 80.1V286.948H106.95v453.404z"})))},en=t(47812),et=t(22629),er=t(23760),ei=t(39207),ea=t(16308),eo=t(80928),es=t.n(eo),el=t(22322);function ec(){return(ec=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var eu=function(e){return H.createElement("svg",ec({xmlns:"http://www.w3.org/2000/svg",width:21,height:20,fill:"none",viewBox:"0 0 21 20"},e),p||(p=H.createElement("path",{fill:"#fff",d:"M15.993 2c1.188 0 2.193 1.005 2.193 2.192v11.449c0 1.187-1.005 2.192-2.193 2.192H6.128c-1.188 0-2.192-1.005-2.192-2.192V4.192C3.936 3.005 4.94 2 6.128 2zM6.128 3.096c-.64 0-1.097.457-1.097 1.096v11.449c0 .639.458 1.096 1.097 1.096h9.865c.64 0 1.097-.457 1.097-1.096V4.192c0-.639-.457-1.096-1.097-1.096z"})),v||(v=H.createElement("path",{stroke:"#fff",d:"M15.993 2c1.188 0 2.193 1.005 2.193 2.192v11.449c0 1.187-1.005 2.192-2.193 2.192H6.128c-1.188 0-2.192-1.005-2.192-2.192V4.192C3.936 3.005 4.94 2 6.128 2zM6.128 3.096c-.64 0-1.097.457-1.097 1.096v11.449c0 .639.458 1.096 1.097 1.096h9.865c.64 0 1.097-.457 1.097-1.096V4.192c0-.639-.457-1.096-1.097-1.096z"})),m||(m=H.createElement("path",{fill:"#fff",d:"M14.187 9.549 9.632 6.722c-.255-.158-.589.039-.589.333v5.655c0 .295.334.491.589.334l4.536-2.828c.275-.137.275-.53.02-.667"})))};function ed(){return(ed=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var eh=function(e){return H.createElement("svg",ed({xmlns:"http://www.w3.org/2000/svg",width:21,height:20,fill:"none",viewBox:"0 0 21 20"},e),g||(g=H.createElement("path",{fill:"#fff",d:"M15.324 2c1.188 0 2.193 1.005 2.193 2.192v11.449c0 1.187-1.005 2.192-2.193 2.192H5.46c-1.188 0-2.192-1.005-2.192-2.192V4.192C3.267 3.005 4.27 2 5.459 2zM5.46 3.096c-.64 0-1.097.457-1.097 1.096v11.449c0 .639.458 1.096 1.097 1.096h9.865c.64 0 1.097-.457 1.097-1.096V4.192c0-.639-.457-1.096-1.097-1.096z"})),x||(x=H.createElement("path",{stroke:"#fff",d:"M15.324 2c1.188 0 2.193 1.005 2.193 2.192v11.449c0 1.187-1.005 2.192-2.193 2.192H5.46c-1.188 0-2.192-1.005-2.192-2.192V4.192C3.267 3.005 4.27 2 5.459 2zM5.46 3.096c-.64 0-1.097.457-1.097 1.096v11.449c0 .639.458 1.096 1.097 1.096h9.865c.64 0 1.097-.457 1.097-1.096V4.192c0-.639-.457-1.096-1.097-1.096z"})),b||(b=H.createElement("path",{stroke:"#fff",strokeWidth:1.2,d:"M3.892 13.558c.666.213 3 .958 5.5-.639 1.904-1.216 2.602-2.32 4.5-1.916 1.5.32 2.333 1.597 3 2.555"})),w||(w=H.createElement("circle",{cx:8.642,cy:7.168,r:1.65,stroke:"#fff",strokeWidth:1.2})))};function ef(){return(ef=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var ep=function(e){return H.createElement("svg",ef({xmlns:"http://www.w3.org/2000/svg",width:21,height:20,fill:"none",viewBox:"0 0 21 20"},e),y||(y=H.createElement("path",{fill:"#fff",d:"M15.491 2c1.188 0 2.193 1.005 2.193 2.192v11.449c0 1.187-1.005 2.192-2.193 2.192H5.626c-1.188 0-2.192-1.005-2.192-2.192V4.192C3.434 3.005 4.438 2 5.626 2zM5.626 3.096c-.64 0-1.097.457-1.097 1.096v11.449c0 .639.458 1.096 1.097 1.096h9.865c.64 0 1.097-.457 1.097-1.096V4.192c0-.639-.457-1.096-1.097-1.096zm8.77 9.683c.273 0 .547.274.547.548s-.274.548-.547.548H6.722c-.274 0-.548-.274-.548-.548s.274-.547.548-.548zm0-7.369c.639 0 1.095.458 1.095 1.097s-.456 1.095-1.095 1.096c-.092 0-.184 0-.275-.092L12.66 8.973c0 .091.092.183.092.274 0 .64-.457 1.096-1.097 1.096s-1.095-.457-1.095-1.096c0-.091 0-.183.091-.274l-.914-.913c-.09.09-.182.09-.273.09s-.183 0-.275-.09L7.727 9.612c.09.092.091.092.091.183 0 .64-.457 1.096-1.096 1.096-.64 0-1.096-.457-1.096-1.096 0-.64.456-1.097 1.096-1.097.091 0 .183 0 .274.092l1.462-1.462c0-.091-.092-.182-.092-.273 0-.64.457-1.097 1.097-1.097s1.096.549 1.096 1.097v.182l.913.913h.182c.092 0 .183 0 .275.092L13.39 6.78c-.092-.091-.092-.09-.092-.273 0-.548.457-1.097 1.097-1.097"})),C||(C=H.createElement("path",{stroke:"#fff",d:"M15.491 2c1.188 0 2.193 1.005 2.193 2.192v11.449c0 1.187-1.005 2.192-2.193 2.192H5.626c-1.188 0-2.192-1.005-2.192-2.192V4.192C3.434 3.005 4.438 2 5.626 2zM5.626 3.096c-.64 0-1.097.457-1.097 1.096v11.449c0 .639.458 1.096 1.097 1.096h9.865c.64 0 1.097-.457 1.097-1.096V4.192c0-.639-.457-1.096-1.097-1.096zm8.77 9.683c.273 0 .547.274.547.548s-.274.548-.547.548H6.722c-.274 0-.548-.274-.548-.548s.274-.547.548-.548zm0-7.369c.639 0 1.095.458 1.095 1.097s-.456 1.095-1.095 1.096c-.092 0-.184 0-.275-.092L12.66 8.973c0 .091.092.183.092.274 0 .64-.457 1.096-1.097 1.096s-1.095-.457-1.095-1.096c0-.091 0-.183.091-.274l-.914-.913c-.09.09-.182.09-.273.09s-.183 0-.275-.09L7.727 9.612c.09.092.091.092.091.183 0 .64-.457 1.096-1.096 1.096-.64 0-1.096-.457-1.096-1.096 0-.64.456-1.097 1.096-1.097.091 0 .183 0 .274.092l1.462-1.462c0-.091-.092-.182-.092-.273 0-.64.457-1.097 1.097-1.097s1.096.549 1.096 1.097v.182l.913.913h.182c.092 0 .183 0 .275.092L13.39 6.78c-.092-.091-.092-.09-.092-.273 0-.548.457-1.097 1.097-1.097Z"})))},ev=t(41486),em=t(2403),eg=t(5194),ex=t(1780),eb=t(46796),ew=t(5853),ey=t(54632),eC=t(75825),eS=t(81951),ej=t(42576);function ek(){return(ek=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var eE=function(e){return H.createElement("svg",ek({xmlns:"http://www.w3.org/2000/svg",width:13,height:7,fill:"none",viewBox:"0 0 13 7"},e),S||(S=H.createElement("path",{fill:"#D0D5DD",d:"M12.156 1.355a.462.462 0 0 0 0-.693.57.57 0 0 0-.758 0L6.48 5.17 1.56.664a.57.57 0 0 0-.758 0 .462.462 0 0 0 0 .693l5.3 4.854a.57.57 0 0 0 .757 0z"})))},e_=t(61592),eT=t(13937),eI=t(43180),eL=t(20144),eR=t(36956),eZ=(0,T.memo)((0,T.forwardRef)(function(e,n){var t,r=e.sx,i=e.isH5,a=void 0!==i&&i,o=e.generated,s=e.webpageUrl,l=e.idForResult,c=e.id,u=e.targetType,d=e.setTargetType,h=(0,eb._)(e,["sx","isH5","generated","webpageUrl","idForResult","id","targetType","setTargetType"]),f=(0,ej.Z)({sessionId:c}),p=(0,E._)((0,T.useState)(!1),2),v=p[0],m=p[1],g=(0,E._)((0,T.useState)(null),2),x=g[0],b=g[1],w=(0,E._)((0,eI.bQ)({anchor:x},open,function(){m(!1)}),1)[0],y=(0,eR.W)(),C=(t=(0,em._)(function(e){var n,t,r,i,o,u;return(0,ew.Jh)(this,function(h){switch(h.label){case 0:if(n=null,d&&(n=d(e)),y.set("defaultHtmlTargetType",e,{expires:new Date(Date.now()+2592e6)}),m(!1),!a)return[3,3];if(t=new URL(location.href),i={sessionId:c},o=t.searchParams.get("shareKey"))return[3,2];return[4,f.promise];case 1:o=h.sent().shareKey,h.label=2;case 2:return i.shareKey=o,r=i,n&&(r.reportId=n),(0,eS.I)({searchPageLikeParams:r}),[3,4];case 3:(u=new URL((0,ei.jaP)((0,I.gY)(eC.l.SearchInteractiveReport,{id:c})),location.origin)).searchParams.set("dataId",l),u.searchParams.set("targetType",(null==e?void 0:e.toString())||en.QB.DEFAULT.toString()),n&&u.searchParams.set("reportId",n),s?((0,I.dW)("generate-interactive-webpage-quick",{webpageUrl:s,id:c,targetType:e}),u.searchParams.set("webpageUrl",s)):(0,I.dW)("generate-interactive-webpage",{id:c,targetType:e}),window.open(u.href),h.label=4;case 4:return[2]}})}),function(e){return t.apply(this,arguments)});return(0,_.jsxs)(ey.Z,(0,ex._)((0,eg._)({sx:(0,I.Vc)({width:1,height:42,fontSize:16,borderRadius:"8px",fontWeight:"normal",color:"#fff",bgcolor:"#000","&:hover,&:active":{bgcolor:"#424242","& .switch-icon":{visibility:"visible"}},"& .switch-icon.active":{visibility:"visible"}},r),startIcon:u==en.QB.CARD?(0,_.jsx)(e_.Z,{}):(0,_.jsx)(eT.Z,{}),onClick:(0,em._)(function(){return(0,ew.Jh)(this,function(e){switch(e.label){case 0:return[4,C(u)];case 1:return e.sent(),[2]}})})},h),{children:[(0,_.jsxs)(Z.Z,{component:"span",sx:{marginRight:e.isH5?s?"10px":"36px":"0px"},children:[o?a?"查看":"打开":"",u==en.QB.CARD?"展示海报":"互动网页"]}),e.isH5&&(0,_.jsx)(Z.Z,{sx:{position:"absolute",right:0,top:0,bottom:0,width:s?"20px":"36px",borderRadius:"0 8px 8px 0",backgroundColor:v?"#2C2C2C":"transparent",borderLeft:"1px solid #D0D5DD",visibility:e.isH5?"visible":"hidden"},className:"switch-icon ".concat(v?"active":""),onClick:function(e){e.stopPropagation(),m(!v)},children:(0,_.jsx)(Z.Z,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},ref:b,children:(0,_.jsx)(eE,{})})}),(0,_.jsx)(eI.ZP,{ref:w,open:v,isAutoUpdate:!0,anchor:x,sxs:{contentWrapper:{padding:"14px 12px"}},placement:"bottom-start",onOpenChanged:function(e){m(e)},offsetOptions:{mainAxis:5},children:(0,_.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"16px",fontColor:"--var(--black)",fontWeight:"400"},onClick:function(e){e.stopPropagation(),m(!1)},children:[(0,_.jsxs)(Z.Z,{onClick:function(){return C(en.QB.DEFAULT)},sx:{display:"flex",flexDirection:"row",alignContent:"center",padding:"6px 10px",cursor:"pointer","&:hover":{bgcolor:"#F9FAFB"}},children:[(0,_.jsx)(Z.Z,{children:(0,_.jsx)(eT.Z,{})}),(0,_.jsx)(Z.Z,{sx:{marginLeft:"4px"},component:"span",children:"互动网页"}),(0,_.jsx)(Z.Z,{sx:{marginLeft:"8px"},component:"span",children:(u==en.QB.DEFAULT||!u)&&(0,_.jsx)(eL.Z,{style:{marginTop:"2px"}})})]}),(0,_.jsxs)(Z.Z,{onClick:function(){return C(en.QB.CARD)},sx:{display:"flex",flexDirection:"row",alignContent:"center",padding:"6px 10px",cursor:"pointer","&:hover":{bgcolor:"#F9FAFB"}},children:[(0,_.jsx)(Z.Z,{children:(0,_.jsx)(e_.Z,{})}),(0,_.jsx)(Z.Z,{sx:{marginLeft:"4px"},component:"span",children:"展示海报"}),(0,_.jsx)(Z.Z,{sx:{marginLeft:"8px",display:"inline-block",width:"20px",height:"22px"},children:u==en.QB.CARD&&(0,_.jsx)(eL.Z,{style:{marginTop:"2px"}})})]})]})})]}))})),eM=t(25922);function eD(e){var n,t,r,i,a=e.type,o=e.name,s=e.url,l=e.iconUrl,c=e.data,u=(0,E._)((0,T.useState)(""),2),d=u[0],h=u[1],f=(0,E._)((0,T.useState)(!1),2),p=f[0],v=f[1],m=(0,E._)((0,T.useState)(!1),2),g=m[0],x=m[1],b=(0,E._)((0,T.useState)(e.officialWebsiteFileId),2),w=b[0],y=b[1],C=(0,T.useRef)(null);(0,er.LM)(function(e){return e.login});var S=function(){C.current&&(C.current.onload=function(){x(!0),v(!0)},C.current.onerror=function(){x(!1),v(!0)},setTimeout(function(){v(!0)},500))};(0,T.useEffect)(function(){l&&(x(!1),v(!1),S())},[l]),(0,T.useEffect)(function(){"cloud"===a&&(0,I.dW)("metaso-pan-auth-end",{url:location.href,client:(0,L.Fk)()})},[]),(0,T.useEffect)(function(){"Website"===a?h(s):"cloud"===a&&h(s)},[a,s,c]);var j=(0,T.useMemo)(function(){var e=(null==c?void 0:c.productName)||o;return e&&!e.includes("网盘")&&(e+=" 网盘资源"),"https://www.baidu.com/s?wd="+e},[o,c]),A=!!(null===(n=(0,L.ZD)())||void 0===n?void 0:n.isMiniWebView)||!!(null===(t=(0,L.ZD)())||void 0===t?void 0:t.isAliApp),O=function(){if("Website"===a){if(A)(0,I.vQ)(s),(0,R.pv)();else{var e=s;s.toLowerCase().startsWith("http")||(e="http://"+s),window.open(e,"_blank")}}else"cloud"===a&&(A?((0,I.vQ)(j),(0,R.pv)()):setTimeout(function(){window.open(j,"_blank")},100))},P=(0,ev.Zf)(y).onPlayClick,H=(0,eM.F)();return H.theme,H.setTheme,(0,_.jsxs)(Z.Z,{className:N()(F()["quick-access"],e.className,(0,k._)({},F()["access-active"],e.active)),sx:{borderRadius:e.isH5?"4px":void 0},children:[(0,_.jsxs)(M.Z,{direction:"row",justifyContent:"space-between",children:[(0,_.jsx)(Z.Z,{className:F()["access-type"],children:"快捷访问"}),e.active&&(0,_.jsx)(Z.Z,{sx:{color:"var(--content-op-color)",fontSize:"12px"},children:"按ESC退出"})]}),"Website"===a&&(0,_.jsxs)(M.Z,{direction:"row",className:F()["access-detail"],onClick:O,children:[(0,_.jsx)(Z.Z,{className:"".concat(F()["access-icon"]," ").concat(p||g?F()["access-icon-hide"]:"")}),(0,_.jsx)("img",{ref:C,src:l,className:"".concat(F()["access-icon"]," ").concat(p&&g?"":F()["access-icon-hide"])}),(0,_.jsx)(W,{className:"".concat(F()["access-icon"]," ").concat(p&&!g?"":F()["access-icon-hide"])}),(0,_.jsx)(Z.Z,{className:F()["access-name"],children:o})]}),"cloud"===a&&(0,_.jsxs)(M.Z,{direction:"row",className:F()["access-detail"],onClick:O,children:[(0,_.jsx)(eO,{cloudType:c.type,className:F()["access-icon"]}),(0,_.jsx)(Z.Z,{className:F()["access-name"],children:o})]}),(0,_.jsx)(Z.Z,{className:F()["access-link"],onClickCapture:function(e){e.stopPropagation()},children:d}),e.active&&!e.isH5&&(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(Z.Z,{sx:{backgroundColor:"var(--send-btn-bg)",padding:"7.5px 8.5px",borderRadius:"5px",position:"absolute",right:"20px",bottom:"15px",display:"flex",alignItems:"center"},children:(0,_.jsx)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,_.jsx)("path",{d:"M11.8333 1.16675V2.10008C11.8333 4.34029 11.8333 5.4604 11.3973 6.31604C11.0138 7.06869 10.4019 7.68061 9.64925 8.06411C8.79361 8.50008 7.6735 8.50008 5.43329 8.50008H1.16663M1.16663 8.50008L4.49996 5.16675M1.16663 8.50008L4.49996 11.8334",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),e.isH5&&(0,_.jsx)(Z.Z,{sx:{position:"absolute",right:"20px",bottom:"15px"},children:(0,_.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,_.jsx)("path",{d:"M1.83337 10.1666L10.1667 1.83325M10.1667 1.83325H1.83337M10.1667 1.83325V10.1666",stroke:"#667085",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,_.jsx)(Z.Z,{sx:{width:1,display:"flex",justifyContent:"flex-end"},children:(0,_.jsxs)(Z.Z,{className:F()["quick-access-buttons"],sx:{backgroundColor:e.isH5?"transparent":"#515151",border:"0.6px solid #E7E7E7",width:"max-content"},children:[!e.isH5&&e.idForResult&&(0,_.jsx)(ey.Z,{sx:{width:"unset",height:36,fontSize:16,borderRadius:0,fontWeight:"normal",color:"#fff",bgcolor:"transparent","&:hover,&:active":{bgcolor:"#424242","& .switch-icon":{visibility:"visible"}},"& .switch-icon.active":{visibility:"visible"}},startIcon:(0,_.jsx)(eu,{}),onClick:function(){P(s,w)},children:(0,_.jsxs)(Z.Z,{component:"span",sx:{marginRight:e.isH5?e.url?"10px":"36px":"0px"},children:[w&&(0,_.jsx)(Z.Z,{children:"查看讲解"}),!w&&(0,_.jsx)(Z.Z,{children:"给我讲讲"})]})}),!e.active&&e.sessionId&&"Website"===a&&e.idForResult&&!e.isH5&&(0,_.jsx)(D.Z,{sx:{width:"1px",height:"13px",backgroundColor:"rgba(135, 135, 135, 1)"}}),!e.active&&e.sessionId&&"Website"===a&&e.idForResult&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(Z.Z,{sx:{" button":{borderRadius:"4px"},width:e.isH5?"100%":"unset"},children:(0,_.jsx)(Z.Z,{sx:{width:e.isH5?1:"max-content",ml:"auto"},children:(0,_.jsx)(eZ,{isH5:e.isH5,idForResult:e.idForResult,generated:!!(null===(r=e.getHtmlReportId)||void 0===r?void 0:r.call(e,en.QB.DEFAULT,en._B.ClawerWeb)),id:e.sessionId,webpageUrl:e.url,targetType:en.QB.DEFAULT,startIcon:(0,_.jsx)(ep,{}),setTargetType:e.setHtmlTargetType,sx:{fontSize:e.isH5?14:void 0,borderRadius:e.isH5?void 0:0,height:36,bgcolor:e.isH5?void 0:"transparent","& .MuiButton-startIcon > svg":{width:"20px",height:"20px"}}})})}),!e.isH5&&(0,_.jsx)(D.Z,{sx:{width:"1px",height:"13px",backgroundColor:"rgba(135, 135, 135, 1)"}}),!e.isH5&&(0,_.jsx)(Z.Z,{sx:{" button":{borderRadius:"4px"},width:e.isH5?"100%":"unset"},children:(0,_.jsx)(Z.Z,{sx:{width:e.isH5?1:"max-content",ml:"auto"},children:(0,_.jsx)(eZ,{isH5:e.isH5,idForResult:e.idForResult,generated:!!(null===(i=e.getHtmlReportId)||void 0===i?void 0:i.call(e,en.QB.CARD,en._B.ClawerWeb)),id:e.sessionId,webpageUrl:e.url,startIcon:(0,_.jsx)(eh,{}),targetType:en.QB.CARD,setTargetType:e.setHtmlTargetType,sx:{fontSize:e.isH5?14:void 0,borderRadius:e.isH5?void 0:0,height:36,bgcolor:e.isH5?void 0:"transparent","& .MuiButton-startIcon > svg":{width:"20px",height:"20px"}}})})})]})]})})]})}function eA(){return(0,T.useEffect)(function(){(0,I.dW)("metaso-pan-auth-start",{url:location.href,client:(0,L.Fk)()})},[]),(0,_.jsx)(Z.Z,{className:F()["quick-access"],children:(0,_.jsxs)(M.Z,{direction:"row",className:"".concat(F()["access-type"]," ").concat(F()["quick-access-loading"]),children:[(0,_.jsx)(A.Z,{size:"1.5em",sx:{color:"gray"},thickness:2}),(0,_.jsx)(Z.Z,{sx:{paddingLeft:"20px"},children:"正在搜索网盘资源"})]})})}function eO(e){var n=e.cloudType,t=e.className;return(0,_.jsxs)(Z.Z,{className:t,children:[("baidu"===n||"pansou"===n||"xuebapan"===n)&&(0,_.jsx)(q,{}),("aliyundrive"===n||"alipan"===n)&&(0,_.jsx)(U,{}),"quark"===n&&(0,_.jsx)(K,{}),"lanzou"===n&&(0,_.jsx)(Y,{}),"xunlei"===n&&(0,_.jsx)(X,{}),"123pan"===n&&(0,_.jsx)(ee,{})]})}function eN(e){var n=(0,E._)((0,T.useState)({total:0,count:0}),2),t=n[0],r=n[1],i=(0,E._)((0,T.useState)(0),2),a=i[0],o=i[1],s=(0,et.a2)(),l=(0,er.LM)(function(e){return e.login}),c=(0,E._)((0,T.useState)(!1),2),u=c[0],d=c[1],h=(0,er.LM)(),f=h.productType(),p=(0,T.useCallback)(function(){if(s.isHydrated){if(l)(0,ei.qNJ)().then(function(e){0===e.data.errCode&&r(e.data.data)});else{if(!(0,ea.KC)(new Date(s.s.d),new Date)){s.canSearch(1,!0);return}var e=s.s.adt;if(!e){var n=es().enc.Utf8.parse("".concat(s.maxAdvanceTime)),t=es().enc.Base64.stringify(n);e=t,et.a2.setState({s:{d:new Date().getTime(),dt:s.s.dt,adt:t}})}var i=es().enc.Base64.parse(e);r({count:parseInt(es().enc.Utf8.stringify(i)),total:s.maxAdvanceTime})}}},[l,s.maxAdvanceTime,s.s,s.isHydrated]);(0,T.useEffect)(function(){var e=function(){p()};return window.addEventListener("focus",e),p(),l&&((0,ei.pBY)().then(function(e){e.data.data&&o(e.data.data)}),f===en.kv.FREE&&(0,ei.Fkn)().then(function(e){e.data.data&&1===e.data.data.auditState?h.setShareMath(!0):(d(!0),h.setShareMath(!1))})),function(){window.removeEventListener("focus",e)}},[l,p]);var v=(0,T.useCallback)(function(){t.count>0?e.onClick&&e.onClick():l?u?e.onShowShare&&e.onShowShare():((0,I.dW)("advance-math-use-up",1),(0,el.y)("今日深度推理次数已用完，请明天再来",{variant:"warning",autoHideDuration:3e3,keep:!0})):e.onClick&&e.onClick()},[l,t,u,a,e.onClick,e.onShowShare]);return{advanceUsage:t,showShare:u,updateMathSearchCount:p,shareReward:a,setShowShare:d,handleClick:v}}(r=j||(j={})).WEBSITE="Website",r.CLOUD="cloud"},82605:function(e,n,t){"use strict";t.d(n,{DV:function(){return N},ZP:function(){return P}});var r,i=t(12249),a=t(5194),o=t(1780),s=t(50059),l=t(45008),c=t(57437),u=t(2265),d=t(46075),h=t.n(d),f=t(7870),p=t(78693),v=t(8350),m=t(59832),g=t(46387),x=t(16210),b=t(94746);function w(){return(w=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var y=function(e){return b.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",width:25,height:25,fill:"none",viewBox:"0 0 25 25"},e),r||(r=b.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M22.99 12.453h-4m-12 0h-4m10-6v-4m0 20v-4m8-6a8 8 0 1 1-16 0 8 8 0 0 1 16 0m-5 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0"})))},C=t(14003),S=t(36760),j=t.n(S),k=t(74634),E=t(55833),_=t(5108),T=t(34637),I=t(6955),L=t.n(I),R=t(54632),Z=t(98374),M=t(68956),D=t(8620);function A(){var e=(0,l._)(["\n  padding:  8px;\n  color: var(--send-btn-bg);\n  & svg{\n    width: 30px;\n    height: 30px;\n  }\n  &:hover{\n    color: var(--send-btn-bg-hover);\n  }\n  &:active{\n    color: var(--send-btn-bg-active);\n  }\n  &[disabled]{\n    color: #9aa3b2;\n  }\n"]);return A=function(){return e},e}var O=(0,u.forwardRef)(function(e,n){var t=(0,s._)((0,u.useState)(e.model),2),r=t[0],l=t[1],d=e.onSubmit,h=e.boxShadow,x=e.autoFocus,b=e.showSettingButton,w=e.placeholders,C=void 0===w?{argument:"点击输入想了解的问题",law:""}:w,S=e.prefixSetting,j=e.onArgumentChange,I=e.sx,A=(0,s._)((0,u.useState)(""),2),O=A[0],P=A[1],F=function(){O&&d(O,r)};(0,M.cF)();var H=(0,k.I1)(F),G=(0,u.useRef)("external"),W=(0,k.a8)(),B=(0,u.useRef)(null),q=(0,s._)((0,u.useState)(""),2),z=q[0],U=q[1],V=(0,s._)((0,k.U8)(e.disabled,!1,{isControlled:!1}),2),K=V[0],Q=V[1];(0,u.useEffect)(function(){if("external"!==G.current||!W)return},[O]),(0,u.useImperativeHandle)(n,function(){return{setText:function(e){return G.current="external",U(e),P(e)},getText:function(){return O},setDisabled:function(e){Q(e)},submit:F,argumentRef:B}},[O]);var Y=E.HK.useAPI("searchSettingDrawer");(0,u.useRef)(null);var J=(0,u.useCallback)(function(){var n,t=Y.current;null==t||t.toggle(!0),null===(n=e.onSettingClicked)||void 0===n||n.call(e)},[]),X=(0,k.sd)(),$=X.isQQ,ee=X.version;(0,k.a8)();var en=(0,u.useCallback)(function(){var e,n;P(""),null===(n=B.current)||void 0===n||null===(e=n.textareaRef.current)||void 0===e||e.focus()},[]);return(0,c.jsxs)(p.Z,{className:(0,f.zk)([L()["search-consult-input-wrapper"]],(0,i._)({},L().shadow,h)),component:"form",onSubmit:function(e){return e.preventDefault()},sx:(0,a._)({},I),children:[S,(0,c.jsx)(Z.k,(0,o._)((0,a._)({disabled:K,sx:{"& textarea":{width:"100%"},pl:"20px",pr:"min(4%, 20px)",color:O?"black":"#667085","&[class]":{minWidth:"invalid"},"& textarea::placeholder":{color:"#667085"}},icon:e.hideIcon?null:(0,c.jsx)(y,{}),ref:B,rows:4,autoFocus:void 0===x||x,value:O,onFocus:function(){G.current="user"},onChange:function(e){P(e),"user"===G.current&&z&&(null==j||j(e)),G.current="user"}},H),{placeholder:C.argument})),(0,c.jsxs)("div",{style:{display:"flex",height:"47px",alignItems:"center",padding:"0 20px"},children:[(0,c.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsx)(_.o4,{activeEngine:e.activeEngine,searchTopicId:e.searchTopicId,isFollowUpQuestion:!!C.argument&&C.argument.startsWith("继续追问"),onChange:function(e){P(e),d(e)}}),(0,c.jsx)(D.qv,{model:r,onModelChange:l,isH5:e.isH5}),(void 0===b||b)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(v.Z,{sx:{mx:0,height:24},orientation:"vertical"}),(0,c.jsx)(m.Z,(0,o._)((0,a._)({sx:{color:"var(--content-op-color)"}},(0,k.mY)(J)),{children:(0,c.jsx)(T.Z,{})}))]}),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(R.Z,(0,o._)((0,a._)({sx:{ml:0,px:.5,fontSize:"14px",fontWeight:400,lineHeight:"22px",textAlign:"center",minWidth:0,color:"#98A2B3"},onMouseDown:function(e){e.preventDefault()}},(0,k.mY)(en)),{children:"清空"}))})]}),(0,c.jsx)(p.Z,{sx:{position:"absolute",right:60},children:e.bottomRightComponent}),(0,c.jsx)(N,(0,o._)((0,a._)({},(0,k.mY)(F)),{sx:{position:"absolute",right:12},disabled:K||!O.trim()}))]}),$&&ee>=14.9&&(0,c.jsxs)(p.Z,{sx:{px:2.5},children:[(0,c.jsx)(v.Z,{sx:{my:1.5}}),(0,c.jsx)(g.Z,{sx:{fontSize:14,color:"#98A2B3",textAlign:"center",my:1.5,lineHeight:1.5},children:"没有广告，直达结果"})]})]})});O.displayName="SearchConsultInput";var N=(0,x.ZP)(function(e){return(0,c.jsx)(m.Z,(0,o._)((0,a._)({className:j()(e.className,"send-arrow-button")},h()(e,"className")),{children:(0,c.jsx)(C.Z,{})}))},{name:"sendArrow"})(A()),P=O},22192:function(e,n,t){"use strict";t.d(n,{L:function(){return A}});var r=t(50059),i=t(57437),a=t(2265),o=t(55833),s=t(78693),l=t(59832),c=t(46387),u=t(8350),d=t(75624),h=t(44903),f=t(13708),p=t(47812),v=t(23048),m=t(25610),g=t(11183),x=t(54632),b=t(36570),w=t(74634),y=t(3712),C=t(22629),S=t(7870),j=t(19120),k=t(18769),E=t(35170),_=t(68956),T=t(48359),I=t.n(T),L=t(99376),R=t(75825),Z=t(15560),M=t(23760);function D(e){var n,t=(0,S.CU)(p.rG.SCHOLAR),r=(0,S.CU)(p.rG.KNOWLEDGE),o=(0,a.useId)(),d=(0,a.useRef)(null),b=(0,a.useRef)(null),w=(0,C.a2)(),y=(0,M.LM)(function(e){return e.login});(0,a.useEffect)(function(){var n=(d.current=(0,g.uM)({drawerProps:{anchor:"bottom",open:!1,sx:{".MuiDrawer-paper":{height:"80vh",maxHeight:420}},onClose:function(){var t;n(!1),null===(t=e.onClose)||void 0===t||t.call(e)}},id:o,children:(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.Z,{sx:{py:2,px:1,color:"var(--black)"},children:[(0,i.jsx)(l.Z,{sx:{position:"absolute",m:-1,left:16,color:"var(--black)"},onClick:function(){var n;null===(n=d.current)||void 0===n||n.close(!1),e.onBack()},children:(0,i.jsx)(h.Z,{})}),(0,i.jsx)(c.Z,{sx:{textAlign:"center",mb:2,fontSize:18,fontWeight:"bold"},children:"文献范围"}),m._O.map(function(t,r){var o=e.engineType===p.rG.SCHOLAR&&t.value===e.scholarLangRange;return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(f.NP,{checked:o,startSlot:(0,i.jsx)(f.db,{sx:{color:o?"primary.main":"var(--black)"},children:t.label}),sx:{height:64},onClick:function(r){var i;n(!1),null===(i=e.onClose)||void 0===i||i.call(e),e.onScholarLangRangeChange(t.value),e.onScholarLangItemClick(r,t.value)}}),r!==p.lr.length-1&&(0,i.jsx)(u.Z,{})]},t.value)})]})})})).close,t=b.current=(0,g.uM)({drawerProps:{anchor:"bottom",open:!1,sx:{".MuiDrawer-paper":{height:"80vh",maxHeight:420}},onClose:function(){var n;t.close(!1),null===(n=e.onClose)||void 0===n||n.call(e)}},id:o+"subject",children:(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.Z,{sx:{px:1,color:"var(--black)",position:"absolute",left:0,right:0},children:[(0,i.jsxs)(s.Z,{sx:{position:"sticky",top:0,py:2,backgroundColor:"var(--gray)",zIndex:1},children:[(0,i.jsx)(l.Z,{sx:{position:"absolute",m:-1,left:16,color:"var(--black)"},onClick:function(){var n;null===(n=b.current)||void 0===n||n.close(!1),e.onBack()},children:(0,i.jsx)(h.Z,{})}),(0,i.jsx)(c.Z,{sx:{textAlign:"center",mb:2,fontSize:18,fontWeight:"bold"},children:"专题"})]}),(0,i.jsx)(s.Z,{className:I()["list-title"],sx:{padding:"5px 10px !important"},children:"我的"}),L.map(function(n,r){var o=e.engineType===p.rG.KNOWLEDGE&&n.topicId===e.subjectId;return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(f.NP,{checked:o,startSlot:(0,i.jsx)(f.db,{sx:{color:o?"primary.main":"var(--black)"},children:n.name}),sx:{height:64},onClick:function(r){var i;t.close(!1),null===(i=e.onClose)||void 0===i||i.call(e),e.onSubjectChange(n.topicId,n.name),e.onSubjectItemClick(r,n.topicId)}}),r!==L.length-1&&(0,i.jsx)(u.Z,{})]},n.id)}),(0,i.jsx)(u.Z,{sx:{marginBottom:"10px"}}),(0,i.jsx)(s.Z,{className:I()["list-title"],sx:{padding:"5px 10px !important"},children:"分享给我"}),R.map(function(n,r){var o=e.engineType===p.rG.KNOWLEDGE&&n.topicId===e.subjectId;return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(f.NP,{checked:o,startSlot:(0,i.jsx)(f.db,{sx:{color:o?"primary.main":"var(--black)"},children:n.name}),sx:{height:64},onClick:function(r){var i;t.close(!1),null===(i=e.onClose)||void 0===i||i.call(e),e.onSubjectChange(n.topicId,n.name),e.onSubjectItemClick(r,n.topicId)}}),r!==R.length-1&&(0,i.jsx)(u.Z,{})]},n.id)})]})})})},[o,e.onClose,e.onOpen,e.scholarLangRange]);var j=function(){var n,t;null===(n=d.current)||void 0===n||n.open(),null===(t=e.onOpen)||void 0===t||t.call(e)},k=function(){var n,t;null===(n=b.current)||void 0===n||n.open(),null===(t=e.onOpen)||void 0===t||t.call(e)},E=(0,Z.S)(e),_=E.subjectList,T=E.loadFinished,L=(0,a.useMemo)(function(){return _?_.filter(function(e){return!e.share}):[]},[_]),R=(0,a.useMemo)(function(){return _?_.filter(function(e){return e.share}):[]},[_]);return(0,a.useEffect)(function(){T&&M.LM.getState().hasHydrated&&(!e.subjectId&&L.length>0?e.onSubjectChange(L[0].topicId,L[0].name):0==L.length&&e.onSubjectChange(null,null))},[e.subjectId,L,T]),(0,i.jsxs)(s.Z,{sx:{".meta-setting-item":{height:48}},children:[w.isTraditionalSearchEngineModeActive&&!e.isInSubjectDetailPage&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(f.ud,{engineType:p.rG.WEBPAGE,checked:p.rG.WEBPAGE===e.engineType,onClick:function(n){var t;null===(t=e.onItemClick)||void 0===t||t.call(e,n,p.rG.WEBPAGE),e.onEngineTypeChange(p.rG.WEBPAGE)}})}),!e.isInSubjectDetailPage&&(0,i.jsx)(f.ud,{engineType:p.rG.DEFAULT,checked:p.rG.DEFAULT===e.engineType,onClick:function(n){var t;null===(t=e.onItemClick)||void 0===t||t.call(e,n,p.rG.DEFAULT),e.onEngineTypeChange(p.rG.DEFAULT)}}),!e.isInSubjectDetailPage&&(0,i.jsx)(f.ud,{engineType:p.rG.PDF,checked:p.rG.PDF===e.engineType,onClick:function(n){var t;null===(t=e.onItemClick)||void 0===t||t.call(e,n,p.rG.PDF),e.onEngineTypeChange(p.rG.PDF)}}),!e.isInSubjectDetailPage&&(0,i.jsx)(f.d4,{startSlot:(0,i.jsxs)(v.K,{children:[(0,i.jsx)(v.K,{sx:{width:20,height:20},children:(0,i.jsx)(f.cu,{fill:t.fill,stroke:t.stroke})}),(0,i.jsx)(f.db,{sx:{color:p.rG.SCHOLAR===e.engineType?"primary.main":"var(--black)"},children:t.name})]}),onClick:function(n){var t;null===(t=e.onItemClick)||void 0===t||t.call(e,n,p.rG.SCHOLAR),e.onEngineTypeChange(p.rG.SCHOLAR)},endSlot:(0,i.jsxs)(x.Z,{onClick:function(e){e.stopPropagation(),j()},sx:{mr:-1.5,color:e.engineType===p.rG.SCHOLAR?"primary.main":"#98A2B3"},children:[(0,i.jsx)(c.Z,{className:"truncate",sx:{mr:1},children:p.wd[e.scholarLangRange]}),(0,i.jsx)(h.Z,{style:{flex:"none",transform:"rotate(180deg)"}})]})}),!e.isInSubjectDetailPage&&(0,i.jsx)(f.ud,{engineType:p.rG.IMAGE,checked:p.rG.IMAGE===e.engineType,onClick:function(n){var t;null===(t=e.onItemClick)||void 0===t||t.call(e,n,p.rG.IMAGE),e.onEngineTypeChange(p.rG.IMAGE)}}),!e.isInSubjectDetailPage&&(0,i.jsx)(f.ud,{engineType:p.rG.VIDEO,checked:p.rG.VIDEO===e.engineType,onClick:function(n){var t;null===(t=e.onItemClick)||void 0===t||t.call(e,n,p.rG.VIDEO),e.onEngineTypeChange(p.rG.VIDEO)}}),!e.isInSubjectDetailPage&&(0,i.jsx)(f.ud,{engineType:p.rG.PODCAST,checked:p.rG.PODCAST===e.engineType,onClick:function(n){var t;null===(t=e.onItemClick)||void 0===t||t.call(e,n,p.rG.PODCAST),e.onEngineTypeChange(p.rG.PODCAST)}}),y&&_&&_.length>0&&(0,i.jsx)(f.d4,{startSlot:(0,i.jsxs)(v.K,{sx:{flex:"none"},children:[(0,i.jsx)(v.K,{sx:{width:20,height:20},children:(0,i.jsx)(f.cu,{fill:r.fill,stroke:r.stroke})}),(0,i.jsx)(f.db,{sx:{color:p.rG.KNOWLEDGE===e.engineType?"primary.main":"var(--black)"},children:r.name})]}),onClick:function(n){var t,r,i,a;null===(t=e.onItemClick)||void 0===t||t.call(e,n,p.rG.KNOWLEDGE),e.onEngineTypeChange(p.rG.KNOWLEDGE),!y&&e.subjectId&&(e.onSubjectChange(null===(r=e.notLoginUserOnlyCanChooseSubject)||void 0===r?void 0:r.topicId,null===(i=e.notLoginUserOnlyCanChooseSubject)||void 0===i?void 0:i.name),e.onSubjectItemClick(n,null===(a=e.notLoginUserOnlyCanChooseSubject)||void 0===a?void 0:a.topicId))},endSlot:(0,i.jsxs)(x.Z,{onClick:function(e){e.stopPropagation(),k()},sx:{mr:-1.5,color:e.engineType===p.rG.KNOWLEDGE?"primary.main":"#98A2B3"},children:[(0,i.jsx)(c.Z,{className:"truncate",sx:{mr:1},children:(null==_?void 0:null===(n=_.find(function(n){return n.topicId===e.subjectId}))||void 0===n?void 0:n.name)||"全部"}),(0,i.jsx)(h.Z,{style:{flex:"none",transform:"rotate(180deg)"}})]})})]})}var A=(0,a.memo)((0,a.forwardRef)(function(e,n){var t=!!e.searchMode,l=(0,w.fl)(),h=(0,r._)((0,a.useState)(!1),2),f=h[0],v=h[1],m=(0,r._)((0,a.useState)(!1),2),g=m[0],x=m[1],y=(0,r._)((0,a.useState)(!1),2),C=y[0],S=y[1],_=(0,r._)((0,a.useState)(!1),2),T=_[0],I=_[1],Z=(0,r._)((0,a.useState)(null),2),M=Z[0],A=Z[1],N=E.GO.useAPI("settingDrawer"),P=(0,a.useMemo)(function(){return{toggle:function(e){v(null!=e?e:!f)},setTuneData:A,openWorkflowSettingDrawer:function(e){var n=N.current;null==n||n.open(e),null==n||n.setTuneData({onBack:function(){v(!0),null==n||n.setTuneData(null)},onClose:function(){null==n||n.setTuneData(null)}})}}},[f]),F=(0,r._)((0,a.useState)(e.subjectId||""),2),H=F[0],G=F[1];(0,a.useEffect)(function(){if(!e.subjectId&&e.subjectList){var n;G(null===(n=e.subjectList[0])||void 0===n?void 0:n.topicId)}},[e.subjectId,e.subjectList]);var W=(0,L.usePathname)(),B=(0,r._)((0,a.useState)(e.subjectName||""),2),q=B[0],z=B[1],U=(0,r._)((0,a.useState)(p.wb.ALL),2),V=U[0],K=U[1];return(0,a.useEffect)(function(){K(b.ZP.scholarLang.get())},[]),(0,a.useEffect)(function(){l.current&&b.ZP.scholarLang.set(V)},[V]),(0,a.useEffect)(function(){l.current&&b.ZP.defaultSubjectId.set(H||"")},[H]),(0,a.useEffect)(function(){l.current&&b.ZP.defaultSubjectName.set(q||"")},[q]),(0,a.useEffect)(function(){W!==R.l.Home||e.subjectId?(G(e.subjectId||null),z(e.subjectName||null)):(G(b.ZP.defaultSubjectId.get()||null),z(b.ZP.defaultSubjectId.get()||""))},[e.subjectId,e.subjectName,W]),o.HK.useRegister("searchSettingDrawer",function(){return P},[P]),(0,a.useImperativeHandle)(n,function(){return P},[P]),(0,a.useEffect)(function(){if(!f){var e;C||g||T||null==M||null===(e=M.onClose)||void 0===e||e.call(M)}},[f]),(0,i.jsxs)(d.ZP,{open:f,onClose:function(){var n;v(!1),null===(n=e.onDrawerClose)||void 0===n||n.call(e)},keepMounted:!0,anchor:"bottom",sx:{"& .MuiPaper-root":{maxHeight:"80vh",overflowY:"hidden"}},children:[(0,i.jsx)(j.Z,{title:e.drawerTitle,showBackBtn:e.showBackBtn,onClose:function(){var n;v(!1),null===(n=e.onDrawerClose)||void 0===n||n.call(e)},showCloseBtn:!0,onBack:function(){var n,t;M?null===(n=M.onBack)||void 0===n||n.call(M):(v(!1),null===(t=e.onDrawerClose)||void 0===t||t.call(e))}}),(0,i.jsxs)(s.Z,{className:"flex-auto-height",sx:{p:1,overflowY:"auto"},children:[(0,i.jsx)(c.Z,{sx:{mt:1,ml:2,fontSize:"12px",fontWeight:700,color:"var(--Gary-Group1-500)",lineHeight:"18px"},children:"搜索范围"}),(0,i.jsx)(D,{engineType:e.engineType,onEngineTypeChange:e.onEngineTypeChange,scholarLangRange:V,onScholarLangRangeChange:K,subjectId:H,subjectList:e.subjectList,onSubjectChange:function(n,t){var r=null!=n?n:null;G(r);var i=null!=t?t:null;z(i),e.onSubjectChange(r,i)},onSubjectItemClick:function(n,t){var r;e.onEngineTypeChange(p.rG.KNOWLEDGE),v(!1),null==M||null===(r=M.onBack)||void 0===r||r.call(M)},hideDivide:!!e.searchMode,onScholarLangItemClick:function(){var n;e.onEngineTypeChange(p.rG.SCHOLAR),v(!1),null==M||null===(n=M.onBack)||void 0===n||n.call(M)},onItemClick:function(){if(M){var e;null===(e=M.onBack)||void 0===e||e.call(M)}else v(!1)},onBack:function(){v(!0),x(!1)},onOpen:function(){v(!1),x(!0)},onClose:function(){x(!1)},isInSubjectDetailPage:e.isInSubjectDetailPage}),t&&e.searchMode&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{sx:{my:2}}),(0,i.jsx)(O,{mode:e.searchMode,onSettingDrawerBack:function(){v(!0),S(!1)},onModeItemClick:function(){var e;S(!1),v(!1),null==M||null===(e=M.onBack)||void 0===e||e.call(M)},engineType:e.engineType,onModeChange:e.onModeChange,onSettingDrawerClose:function(){S(!1)},onSettingDrawerOpen:function(){v(!1),S(!0)}})]}),!e.noWorkflow&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{sx:{my:2}}),(0,i.jsx)(k.Md,{onDrawerToggle:function(e,n){(n||e)&&v(!e),I(e)}})]}),(0,i.jsx)(s.Z,{sx:{height:12}})]})]})}));function O(e){var n=(0,_.cF)(),t=(0,a.useRef)(null),r=(0,a.useMemo)(function(){return p.lr.filter(function(e){return!n||"research"!==e})},[n]);return(0,a.useEffect)(function(){var n=(t.current=(0,g.uM)({drawerProps:{open:!1,anchor:"bottom",sx:{".MuiDrawer-paper":{height:"80vh",maxHeight:420}},onClose:function(){var t;n(!1),null===(t=e.onSettingDrawerClose)||void 0===t||t.call(e)}},children:(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.Z,{sx:{py:2,px:1,color:"var(--black)"},children:[(0,i.jsx)(l.Z,{sx:{position:"absolute",m:-1,left:16,color:"var(--black)"},onClick:function(){var t;n(!1),null===(t=e.onSettingDrawerBack)||void 0===t||t.call(e)},children:(0,i.jsx)(h.Z,{})}),(0,i.jsx)(c.Z,{sx:{textAlign:"center",mb:2,fontSize:18,fontWeight:"bold"},children:"搜索强度"}),r.map(function(t,r,s){var l=t===e.mode,c=e.engineType===p.rG.IMAGE||e.engineType===p.rG.PODCAST&&"research"===t;return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(f.NP,{checked:l,onClick:function(r){var i;e.onModeChange(t),n(!1),null===(i=e.onSettingDrawerClose)||void 0===i||i.call(e),e.onModeItemClick(r,t)},disabled:c,sx:{height:64,flexGrow:0},startSlot:(0,i.jsx)(f.db,{sx:{color:l?"primary.main":"var(--black)"},children:o.eQ[t]})}),r!==s.length-1&&(0,i.jsx)(u.Z,{})]},t)})]})})})).close},[n,e.engineType,e.onModeChange,e.onModeItemClick,e.mode]),(0,i.jsx)(f.d4,{startSlot:(0,i.jsxs)(v.K,{children:[(0,i.jsx)(y.Z,{style:{color:"var(--black2)"}}),(0,i.jsx)(f.db,{children:"强度"})]}),onClick:function(){var n,r;null===(n=t.current)||void 0===n||n.open(),null===(r=e.onSettingDrawerOpen)||void 0===r||r.call(e)},sx:{height:50},endSlot:(0,i.jsxs)(x.Z,{sx:{mr:-1.5,color:"#98A2B3"},children:[(0,i.jsx)(c.Z,{sx:{mr:1,color:"primary.main"},children:o.eQ[e.mode]}),(0,i.jsx)(h.Z,{style:{transform:"rotate(180deg)"}})]})})}},46654:function(e,n,t){"use strict";t.r(n),t.d(n,{ChangeSearchRangeButton:function(){return T},DefaultSetting:function(){return I},EngineSetting:function(){return _}});var r=t(50059),i=t(57437),a=t(2265),o=t(47812),s=t(25610),l=t(78693),c=t(46387),u=t(8350),d=t(48359),h=t.n(d),f=t(36760),p=t.n(f),v=t(54632);t(21652),t(53852);var m=t(13708),g=t(15273),x=t(23048),b=t(22629),w=t(7870),y=t(74634),C=t(23760),S=t(99376),j=t(75825),k=t(15707),E=t(15560);function _(e){var n,t=(0,w.CU)(o.rG.SCHOLAR),d=(0,w.CU)(o.rG.KNOWLEDGE),f=(0,b.a2)(),p=(0,y.a8)(),v=(0,E.S)(e),_=v.subjectList,T=v.loadFinished,I=(0,a.useMemo)(function(){return _?_.filter(function(e){return!e.share}):[]},[_]),L=(0,a.useMemo)(function(){return _?null==_?void 0:_.filter(function(e){return e.share}):[]},[_]),R=(0,C.LM)(function(e){return e.login}),Z=_||[],M=(0,r._)((0,a.useState)(e.subjectId),2),D=M[0],A=M[1];(0,a.useEffect)(function(){T&&_&&C.LM.getState().hasHydrated&&(!e.subjectId&&_.length>0?(A(_[0].topicId),e.onSubjectChange(_[0].topicId,_[0].name)):(A(e.subjectId),0==_.length&&(A(null),e.onSubjectChange(null,null))))},[e.subjectId,_,T]);var O=(0,a.useMemo)(function(){var n=new Set(e.hideItems);return e.isInSubjectDetailPage&&(n.add(o.rG.WEBPAGE),n.add(o.rG.DEFAULT),n.add(o.rG.PDF),n.add(o.rG.SCHOLAR),n.add(o.rG.IMAGE),n.add(o.rG.VIDEO),n.add(o.rG.PODCAST)),f.isTraditionalSearchEngineModeActive||n.add(o.rG.WEBPAGE),n},[e.hideItems,e.isInSubjectDetailPage,f.isTraditionalSearchEngineModeActive]),N=(0,S.usePathname)();return(0,a.useMemo)(function(){return(0,k.u)(N)},[N]).path,j.l.Search,(0,i.jsxs)(l.Z,{sx:{".meta-setting-item":{my:.5}},children:[(0,i.jsx)(c.Z,{sx:{p:"0 12px",fontSize:"10px",fontWeight:700,color:"#98A2B3"},children:"搜索范围"}),p&&!O.has(o.rG.WEBPAGE)&&(0,i.jsx)(m.ud,{engineType:o.rG.WEBPAGE,checked:e.engineType===o.rG.WEBPAGE,onClick:function(n){var t;null===(t=e.onItemClick)||void 0===t||t.call(e,n,o.rG.WEBPAGE),e.onEngineTypeChange(o.rG.WEBPAGE)}}),p&&!O.has(o.rG.DEFAULT)&&(0,i.jsx)(m.ud,{engineType:o.rG.DEFAULT,checked:e.engineType===o.rG.DEFAULT,onClick:function(n){var t;null===(t=e.onItemClick)||void 0===t||t.call(e,n,o.rG.DEFAULT),e.onEngineTypeChange(o.rG.DEFAULT)}}),!O.has(o.rG.PDF)&&(0,i.jsx)(m.ud,{engineType:o.rG.PDF,checked:e.engineType===o.rG.PDF,onClick:function(n){var t;null===(t=e.onItemClick)||void 0===t||t.call(e,n,o.rG.PDF),e.onEngineTypeChange(o.rG.PDF)}}),!O.has(o.rG.SCHOLAR)&&(0,i.jsx)(m.V9,{startSlot:(0,i.jsxs)(x.K,{children:[(0,i.jsx)(x.K,{sx:{width:20,height:20},children:(0,i.jsx)(m.cu,{fill:t.fill,stroke:t.stroke})}),(0,i.jsx)(m.db,{sx:{color:e.engineType===o.rG.SCHOLAR?"primary.main":"var(--black)"},children:t.name})]}),onClick:function(n){var t;null===(t=e.onItemClick)||void 0===t||t.call(e,n,o.rG.SCHOLAR),e.onEngineTypeChange(o.rG.SCHOLAR)},popoverContent:(0,i.jsx)(g.Z,{sx:{width:200,p:.5},children:s._O.map(function(n){var t=e.engineType===o.rG.SCHOLAR&&n.value===e.scholarLangRange;return(0,i.jsx)(m.NP,{startSlot:(0,i.jsx)(l.Z,{sx:{color:t?"primary.main":"var(--black)",fontSize:"12px"},children:n.label}),sx:{my:.5},checked:t,onClick:function(t){e.onScholarLangItemClick(t,n.value),e.onEngineTypeChange(o.rG.SCHOLAR),e.onScholarLangRangeChange(n.value)}},n.value)})}),beforeEndSlot:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(m.$q,{sx:{color:e.engineType===o.rG.SCHOLAR?"primary.main":"var(--Gary-Group1-500)",fontSize:"12px"},children:s._O.find(function(n){return n.value===e.scholarLangRange}).label})})}),!O.has(o.rG.IMAGE)&&(0,i.jsx)(m.ud,{engineType:o.rG.IMAGE,checked:e.engineType===o.rG.IMAGE,onClick:function(n){var t;null===(t=e.onItemClick)||void 0===t||t.call(e,n,o.rG.IMAGE),e.onEngineTypeChange(o.rG.IMAGE)}}),!O.has(o.rG.VIDEO)&&(0,i.jsx)(m.ud,{engineType:o.rG.VIDEO,checked:e.engineType===o.rG.VIDEO,onClick:function(n){var t;null===(t=e.onItemClick)||void 0===t||t.call(e,n,o.rG.VIDEO),e.onEngineTypeChange(o.rG.VIDEO)}}),!O.has(o.rG.PODCAST)&&(0,i.jsx)(m.ud,{engineType:o.rG.PODCAST,checked:e.engineType===o.rG.PODCAST,onClick:function(n){var t;null===(t=e.onItemClick)||void 0===t||t.call(e,n,o.rG.PODCAST),e.onEngineTypeChange(o.rG.PODCAST)}}),!R&&e.notLoginUserOnlyCanChooseSubject&&(0,i.jsx)(m.d4,{onClick:function(n){var t,r,i,a;null===(t=e.onItemClick)||void 0===t||t.call(e,n,o.rG.KNOWLEDGE),e.onEngineTypeChange(o.rG.KNOWLEDGE),e.onSubjectChange(null===(r=e.notLoginUserOnlyCanChooseSubject)||void 0===r?void 0:r.topicId,null===(i=e.notLoginUserOnlyCanChooseSubject)||void 0===i?void 0:i.name),e.onSubjectItemClick(n,null===(a=e.notLoginUserOnlyCanChooseSubject)||void 0===a?void 0:a.topicId)},startSlot:(0,i.jsxs)(x.K,{children:[(0,i.jsx)(x.K,{sx:{width:20,height:20},children:(0,i.jsx)(m.cu,{fill:d.fill,stroke:d.stroke})}),(0,i.jsx)(m.db,{sx:{color:e.engineType===o.rG.KNOWLEDGE?"primary.main":"var(--black)"},children:d.name})]}),endSlot:(0,i.jsx)(x.K,{sx:{overflow:"hidden"},children:(0,i.jsx)(m.$q,{sx:{color:e.engineType===o.rG.KNOWLEDGE?"primary.main":"var(--Gary-Group1-500)",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"12px"},children:e.notLoginUserOnlyCanChooseSubject.name})})}),R&&_&&_.length>0&&(0,i.jsx)(m.V9,{startSlot:(0,i.jsxs)(x.K,{children:[(0,i.jsx)(x.K,{sx:{width:20,height:20},children:(0,i.jsx)(m.cu,{fill:d.fill,stroke:d.stroke})}),(0,i.jsx)(m.db,{sx:{color:e.engineType===o.rG.KNOWLEDGE?"primary.main":"var(--black)"},children:d.name})]}),onClick:function(n){var t;null===(t=e.onItemClick)||void 0===t||t.call(e,n,o.rG.KNOWLEDGE),e.onEngineTypeChange(o.rG.KNOWLEDGE)},popoverContent:(0,i.jsxs)(g.Z,{sx:{width:200,p:.5,height:"210px",overflowY:"auto"},children:[(0,i.jsx)(l.Z,{className:h()["list-title"],sx:{padding:"5px 10px !important",fontSize:"12px"},children:"我的"}),I.map(function(n){var t=e.engineType===o.rG.KNOWLEDGE&&n.topicId===D;return(0,i.jsx)(m.NP,{startSlot:(0,i.jsx)(l.Z,{sx:{color:t?"primary.main":"var(--black)",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"12px"},children:n.name}),sx:{my:.5},checked:t,onClick:function(t){e.onSubjectChange(n.topicId,n.name),e.onEngineTypeChange(o.rG.KNOWLEDGE),e.onSubjectItemClick(t,n.topicId)}},n.id)}),L.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{sx:{margin:"5px 0"}}),(0,i.jsx)(l.Z,{className:h()["list-title"],sx:{padding:"5px 10px !important"},children:"分享给我"}),L.map(function(n){var t=e.engineType===o.rG.KNOWLEDGE&&n.topicId===D;return(0,i.jsx)(m.NP,{startSlot:(0,i.jsx)(l.Z,{sx:{color:t?"primary.main":"var(--black)",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"12px"},children:n.name}),sx:{my:.5},checked:t,onClick:function(t){e.onSubjectChange(n.topicId,n.name),e.onEngineTypeChange(o.rG.KNOWLEDGE),e.onSubjectItemClick(t,n.topicId)}},n.id)})]})]}),beforeEndSlot:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(m.$q,{sx:{color:e.engineType===o.rG.KNOWLEDGE?"primary.main":"var(--Gary-Group1-500)",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"12px"},children:(null===(n=Z.find(function(e){return e.topicId===D}))||void 0===n?void 0:n.name)||"全部"})})})]})}function T(e){var n=e.engineType,t=e.dropDownVisible,r=e.noLoginSubjectName,o=(0,a.useMemo)(function(){return(0,w.CU)(n)},[n]);return(0,i.jsxs)(v.Z,{ref:e._ref,sx:{p:1,m:-1,cursor:"default"},onClick:function(n){var t;null===(t=e.onClick)||void 0===t||t.call(e,n)},className:p()(h()["search-range"]),children:[(0,i.jsx)(m.cu,{fill:o.fill,stroke:o.stroke}),(0,i.jsx)(l.Z,{sx:{margin:"0 10px 0 5px"},className:h()["active-range-name"],children:r||o.name}),(0,i.jsx)(l.Z,{className:t?h().expand:h().collapse,children:(0,i.jsx)("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M1 1.5L6 6.5L11 1.5",stroke:"#98A2B3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})}var I={engineType:o.rG.DEFAULT,language:o.z0.ZH,extendRead:!0,searchMode:"detail"}},16039:function(e,n,t){"use strict";t.d(n,{Z:function(){return y}});var r=t(2403),i=t(5194),a=t(46796),o=t(5853),s=t(57437),l=t(34040),c=t(45008),u=t(2265),d=t(40100),h=t(46387),f=t(78693),p=t(16210),v=t(39155),m=t(7870);function g(){var e=(0,c._)(["\n    flex: 1 1 50%;\n    color: var(--black4);\n"]);return g=function(){return e},e}var x=(0,u.memo)((0,u.forwardRef)(function(e,n){return(0,s.jsxs)(d.k,{open:e.open,onClose:e.onClose,className:e.className,sx:(0,m.Vc)((0,m.KI)({width:"90vw",maxWidth:350,boxSizing:"border-box",p:0},2),e.sx),children:["string"==typeof e.title?(0,s.jsx)(h.Z,{sx:{fontSize:18,fontWeight:"bold",color:"var(--black)",textAlign:"center",mt:3.5},children:e.title}):e.title,"string"==typeof e.content?(0,s.jsx)(h.Z,{sx:{color:"var(--black4)",textAlign:"center",mt:2},children:e.content}):e.content,(0,s.jsxs)(f.Z,{className:"flex-row",sx:{mt:4,height:48,borderTop:"1px solid var(--border-color2)"},children:[(0,s.jsx)(b,{onClick:e.onCancel,children:"取消"}),(0,s.jsx)(f.Z,{sx:{width:"1px",bgcolor:"var(--border-color2)"}}),(0,s.jsx)(b,{sx:{color:"#F64C4C"},onClick:e.onConfirm,children:"确定"})]})]})})),b=(0,p.ZP)(v.Z,{name:"meta-confirm-dialog-v2-button"})(g()),w=t(27030);function y(e){var n,t=e.onConfirm,c=e.onClose,u=e.onCancel,d=(0,a._)(e,["onConfirm","onClose","onCancel"]),h=document.createElement("div"),f=(0,l.createRoot)(h),p=function(){f.unmount(),h.remove()},v=(0,w.I)();return f.render((0,s.jsx)(x,(0,i._)({open:!0,onConfirm:(0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,null==t?void 0:t()];case 1:if(e.sent())return[2];return p(),v.resolve(),[2]}})}),onCancel:(0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,null==u?void 0:u()];case 1:if(e.sent())return[2];return p(),v.reject("cancel"),[2]}})}),onClose:(n=(0,r._)(function(e){return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,null==c?void 0:c(e)];case 1:if(n.sent())return[2];return p(),v.reject(e),[2]}})}),function(e){return n.apply(this,arguments)})},d))),document.body.appendChild(h),v.done}},15560:function(e,n,t){"use strict";t.d(n,{Q:function(){return p},S:function(){return v}});var r=t(2403),i=t(50059),a=t(5853),o=t(2265),s=t(23760),l=t(39207),c=t(62221),u=t(7870),d=t(9298),h=t(22322),f=t(96339);function p(e){var n,t=(0,i._)((0,o.useState)([]),2),p=t[0],v=t[1],m=(0,s.LM)(function(e){return e.login}),g=(0,i._)((0,o.useState)(!1),2),x=g[0],b=g[1],w=(0,o.useCallback)(function(){b(!0),(0,l.Pao)().then(function(e){0===e.data.errCode&&v(e.data.data)}).finally(function(){b(!1)})},[]);return(0,o.useEffect)(function(){m&&w()},[m]),{list:p,createNewTopic:(0,o.useCallback)((n=(0,r._)(function(n){var t,r,i,o,s;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(!m)return[3,5];if("string"!=typeof n)return[3,1];return o={fileName:n,description:""},[3,3];case 1:return[4,(0,c.Z)(void 0,e)];case 2:o=a.sent(),a.label=3;case 3:return r=(t=o).fileName,i=t.description,[4,(0,l.vRe)(r,i)];case 4:if(s=a.sent(),(0,u.dW)(d.Z.SUBJECT_CREATE_NEW,{subjectName:r,res:s.data}),0===s.data.errCode)return(0,h.y)("创建成功",{variant:"success",autoHideDuration:1500}),w(),[2,s.data.data];return(0,h.y)(s.data.errMsg,{variant:"error",autoHideDuration:1500}),[3,6];case 5:(0,f.x3)({tipsHtml:"登录后，可<b>免费</b>使用知识库功能",showTips:!0,logDesc:"subject-login",redirectUrl:location.href}),a.label=6;case 6:return[2]}})}),function(e){return n.apply(this,arguments)}),[m,w]),subjectIsloading:x,manualRefreshSubjectData:w}}function v(e){var n=(0,i._)((0,o.useState)(e.subjectList),2),t=n[0],r=n[1],a=(0,i._)((0,o.useState)(!1),2),c=a[0],u=a[1],d=(0,s.LM)(function(e){return e.login});return(0,o.useEffect)(function(){d&&void 0===e.subjectList?(0,l.Pao)().then(function(e){0===e.data.errCode&&(r(e.data.data),u(!0))}):(r(e.subjectList),u(!0))},[e.subjectList,d]),{subjectList:t,loadFinished:c}}},18769:function(e,n,t){"use strict";t.d(n,{Md:function(){return ev},X9:function(){return ef}});var r,i=t(5194),a=t(1780),o=t(46796),s=t(50059),l=t(45008),c=t(85735),u=t(57437),d=t(78693),h=t(19643),f=t(47080),p=t(73904),v=t(28450),m=t(46387),g=t(16210),x=t(8350),b=t(75624),w=t(59832),y=t(25001),C=t(64189),S=t(30020),j=t(2265),k=t(15273),E=t(11741),_=t(54632),T=t(48365),I=t(92664),L=t(85721),R=t(29762),Z=t(9950),M=t(38305),D=t(19120),A=t(7870),O=t(13708),N=t(23048),P=t(94746);function F(){return(F=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var H=function(e){return P.createElement("svg",F({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),r||(r=P.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.167 16.668H14c-1.4 0-2.1 0-2.635-.273a2.5 2.5 0 0 1-1.092-1.092C10 14.768 10 14.068 10 12.668V7.335c0-1.4 0-2.1.273-2.635a2.5 2.5 0 0 1 1.092-1.093C11.9 3.335 12.6 3.335 14 3.335h.167m0 13.333a1.667 1.667 0 1 0 3.333 0 1.667 1.667 0 0 0-3.333 0m0-13.333a1.667 1.667 0 1 0 3.333 0 1.667 1.667 0 0 0-3.333 0M5.833 10h8.334m-8.334 0a1.667 1.667 0 1 1-3.333 0 1.667 1.667 0 0 1 3.333 0m8.334 0a1.667 1.667 0 1 0 3.333 0 1.667 1.667 0 0 0-3.333 0"})))},G=t(44903),W=t(62917),B=t(35170),q=t(74634),z=t(94841),U=t(68956);function V(){var e=(0,l._)(["\n    font-size: 12px;\n    font-weight: 700;\n    color: var(--Gary-Group1-500);\n    margin: 12px 16px 6px;\n"]);return V=function(){return e},e}function K(){var e=(0,l._)(["\n    height: 50px;\n"]);return K=function(){return e},e}function Q(){var e=(0,l._)(["\n    padding: 0;    \n"]);return Q=function(){return e},e}function Y(){var e=(0,l._)(["\n    &[class] {\n        flex: 0;\n        \n    }\n    & + & {\n        margin-top: 24px;\n    }\n"]);return Y=function(){return e},e}var J=(0,t(30166).default)(function(){return Promise.all([t.e(47999),t.e(4637),t.e(21100),t.e(77962),t.e(37160),t.e(30470),t.e(21634),t.e(42845),t.e(58509),t.e(57930),t.e(13521),t.e(14865),t.e(89576),t.e(93316),t.e(56873),t.e(41004),t.e(14449),t.e(98255),t.e(96839),t.e(75181),t.e(35322),t.e(63796),t.e(98323),t.e(21602),t.e(85180),t.e(3615),t.e(97120),t.e(39650),t.e(15598),t.e(60172)]).then(t.bind(t,10301)).then(function(e){return{default:e.MarkdownContent}})},{loadableGenerated:{webpack:function(){return[10301]}},ssr:!1}),X="全部",$="最近",ee=(0,j.memo)((0,j.forwardRef)(function(e,n){var t=(0,y.W)({request:function(){return(0,C.B)().then(function(e){return e})},defaultData:[]}),r=(0,y.W)({request:W.receiveRecentWorkflowData,defaultData:null}),i=(0,j.useRef)(null);(0,j.useImperativeHandle)(n,function(){return{scrollRef:p,populate:function(e){var n;if(t.data.length){var r=t.data.find(function(n){return n.flows.find(function(n){return n.id===(null==e?void 0:e.flowId)})}).name;e.switchTab?l(r):l(X)}null===(n=i.current)||void 0===n||n.populate(e)}}},[t]);var a=(0,s._)((0,j.useState)(X),2),o=a[0],l=a[1],c=(0,W.useSubmitWorkflowFunc)(e.onSubmit),h=(0,j.useMemo)(function(){return o===X?t.data:o===$?r.data:t.data.find(function(e){return e.name===o})},[o,t.data]),f=(0,j.useCallback)(function(e,n){c({flow:e,variableInputs:Object.fromEntries(n.map(function(e){return[e.name,e.value]}))})},[c]),p=(0,j.useRef)(null);return(0,u.jsxs)(d.Z,{className:"flex-auto-height",sx:{display:"flex",flexDirection:"column"},children:[e.showTabs&&(0,u.jsx)(en,{pending:t.isPending,tab:o,onChange:function(n){l(n),e.onSwitchTab(o)},data:t.data}),(0,u.jsx)(d.Z,{className:"flex-auto-height",sx:{overflow:"auto"},ref:p,children:(0,u.jsx)(es,{data:h,pending:t.isPending,onSubmit:f,onUse:e.onUseFlow,onEnter:e.onEnterFlow,ref:i})})]})}));function en(e){var n=(0,U.cF)();return e.pending?(0,u.jsxs)(h.Z,{direction:"row",spacing:1,alignItems:"center",sx:{px:1.5,height:50,borderBottom:"1px solid var(--border-color2)"},children:[(0,u.jsx)(f.Z,{variant:"rounded",sx:{flex:1,height:30}}),(0,u.jsx)(f.Z,{variant:"rounded",sx:{flex:2,height:30}}),(0,u.jsx)(f.Z,{variant:"rounded",sx:{flex:3,height:30}})]}):(0,u.jsxs)(p.Z,{variant:"scrollable",scrollButtons:n,value:e.tab,onChange:function(n,t){e.onChange(t)},sx:{height:50,borderBottom:"1px solid var(--border-color2)",".MuiTabScrollButton-root.Mui-disabled":{opacity:.4},".MuiTabs-scroller":{},".MuiTabs-scroller .MuiTabs-indicator[class]":{borderRadius:"10px",height:"2px",bgcolor:"#1570ef",transform:"translateY(0px) scaleX(.6)"},".MuiTab-root":{minWidth:0,color:"var(--black)"},".Mui-selected[class][class]":{color:"#1570ef"}},children:[(0,u.jsx)(v.Z,{label:X,value:X}),(0,u.jsx)(v.Z,{label:$,value:$}),e.data.map(function(e){return(0,u.jsx)(v.Z,{label:e.name,value:e.name},e.name)})]})}function et(e,n){var t=(null==e?void 0:e[n])||"";return Array.isArray(t)?t.join("，"):t}function er(e,n){return e.variable.filter(function(e){return e.type===S.RY.STRING}).map(function(e){return{name:e.name,value:et(n,e.name)}})}var ei=(0,j.memo)((0,j.forwardRef)(function(e,n){var t=(0,T.Q$)(),r=(0,s._)((0,j.useState)(e.variableInputs),2),i=r[0],a=r[1];(0,j.useImperativeHandle)(n,function(){return{populate:function(e){a(e.variableInputs)}}},[]);var o=(0,s._)((0,j.useState)(er(e.activeItem,i)),2),l=o[0],h=o[1];(0,q.gU)(function(){h(er(e.activeItem,i))},[e.activeItem]);var f=(0,j.useMemo)(function(){return l.every(function(e){return!!e.value.trim()})},[l]),p=(0,s._)((0,j.useState)(!1),2),v=p[0],g=p[1];return(0,u.jsx)(d.Z,{sx:{p:2,height:1,boxSizing:"border-box"},children:(0,u.jsxs)(T.mG,{sx:{height:"100%",display:"flex",flexDirection:"column","input,textarea":{"::placeholder":{fontSize:14}}},disabled:v,_ref:t,onSubmit:function(n){n.preventDefault();var r=t.current.validate(),i=r.every(function(e){return 0===e.hitRules.length}),a=e.activeItem.variable.filter(function(e){return e.type===S.RY.STRING_ARRAY}).map(function(e){return e.name});i&&(e.onSubmit(r.map(function(e){return{name:e.name,value:a.includes(e.name)?e.value.split(/[，,]/):e.value}})),g(!0))},children:[e.activeItem.variable.map(function(e){var n=e.placeholder||"请输入...",t=e.type===S.RY.STRING,r=et(i,e.name);return(0,u.jsx)(T.xf,{name:e.name,onChange:function(n){t&&(l.find(function(n){return n.name===e.name}).value=n,h((0,c._)(l)))},defaultValue:r,children:(0,u.jsxs)(eh,{showIndicateText:!1,children:[(0,u.jsx)(ea,{inputItem:e}),(0,u.jsxs)(L.W,{sx:{width:1},children:[e.type===S.RY.STRING&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(I.H,{placeholder:n,type:"text",maxLength:S.vu[S.RY.STRING]}),(0,u.jsx)(M.R,{rules:[M.n]})]}),e.type===S.RY.LONG_STRING&&(0,u.jsx)(R.u,{sx:{height:84},placeholder:n,inputMode:"text",maxLength:S.vu[S.RY.LONG_STRING]}),e.type===S.RY.STRING_ARRAY&&(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.H,{placeholder:n,inputMode:"text",maxLength:S.vu[S.RY.STRING_ARRAY]})})]}),e.type===S.RY.STRING_ARRAY&&(0,u.jsxs)(m.Z,{sx:{fontSize:14,color:"var(--black4)",mt:1},children:["支持输入多个",e.name,"，用“，”分隔开即可"]})]})},e.name)}),(0,u.jsx)(d.Z,{sx:{height:50,flex:"none"}}),(0,u.jsx)(_.Z,{type:"submit",disabled:!f||v,sx:{position:"sticky",bottom:16,flex:"none",mt:"auto",height:40},variant:"contained",children:"确定"})]})})}));function ea(e){var n=(0,T.bc)().fieldState;return(0,u.jsxs)(d.Z,{className:"fr-ac",sx:{justifyContent:"space-between",mb:1},children:[(0,u.jsxs)(m.Z,{fontSize:14,sx:{color:"var(--black)"},fontWeight:"bold",children:[e.inputItem.name,":"]}),n&&(0,u.jsxs)(m.Z,{fontSize:14,color:"#98A2B3",children:[n.value.length,"/",S.vu[e.inputItem.type]]})]})}function eo(e){return(0,u.jsxs)(d.Z,{sx:{height:1,display:"flex",flexDirection:"column"},children:[(0,u.jsxs)(d.Z,{className:"fr-ac",sx:{justifyContent:"space-between",px:1.5,mt:1},children:[(0,u.jsx)(m.Z,{sx:{fontWeight:"bold",fontSize:16},children:"介绍"}),"number"==typeof e.activeItem.cost&&(0,u.jsxs)(m.Z,{sx:{fontWeight:400,fontSize:16,color:"var(--Gary-Group1-500)"},children:["所需额度:",e.activeItem.cost]})]}),(0,u.jsx)(d.Z,{sx:{p:2,ul:{margin:0,pl:2,lineHeight:1.7}},children:(0,u.jsx)(J,{content:e.activeItem.prompt,isFinished:!0})}),(0,u.jsx)(d.Z,{sx:{p:2,position:"sticky",bottom:0,mt:"auto"},children:(0,u.jsx)(_.Z,{onClick:e.onUse,sx:{width:1,height:40},variant:"contained",children:"使用"})})]})}var es=(0,j.memo)((0,j.forwardRef)(function(e,n){var t=(0,s._)((0,j.useState)(null),2),r=t[0],i=t[1],a=(0,j.useCallback)(function(n){i(n),e.onEnter({title:n.name,onBack:function(){i(null)}})},[e.onEnter]),o=(0,j.useRef)(null),l=(0,s._)((0,j.useState)(!1),2),c=l[0],p=l[1],v=(0,j.useCallback)(function(n){e.onUse({title:n.name,onBack:function(){p(!1),w(void 0)}}),p(!0)},[e.onUse]);(0,j.useImperativeHandle)(n,function(){return{populate:function(n){var t=null==n?void 0:n.flowId;if(t&&e.data){var r=null;if(Array.isArray(e.data)){var o=!0,s=!1,l=void 0;try{for(var c,u=e.data[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value,h=!0,f=!1,m=void 0;try{for(var x,b=d.flows[Symbol.iterator]();!(h=(x=b.next()).done);h=!0){var y=x.value;if(y.id===t){r=y;break}}}catch(e){f=!0,m=e}finally{try{h||null==b.return||b.return()}finally{if(f)throw m}}}}catch(e){s=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}}else if(e.data){var C=!0,S=!1,j=void 0;try{for(var k,E=e.data.flows[Symbol.iterator]();!(C=(k=E.next()).done);C=!0){var _=k.value;if(_.id===t){r=_;break}}}catch(e){S=!0,j=e}finally{try{C||null==E.return||E.return()}finally{if(S)throw j}}}if(r){if(n.variableInputs)a(r),v(r),w(n.variableInputs);else{i(null),p(!1),w(void 0);var T=r.id||r.name;setTimeout(function(){var e=g.current.get(T);e&&e.scrollIntoView({block:"center",behavior:"smooth"})},500)}}}}}},[a,v,e.data]);var g=(0,j.useRef)(new Map),x=(0,s._)((0,j.useState)(),2),b=x[0],w=x[1];return e.pending?(0,u.jsxs)(h.Z,{spacing:1.25,sx:{mt:1.25,px:1.5},children:[(0,u.jsx)(f.Z,{sx:{height:40,width:"60%"},variant:"rounded"}),(0,u.jsx)(f.Z,{sx:{height:40,width:"60%"},variant:"rounded"}),(0,u.jsx)(f.Z,{sx:{height:40,width:"80%"},variant:"rounded"})]}):r?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(z.K,{show:!c,sx:{height:1},children:(0,u.jsx)(eo,{activeItem:r,onUse:function(){v(r)}})}),(0,u.jsx)(z.K,{show:c,sx:{height:1},children:(0,u.jsx)(ei,{activeItem:r,ref:o,variableInputs:b,onSubmit:function(n){e.onSubmit(r,n)}})})]}):!e.data||(Array.isArray(e.data)?!e.data.length||e.data.every(function(e){return 0===e.flows.length}):!e.data.flows.length)?(0,u.jsx)(m.Z,{fontSize:16,sx:{px:2,pt:2.5,color:"var(--Gary-Group1-500)"},children:"暂无工作流"}):Array.isArray(e.data)?(0,u.jsx)(d.Z,{sx:{pb:2.5},children:e.data.map(function(e,n,t){return(0,u.jsxs)(j.Fragment,{children:[(0,u.jsx)(el,{children:e.name}),(0,u.jsx)(ed,{children:e.flows.map(function(e){return(0,u.jsx)(ec,{ref:function(n){var t=e.id||e.name;n?g.current.set(t,n):g.current.delete(t)},onClick:function(){return a(e)},children:e.name},e.name)})}),n!==t.length-1&&(0,u.jsx)(eu,{})]},e.id)})}):(0,u.jsx)(ed,{sx:{mt:1},children:e.data.flows.map(function(e){return(0,u.jsx)(ec,{ref:function(n){var t=e.id||e.name;n?g.current.set(t,n):g.current.delete(t)},onClick:function(){return a(e)},children:e.name},e.name)})})})),el=(0,g.ZP)("p")(V()),ec=(0,g.ZP)(E.Z)(K()),eu=function(){return(0,u.jsx)(x.Z,{orientation:"horizontal",sx:{mx:2,my:2}})},ed=(0,g.ZP)(k.Z)(Q()),eh=(0,g.ZP)(Z.A)(Y());function ef(e){var n=(0,s._)((0,j.useState)(!1),2),t=n[0],r=n[1],i=(0,s._)((0,j.useState)(null),2),a=i[0],o=i[1],l=(0,j.useCallback)(function(){r(!1),null==a||a.onClose()},[a]),c=(0,j.useRef)(null),d=(0,j.useCallback)(function(){r(!1),null==a||a.onBack()},[a]);return B.GO.useRegister("settingDrawer",function(){return{setTuneData:o,open:function(e){if(r(!0),null==e?void 0:e.populateData){var n;null===(n=c.current)||void 0===n||n.populate(e.populateData)}},close:function(){r(!1)}}},[]),(0,u.jsx)(ep,{open:t,onClose:l,showBackButton:!!(null==a?void 0:a.onClose),onBack:d,ref:c,onSearchSubmit:e.onSubmit})}var ep=(0,j.memo)((0,j.forwardRef)(function(e,n){var t=e.sx,r=e.showBackButton,l=e.onBack,d=(0,o._)(e,["sx","showBackButton","onBack"]),h=(0,s._)((0,j.useState)([]),2),f=h[0],p=h[1],v=(0,j.useRef)(null);(0,j.useImperativeHandle)(n,function(){return{populate:function(e){var n;null===(n=v.current)||void 0===n||n.populate(e)}}});var m=(0,j.useMemo)(function(){return[{title:"选择工作流",onBack:function(){l()}}].concat((0,c._)(f))},[l,e.onClose,f]),g=(0,j.useMemo)(function(){return m[m.length-1]},[m]),x=(0,j.useCallback)(function(e,n){n||p([])},[]),w=(0,s._)((0,j.useState)([]),2),y=w[0],C=w[1],S=function(){var e;return null===(e=v.current)||void 0===e?void 0:e.scrollRef.current},k=(0,j.useCallback)(function(e){var n;p(function(n){var t=(0,c._)(n);return t[0]=e,t}),y[0]=(null===(n=S())||void 0===n?void 0:n.scrollTop)||0,C((0,c._)(y))},[y]),E=(0,j.useCallback)(function(e){var n;p(function(n){var t=(0,c._)(n);return t[1]=e,t}),y[1]=(null===(n=S())||void 0===n?void 0:n.scrollTop)||0,C((0,c._)(y))},[y]);return(0,q.gU)(function(){var e=S();e&&(e.scrollTop=y[f.length])},[f]),(0,u.jsxs)(b.ZP,(0,a._)((0,i._)({sx:(0,A.Vc)({".MuiPaper-root":{height:"60vh"}},t),anchor:"bottom",keepMounted:!0},d),{children:[(0,u.jsx)(D.Z,{title:g.title,onBack:function(){var e;null===(e=g.onBack)||void 0===e||e.call(g),p((0,c._)(f.slice(0,-1)))},showBackBtn:r||!!f.length,showCloseBtn:!0,onClose:e.onClose}),(0,u.jsx)(ee,{onSwitchTab:x,ref:v,onEnterFlow:k,onUseFlow:E,showTabs:1===m.length,onSubmit:e.onSearchSubmit})]}))}));function ev(e){var n=B.GO.useAPI("settingDrawer");return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(O.d4,{startSlot:(0,u.jsxs)(N.K,{children:[(0,u.jsx)(H,{style:{color:"var(--black2)"}}),(0,u.jsx)(O.db,{children:"工作流"})]}),onClick:function(){var t,r;e.onDrawerToggle(!0,!1),null===(t=n.current)||void 0===t||t.open(),null===(r=n.current)||void 0===r||r.setTuneData({onBack:function(){var t;e.onDrawerToggle(!1,!0),null===(t=n.current)||void 0===t||t.setTuneData(null)},onClose:function(){var t;null===(t=n.current)||void 0===t||t.setTuneData(null),e.onDrawerToggle(!1,!1)}})},sx:{height:50},endSlot:(0,u.jsx)(w.Z,{sx:{mr:-1.5,color:"#98A2B3"},children:(0,u.jsx)(G.Z,{style:{transform:"rotate(180deg)"}})})})})}},94084:function(e,n,t){"use strict";t.d(n,{vP:function(){return s}});var r=t(2473),i=t(5194),a=t(50059),o=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r._)(this,e),this.cache=new Map,this.maxSize=n.maxSize||100,this.ttl=n.ttl||-1}var n=e.prototype;return n.set=function(e,n){var t=Date.now();if(this.cache.has(e)){this.cache.set(e,{value:n,timestamp:t});return}if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r&&this.cache.delete(r)}this.cache.set(e,{value:n,timestamp:t})},n.get=function(e){var n=this.cache.get(e);if(!n)return null;var t=Date.now();return this.ttl>0&&t-n.timestamp>this.ttl?(this.cache.delete(e),null):n.value},n.getKeys=function(e){var n=this;if(this.ttl<=0)return this.cache.keys().toArray();var t=Date.now();return this.cache.keys().filter(function(r){var i=n.cache.get(e);return i&&t-i.timestamp>n.ttl}).toArray()},n.delete=function(e){return this.cache.delete(e)},n.clear=function(){this.cache.clear()},n.size=function(){return this.cache.size},n.cleanup=function(){var e=Date.now(),n=!0,t=!1,r=void 0;try{for(var i,o=this.cache.entries()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=(0,a._)(i.value,2),l=s[0],c=s[1];this.ttl>0&&e-c.timestamp>this.ttl&&this.cache.delete(l)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}},e}(),s=new(function(){function e(){(0,r._)(this,e),this.namespaces=new Map,this.defaultOptions={maxSize:100,ttl:-1}}var n=e.prototype;return n.getNamespace=function(e,n){return this.namespaces.has(e)||this.namespaces.set(e,new o((0,i._)({},this.defaultOptions,n))),this.namespaces.get(e)},n.set=function(e,n,t,r){this.getNamespace(e,r).set(n,t)},n.has=function(e){return this.namespaces.has(e)},n.get=function(e,n){var t=this.namespaces.get(e);return t?t.get(n):null},n.getKeys=function(e){var n=this.namespaces.get(e);return n?n.getKeys(e):[]},n.delete=function(e,n){var t=this.namespaces.get(e);return!!t&&t.delete(n)},n.clearNamespace=function(e){var n=this.namespaces.get(e);n&&n.clear()},n.deleteNamespace=function(e){this.namespaces.delete(e)},n.clearAll=function(){this.namespaces.clear()},n.getStats=function(e){if(e){var n=this.namespaces.get(e);return n?{size:n.size()}:null}var t={},r=!0,i=!1,o=void 0;try{for(var s,l=this.namespaces.entries()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=(0,a._)(s.value,2),u=c[0],d=c[1];t[u]={size:d.size()}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t},n.cleanup=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.namespaces.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.cleanup()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},e}()),l=null;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e5;l&&clearInterval(l),l=setInterval(function(){s.cleanup()},e)}()},56424:function(e,n,t){"use strict";t.d(n,{u:function(){return i}});var r=t(85085);function i(e,n){return e.split("/").map(function(e){var t=(0,r.J)("/".concat(e)),i=t.type,a=t.name;return"unknown"===i?e:"optionalCatchAll"===i?n[a]||"":n[a]||e}).join("/")}},79817:function(e,n,t){"use strict";t.d(n,{k:function(){return l}});var r=t(50059),i=t(36956),a=t(66687),o=t(80609),s=t(2265);function l(){var e=(0,r._)((0,i.L)("customFontSize"),2),n=e[0],t=e[1],l=(0,s.useCallback)(function(e){"function"==typeof e?t(function(n){var t=e(n);return(0,o.S)(t),t}):((0,o.S)(e),t(e))},[t]);return{fontSizeStyles:a.mk[n],setVariant:l,variant:n}}},80609:function(e,n,t){"use strict";t.d(n,{MetaFontSizeProvider:function(){return s},S:function(){return l}});var r=t(57437),i=t(99376),a=t(36956),o=t(259);function s(e){var n=(0,a.W)();return(0,i.useServerInsertedHTML)(function(){return(0,r.jsx)("script",{dangerouslySetInnerHTML:{__html:"\n        document.documentElement.classList.add('".concat(n.get("customFontSize").replaceAll("</","<\\/"),"')")}})}),e.children}function l(e){(function(){var e=document.documentElement.classList,n=!0,t=!1,r=void 0;try{for(var i,a=Object.values(o.y)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;e.remove(s)}}catch(e){t=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}})(),document.documentElement.classList.add(e)}},66687:function(e,n,t){"use strict";t.d(n,{Ts:function(){return c},Vl:function(){return l},mk:function(){return s}});var r,i,a=t(12249),o=t(259),s=(r={},(0,a._)(r,o.y.Large,{searchResult:"18px",resultControllers:{type:"relative",value:2}}),(0,a._)(r,o.y.Medium,{searchResult:"16px",resultControllers:{type:"base"}}),(0,a._)(r,o.y.Small,{searchResult:"14px",resultControllers:{type:"relative",value:-2}}),r);function l(e,n){if("string"==typeof e||"number"==typeof e||"base"===e.type)return n;var t=(n+"").match(/^(\d+)(\w*)/);if(!t)throw"baseValue的值类型错误";var r=Number(t[1]),i=t[2]||"px";return r+e.value+i}var c=(i={},(0,a._)(i,o.y.Large,"大"),(0,a._)(i,o.y.Medium,"中"),(0,a._)(i,o.y.Small,"小"),i)},19908:function(e,n,t){"use strict";t.d(n,{ze:function(){return c}});var r=t(2473),i=t(5194),a=t(39207),o=t(7870),s=t(89831),l={OVERFLOW_LIMIT:"overflow_limit",SENSITIVE_CHECK_FAILED:"sensitive_check_failed"},c={FATAL_ERROR:"fatal_error",CANCEL:"cancel"},u=function(){function e(n){(0,r._)(this,e),this.stream=n,this.tempMd="",this.params=null}var n=e.prototype;return n.stop=function(){},n.cancel=function(){this.stream.checkCancel=function(){return!0}},n.post=function(e,n){this.params=n;var t=this;(0,a.VwT)(e,{body:JSON.stringify(n),onopen:function(e){if(200!==e.status)throw Error(c.FATAL_ERROR+"_status:"+e.status);if(t.tempMd="",t.stream.checkCancel&&t.stream.checkCancel())throw Error(c.CANCEL);t.stream.begin()},onmessage:function(e){var r=e.data;if(t.stream.checkCancel&&t.stream.checkCancel())throw Error(c.CANCEL);if("[DONE]"===r){t.stream.down(n,t.tempMd);return}if("[LIMIT]"===r){t.stream.commonEventListener&&t.stream.commonEventListener(l.OVERFLOW_LIMIT,n),t.stream.error({code:-1,msg:"字数超限"});return}if("[INPUT_SENSITIVE]"===r){t.stream.commonEventListener&&t.stream.commonEventListener(l.SENSITIVE_CHECK_FAILED,n),t.stream.error({code:-2,msg:"输入敏感词"});return}if("[OUTPUT_SENSITIVE]"===r){t.stream.commonEventListener&&t.stream.commonEventListener(l.SENSITIVE_CHECK_FAILED,n),t.stream.error({code:-3,msg:"输出敏感词"});return}if("[TOO_MANY_REQUESTS]"===r){t.stream.error({code:s.cO.TOO_MANY_REQUESTS,msg:"请求频繁"});return}try{t.stream.receive(JSON.parse(r))}catch(e){throw(0,o.dW)("event-parse-chunk-error",r),e}},onclose:function(e){if(t.stream.checkCancel&&t.stream.checkCancel())return},onerror:function(e){if(t.stream.checkCancel&&t.stream.checkCancel()||e)throw e;throw Error(c.FATAL_ERROR)}}).then(function(e){}).catch(function(e){t.stream.error&&t.stream.error(e)})},n.mergeParams=function(e){this.params=(0,i._)({},this.params,e)},e}();n.ZP=u},63665:function(e,n,t){"use strict";t.d(n,{V:function(){return s}});var r=t(5194),i=t(7870),a=t(75825),o=t(28898);function s(e,n){var t,s,l=(0,r._)({},e);if(!(null==n?void 0:n.preventAutoStringifyValue)&&"type"in l&&"value"in l)try{l.value=JSON.stringify(l.value)}catch(e){}var c=null!==(t=null==n?void 0:n.openAppPagePath)&&void 0!==t?t:a.l.OpenApp,u=null!==(s=null==n?void 0:n.appLinkScheme)&&void 0!==s?s:"metaso://metaso.cn";if((0,i.dW)("link-to-open-app",l),window.location.href="".concat(u,"/router?data=")+encodeURIComponent(JSON.stringify(l)),null==n?void 0:n.autoNavigateToOpenAppPage){var d=setTimeout(function(){if(null==n||null===(e=n.onHitThreshold)||void 0===e||e.call(n),!n.preventDefaultHitThreshold){o.Z.navigateOpenAppFlag.set(!0);var e,t,r=new URL(c,location.origin);r.searchParams.set("data",JSON.stringify(l)),null==n||null===(t=n.onNavigate)||void 0===t||t.call(n),(null==n?void 0:n.router)?null==n||n.router.push(r.href):location.href=r.href}},2e3);document.addEventListener("visibilitychange",function e(){"hidden"===document.visibilityState&&clearTimeout(d),document.removeEventListener("visibilitychange",e)}),window.addEventListener("pagehide",function e(){clearTimeout(d),window.removeEventListener("pagehide",e)})}}},64193:function(e,n,t){"use strict";t.d(n,{L:function(){return o},p:function(){return s}});var r,i=t(12249),a=t(31219),o=(r={},(0,i._)(r,a.a.AddToBookShelf,{pdfUrl:""}),(0,i._)(r,a.a.InjectCookie,{uid:"",sid:""}),(0,i._)(r,a.a.H5Study,{openId:"",age:18,docIds:""}),r);function s(e){return o[e]}},41963:function(e,n,t){"use strict";t.d(n,{A8:function(){return v},Ne:function(){return f},Qv:function(){return d}});var r=t(2403),i=t(85735),a=t(5853),o=t(16056),s=t(2265),l=t(99376),c=t(64193),u=t(79943);function d(e,n){var t=(0,l.useSearchParams)(),r=(0,o.KL)(t);return(0,s.useCallback)(function(){for(var n=arguments.length,t=Array(n),i=0;i<n;i++)t[i]=arguments[i];return e(r,t)},[null==n?void 0:n.deps])}var h=new Set;function f(e,n){var t=Object.assign({deps:[]},n).deps,d=(0,u.WS)(),f=(0,l.useSearchParams)(),p=(0,l.usePathname)(),v=(0,s.useMemo)(function(){return(0,o.KL)(f)},[f]);return(0,s.useCallback)((0,r._)(function(){var n,t,r,i,s,l,u,m,g,x,b,w,y,C,S,j,k,E,_,T,I,L,R,Z,M,D=arguments;return(0,a.Jh)(this,function(a){switch(a.label){case 0:for(t=Array(n=D.length),r=0;r<n;r++)t[r]=D[r];return[4,Promise.resolve(e(v,t))];case 1:if(0===(i=a.sent()).length)return[2];s=!0,l=!1,u=void 0;try{for(m=i[Symbol.iterator]();!(s=(g=m.next()).done);s=!0)x=g.value,h.add(x)}catch(e){l=!0,u=e}finally{try{s||null==m.return||m.return()}finally{if(l)throw u}}if(!v.every(function(e){return!(e.type in c.L)||h.has(e.type)}))return[2];b=new URLSearchParams(f),w=!0,y=!1,C=void 0;try{for(S=h.values()[Symbol.iterator]();!(w=(j=S.next()).done);w=!0)if(k=j.value,b.delete(o.BT,k),E=(0,c.p)(k)){_=!0,T=!1,I=void 0;try{for(L=Object.keys(E)[Symbol.iterator]();!(_=(R=L.next()).done);_=!0)Z=R.value,b.delete(Z)}catch(e){T=!0,I=e}finally{try{_||null==L.return||L.return()}finally{if(T)throw I}}}}catch(e){y=!0,C=e}finally{try{w||null==S.return||S.return()}finally{if(y)throw C}}return h.clear(),M=p+"?"+b.toString(),d.replace(M),[2]}})}),(0,i._)(t).concat([v,f,p]))}var p=null,v=function(){var e=(0,l.useSearchParams)(),n=(0,u.WS)(),t=(0,s.useMemo)(function(){return(0,o.KL)(e)},[e]);(0,s.useEffect)(function(){p=null},[e]);var r=(0,s.useCallback)(function(r){p||(p=t),i=void 0===r?r:function(e){return e.type!==r},p=t.filter(i);var i,a=new URLSearchParams(e);a.delete(o.BT),p.forEach(function(e){a.append(o.BT,e.type)}),n.replace(location.pathname+"?"+a.toString())},[t,e]);return{cmdList:t,store:m,removeUrlCmd:r}},m=new Map},16056:function(e,n,t){"use strict";t.d(n,{BT:function(){return s},GZ:function(){return f},KL:function(){return c},OX:function(){return h},kv:function(){return u},xq:function(){return d}});var r=t(50059),i=t(98158),a=t(31219),o=t(64193),s="c";function l(e){return"cmd-".concat(e)}function c(e){var n=[];try{var t=new URLSearchParams(e),c=Object.values(a.a);n=t.getAll(s).filter(function(e){return c.includes(e)}).map(function(e){var n={},a=o.L[e];if(a){var s=Object.entries(a),c=!0,u=!1,d=void 0;try{for(var h,f=s[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=(0,r._)(h.value,2),v=p[0],m=p[1],g=t.get(v),x=void 0===m?"undefined":(0,i._)(m);null===g&&(g=m);var b=void 0===g?"undefined":(0,i._)(g);if(null===g);else if("undefined"===g)g=void 0;else if("string"!==x&&"string"===b)try{g=JSON.parse(g)}catch(e){}else"string"===x&&"string"===b&&(g=decodeURIComponent(g));n[v]=g}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}return{type:e,payload:localStorage.getItem(l(e))||"",searchParams:n}})}catch(e){}return n}function u(e,n,t){return{type:e,payload:t,searchParams:n}}function d(e,n){return e.find(function(e){return e.type===n})}function h(e){"string"==typeof e&&(e=new URL(e));var n=e.searchParams,t=c(n);return{searchParams:n,cmdList:t}}function f(e,n){"string"==typeof e&&(e=new URL(e));var t=!0,r=!1,i=void 0;try{for(var a,o=n[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var c=a.value;if(e.searchParams.append(s,c.type),c.searchParams){var u=!0,d=!1,h=void 0;try{for(var f,p=Object.getOwnPropertyNames(c.searchParams)[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var v=f.value,m=c.searchParams[v];null!==m&&("string"!=typeof m&&(m=JSON.stringify(m)),e.searchParams.append(v,m))}}catch(e){d=!0,h=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw h}}}c.payload&&localStorage.setItem(l(c.type),c.payload)}}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return e}},42576:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(2403),i=t(5853),a=t(71632),o=t(39207),s=t(54493);function l(e){var n=e.sessionId;return(0,a.a)({queryKey:["search","share-key",n],enabled:!!n,staleTime:1/0,queryFn:(0,r._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,o.XS6)(n).then(s.Jj)];case 1:return[2,e.sent().data.data]}})})})}},8090:function(e,n,t){"use strict";var r=t(2473),i=t(12249),a=t(85735),o=new(function(){function e(){(0,r._)(this,e),this.workingTasks=[],this.suspendTasks=[],this.delayTasks=[],this.latestExpireTime=1/0}var n=e.prototype;return n.getLockedScrolls=function(){var e=this.workingTasks.reduce(function(e,n){return(0,a._)(e).concat((0,a._)(n.dirScrolls.inline),(0,a._)(n.dirScrolls.block))},[]);return(0,a._)(new Set(e))},n.advanceSuspendTask=function(){for(var e=this,n=new Set(this.getLockedScrolls()),t=[],r=0;r<this.suspendTasks.length;r++){var i=v(this.suspendTasks[r].dirScrolls);i.some(function(e){return n.has(e)})||(i.forEach(function(e){n.add(e)}),t.push(r))}t.forEach(function(n){e.activateTask(e.suspendTasks[n])}),this.suspendTasks=this.suspendTasks.filter(function(e,n){return!t.includes(n)})},n.activateTask=function(e){this.workingTasks.push(e),e.run()},n.interruptTasks=function(e){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=(0,a._)(this.workingTasks);n?this.workingTasks=this.workingTasks.filter(e):this.workingTasks.forEach(e),t.forEach(function(e){return e.stop()})},n.interruptTasksWithScroll=function(e){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.interruptTasks(function(n){var t=v(n.dirScrolls).some(function(n){return e.block.includes(n)||e.inline.includes(n)});return t&&n.stop(),!t},n)},n.removeWorkingTask=function(e){this.workingTasks=this.workingTasks.filter(function(n){return!e.includes(n)})},n.isScrollsLocked=function(e){return!!this.workingTasks.find(function(n){return e.some(function(e){return n.dirScrolls.block.includes(e)||n.dirScrolls.inline.includes(e)})})},n.stopAll=function(){this.interruptTasks(function(){return!0},!0)},n.refreshLatestExpireTime=function(){var e=this;this.delayTasks.forEach(function(n){e.latestExpireTime=Math.min(n.expireTime,e.latestExpireTime)})},n.activateDelayTimer=function(){var e=this;isFinite(this.latestExpireTime)&&(clearTimeout(this.advanceDelayTimerId),this.advanceDelayTimerId=setTimeout(function(){e.advanceEachTaskQueue(),e.latestExpireTime=1/0},this.latestExpireTime-Date.now()))},n.pushToDelayQueue=function(e){var n,t=[].concat(e);(n=this.delayTasks).push.apply(n,(0,a._)(t)),this.refreshLatestExpireTime(),this.activateDelayTimer()},n.pushToSuspend=function(e){var n;(n=this.suspendTasks).push.apply(n,(0,a._)([].concat(e)))},n.advanceDelayTask=function(){var e=Date.now(),n=[];this.delayTasks=this.delayTasks.filter(function(t){return t.expireTime>e||(t.options.delay=0,n.push(t),!1)});var t=!0,r=!1,i=void 0;try{for(var a,o=n[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;this.scroll(s.el,s.options)}}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}this.refreshLatestExpireTime(),this.activateDelayTimer()},n.advanceEachTaskQueue=function(){this.advanceDelayTask(),this.advanceSuspendTask()},n.withDefaultOptions=function(e){return Object.assign({stall:0,delay:0,scrollMode:"always",strategy:"queue",positioning:{inline:"center",block:"center"},duration:g},e)},n.preflightScrollTask=function(e,n){var t=this,r=this.withDefaultOptions(n);if(r.delay){this.pushToDelayQueue(new s(e,r));return}var i=r.stall,a=r.onStop,o=(r.onStall,r.onRun,r.scrollMode),c=r.onFinished,u=(r.strategy,r.positioning),d=r.duration;e.parentElement;var h={block:p(e,"block"),inline:p(e,"inline")};if("if-need"===o&&!f(e,h.block)&&!f(e,h.inline)){null==c||c();return}var v=function(){t.removeWorkingTask([m]),t.advanceEachTaskQueue(),null==c||c()},m=new l(h,e,d,u,function(){i?setTimeout(v,i):v()},function(){t.removeWorkingTask([m]),t.advanceEachTaskQueue(),null==a||a()});return{scrolls:h,options:r,task:m}},n.scroll=function(e,n){var t=this.preflightScrollTask(e,n);if(t){var r=t.task,i=t.options,a=t.scrolls;i.stall,i.onStop,i.onStall;var o=i.onRun,s=(i.scrollMode,i.onFinished,i.strategy);if(i.positioning,i.duration,this.isScrollsLocked(a.block)||this.isScrollsLocked(a.inline)){if("warn"===s)return;if("queue"===s){this.pushToSuspend(r);return}if("interrupt"===s&&this.interruptTasksWithScroll(a,!0),"silent"===s)return}this.activateTask(r),null==o||o()}},e}());n.Z=o;var s=function e(n,t){(0,r._)(this,e),this.el=n,this.options=t,this.expireTime=Date.now()+t.delay},l=function(){function e(n,t,i,a,o,s){(0,r._)(this,e),this.dirScrolls=n,this.anchor=t,this.positioning=a,this.onFinished=o,this.onStop=s,this.isStopped=!1,this.finished={inline:!1,block:!1},this.normalizedPos={inline:c("inline",a),block:c("block",a)},"function"==typeof i?this.duration=i(this.getDirDistance("block"),this.getDirDistance("inline")):this.duration=i}var n=e.prototype;return n.getDirDistance=function(e){return this.dirScrolls[e].length?d({location:this.normalizedPos[e].location,direction:e,anchor:this.anchor,scroll:this.dirScrolls[e][this.dirScrolls[e].length-1]}):0},n.stop=function(){var e;this.isStopped=!0,null===(e=this.onStop)||void 0===e||e.call(this)},n.run=function(){var e;this.isStopped||((e=this.duration)&&"object"==typeof e&&"getMovement"in e?this.runWithMovement():this.runWithDuration(this.duration))},n.runWithDuration=function(e){var n=this;this.finished={inline:!1,block:!1};var t=function(e){n.finished[e]=!0,Object.values(n.finished).every(function(e){return e})&&n.onFinished()};this.runWithDuration_dir("inline",t.bind(null,"inline"),e),this.runWithDuration_dir("block",t.bind(null,"block"),e)},n.runWithDuration_dir=function(e,n,t){var r,i=this;if(this.isStopped){null===(r=this.onStop)||void 0===r||r.call(this);return}this.dirScrolls[e].length||n();var a=Date.now(),o=0,s=t,l=!1,c=function(){if(i.isStopped){var r;null===(r=i.onStop)||void 0===r||r.call(i);return}if(l){i.moveWithScale(1,e),n();return}var u=Date.now()-a;t<=u&&(l=!0);var d=(1-Math.pow(1-(u=Math.min(u,t))/t,3))*u,h=d-o;i.moveWithScale(h/s,e),s-=h,o=d,requestAnimationFrame(c)};requestAnimationFrame(c)},n.runWithMovement=function(){},n.moveWithMovement=function(e){if(this.isStopped)return},n.moveWithScale=function(e,n){if(!this.isStopped)for(var t=(0,a._)(this.dirScrolls[n]),r=this.anchor,o=t.shift(),s=this.normalizedPos[n].offset,l=0;o;){var c=function(e){var n=e.direction,t=e.location,r=e.anchor,i=e.scroll,a=e.moveScale,o=e.offset,s=e.optionOffset,l=d({direction:n,location:t,anchor:r,scroll:i,offset:void 0===s?0:s})+(void 0===o?0:o),c=function(e,n,t){var r=0,i=0,a=u[t];if(e===window){var o=document.body.parentElement;r=(i=e[a.windowScrollPos]+n)-(o[a.scrollSize]-e[a.windowSize])}else if(e instanceof HTMLElement)r=(i=e[a.scrollPos]+n)-(e[a.scrollSize]-e[a.clientSize]);else throw Error("无法滚动的元素".concat(e));return i<0?i:Math.max(r,0)}(i,l,n);return{movement:(l-c)*a,accumulatedOffset:c}}({location:this.normalizedPos[n].location,direction:n,anchor:r,scroll:o,moveScale:e,offset:l,optionOffset:s}),h=c.movement,f=c.accumulatedOffset;s=0,function(e,n,t){var r=u[t].start;e.scrollBy((0,i._)({},r,n))}(o,h,n),l+=f,r=o,o=t.shift()}},e}();function c(e,n){var t=u[e];if(Object.keys(n).some(function(e){return["inline","block"].includes(e)}))return{direction:e,location:n[e]||m,offset:0};var r={direction:e,location:"start",offset:0};return t.start in n?(r.location="start",r.offset=n[t.start]):(r.location="end",r.offset=n[t.end]),r}var u={block:{start:"top",size:"height",end:"bottom",scrollSize:"scrollHeight",windowSize:"innerHeight",clientSize:"clientHeight",windowScrollPos:"scrollY",scrollPos:"scrollTop"},inline:{start:"left",size:"width",end:"right",scrollSize:"scrollWidth",windowSize:"innerWidth",clientSize:"clientWidth",windowScrollPos:"scrollX",scrollPos:"scrollLeft"}};function d(e){var n=e.anchor,t=e.scroll,r=e.offset,i=void 0===r?0:r,a=e.direction,o=e.location,s=h(n),l=h(t),c=0,d=u[a];switch(o){case"center":c=s[d.start]+s[d.size]/2-(l[d.start]+l[d.size]/2)+i;break;case"end":c=s[d.end]-l[d.end]+i;break;case"start":c=s[d.start]-l[d.start]-i;break;default:throw Error("unknown positioning")}return c}function h(e){if(e===window)return{left:0,right:window.innerWidth,top:0,bottom:window.innerHeight,width:window.innerWidth,height:window.innerHeight};if(e instanceof Element)return e.getBoundingClientRect();throw Error("无法处理的元素,".concat(e))}function f(e,n){for(var t,r,i=(0,a._)(n),o=i.shift();o;){if(t=h(e),r=h(o),t.left<r.left||t.top<r.top||t.bottom>r.bottom||t.right>r.right)return!0;o=i.shift()}return!1}function p(e,n){for(var t=e.parentElement,r=[],i=document.body.parentElement,a="inline"===n?"overflowX":"overflowY",o=u[n];t;){if(!getComputedStyle(t)[a].match(/(clip|visible)/)&&t[o.scrollSize]>t[o.clientSize]&&r.push(t),t===i){t[o.scrollSize]>t[o.clientSize]&&r.push(window);break}t=t.parentElement}return r}function v(e){return Object.entries(e).reduce(function(e,n){return(0,a._)(e).concat((0,a._)(n[1]))},[])}var m="center",g=500},22805:function(e,n,t){"use strict";t.d(n,{F:function(){return u},iL:function(){return c}});var r=t(2473),i=t(85735),a=t(19908),o=t(8294),s=function(){function e(n,t,i,a,o){(0,r._)(this,e),this.history=[],this.isReplay=!1,this.connectSpendTime=0,this.canceled=!1,this.id=n,this.url=t,this.startTime=new Date,this.callbacks=a||{},this.generator=this.setupGenerator(i,o),this.generator.post(t,i)}var n=e.prototype;return n.getStartTime=function(){return this.startTime},n.isPPTSearch=function(){return!!this.generator.params.pptId},n.setupGenerator=function(e,n){var t=this,r=this,s={commonEventListener:function(e,n){t.callbacks.commonEventListener&&t.callbacks.commonEventListener(e,n)},checkCancel:function(){return!!t.callbacks.checkCancel&&t.callbacks.checkCancel()},down:function(e,n){t.isReplay||t.history.push({type:"down",data:{params:e,tempMd:n}}),t.callbacks.down&&t.callbacks.down(e,n)},error:function(e){t.isReplay||t.history.push({type:"error",data:e}),t.callbacks.error&&t.callbacks.error(e)},receive:function(){for(var e,n=arguments.length,t=Array(n),a=0;a<n;a++)t[a]=arguments[a];r.isReplay||r.history.push({type:"receive",data:t}),r.callbacks.receive&&!r.canceled&&(e=r.callbacks).receive.apply(e,(0,i._)(t))},begin:function(){t.connectSpendTime=new Date().getTime()-t.startTime.getTime(),t.isReplay||t.history.push({type:"begin"}),t.callbacks.begin&&t.callbacks.begin()}};return n?new a.ZP(s):new o.ZP(s)},n.afterFinished=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n?setTimeout(function(){d(e.id)},1e4):d(this.id)},n.updateCallbacks=function(e){this.callbacks=e},n.replay=function(){this.isReplay=!0;var e=!0,n=!1,t=void 0;try{for(var r,a=this.history[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o,s,l,c,u,d,h,f,p=r.value;switch(p.type){case"begin":null===(o=(s=this.callbacks).begin)||void 0===o||o.call(s);break;case"receive":null===(l=(c=this.callbacks).receive)||void 0===l||l.call.apply(l,[c].concat((0,i._)(p.data)));break;case"down":null===(u=(d=this.callbacks).down)||void 0===u||u.call(d,p.data.params,p.data.tempMd);break;case"error":null===(h=(f=this.callbacks).error)||void 0===h||h.call(f,p.data)}}}catch(e){n=!0,t=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw t}}this.isReplay=!1},n.stop=function(){this.generator.stop(),this.afterFinished(!1)},n.cancel=function(){this.canceled=!0,this.generator.cancel(),this.afterFinished(!1)},e}(),l=new Map;function c(e,n,t,r,i,a){var o;return l.has(e)?(o=l.get(e),a&&a(o),r&&(o.updateCallbacks({commonEventListener:r.commonEventListener,checkCancel:r.checkCancel,down:r.down,error:r.error,receive:r.receive,begin:r.begin}),o.replay())):(o=new s(e,n,t,r,i),l.set(e,o)),o}function u(e,n,t,r){var i=r?new a.ZP(t):new o.ZP(t);return i.post(e,n),i}function d(e){l.has(e)&&l.delete(e)}},49744:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var r=t(5194),i=t(50059),a=t(57437),o=t(51622),s=t(92498),l=t(31006),c=t(2265),u=t(2473),d=t(60225),h=t(85735),f=t(73058),p=t.n(f),v=function(e){return new RegExp(/<[a-z][\s\S]*>/i).test(e)},m=function(e){var n=document.createElement("div");return n.innerHTML=e,n.childNodes},g=function(e,n){return Math.floor(Math.random()*(n-e+1))+e},x=function(e){var n=document.createElement("style");n.appendChild(document.createTextNode(e)),document.head.appendChild(n)},b={TYPE_CHARACTER:"TYPE_CHARACTER",REMOVE_CHARACTER:"REMOVE_CHARACTER",REMOVE_ALL:"REMOVE_ALL",REMOVE_LAST_VISIBLE_NODE:"REMOVE_LAST_VISIBLE_NODE",PAUSE_FOR:"PAUSE_FOR",CALL_FUNCTION:"CALL_FUNCTION",ADD_HTML_TAG_ELEMENT:"ADD_HTML_TAG_ELEMENT",CHANGE_DELETE_SPEED:"CHANGE_DELETE_SPEED",CHANGE_DELAY:"CHANGE_DELAY",CHANGE_CURSOR:"CHANGE_CURSOR",PASTE_STRING:"PASTE_STRING"},w={HTML_TAG:"HTML_TAG",TEXT_NODE:"TEXT_NODE"},y=function(){function e(n,t){var i=this,a=this;if((0,u._)(this,e),this.state={lastFrameTime:null,pauseUntil:null,eventQueue:[],eventLoop:null,eventLoopPaused:!1,visibleNodes:[],initialOptions:null,elements:{container:null,wrapper:document.createElement("span"),cursor:document.createElement("span")},rafInterval:1e3/60},this.options={strings:null,cursor:"|",delay:"natural",pauseFor:1500,deleteSpeed:"natural",autoStart:!1,devMode:!1,skipAddStyles:!1,wrapperClassName:"Typewriter__wrapper",cursorClassName:"Typewriter__cursor",stringSplitter:null,onCreateTextNode:null,onRemoveNode:null},this.measureRAFInterval=function(){return new Promise(function(e){var n=performance.now(),t=[],r=0;p()(function i(){var a=performance.now(),o=a-n;if(r>0&&t.push(o),n=a,++r>=30){var s=t.reduce(function(e,n){return e+n})/t.length;e({averageInterval:s,refreshRate:1e3/s,samples:t});return}p()(i)})})},this.flush=function(){i.state.eventLoopPaused=!0;for(var e=0;e<i.state.eventQueue.length;e++){var n=i.state.eventQueue[e];i.runEvent(n,i.state.eventQueue)}i.state.eventQueue=[],i.state.eventLoopPaused=!1},this.handleVisibilityChange=function(){if(document.hidden);else{i.state.eventLoopPaused=!0;try{for(var e=Date.now()-i.state.lastFrameTime,n=Math.floor(e/i.options.delay),t=(0,h._)(i.state.eventQueue),r=n>t.length?t.length:n,a=0;a<r;a++){var o=i.state.eventQueue.shift();i.runEvent(o,i.state.eventQueue)}}catch(e){}finally{i.state.eventLoopPaused=!1}}},this.initVisibilityListener=function(){document.addEventListener("visibilitychange",i.handleVisibilityChange)},this.destroy=function(){document.removeEventListener("visibilitychange",i.handleVisibilityChange)},this.setupWrapperElement=function(){i.state.elements.container&&(i.state.elements.wrapper.className=i.options.wrapperClassName,i.state.elements.cursor.className=i.options.cursorClassName,i.state.elements.cursor.innerHTML=i.options.cursor,i.state.elements.container.innerHTML="",i.state.elements.container.appendChild(i.state.elements.wrapper),i.state.elements.container.appendChild(i.state.elements.cursor))},this.start=function(){return i.state.eventLoopPaused=!1,i.runEventLoop(),i},this.pause=function(){return i.state.eventLoopPaused=!0,i},this.stop=function(){return i.state.eventLoop&&((0,f.cancel)(i.state.eventLoop),i.state.eventLoop=null),i},this.pauseFor=function(e){return i.addEventToQueue(b.PAUSE_FOR,{ms:e}),i},this.typeOutAllStrings=function(){return"string"==typeof i.options.strings?i.typeString(i.options.strings).pauseFor(i.options.pauseFor):i.options.strings.forEach(function(e){i.typeString(e).pauseFor(i.options.pauseFor).deleteAll(i.options.deleteSpeed)}),i},this.typeString=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(v(e))return a.typeOutHTMLString(e,n);if(e){var t=(a.options||{}).stringSplitter,r="function"==typeof t?t(e):e.split("");a.typeCharacters(r,n)}return a},this.pasteString=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return v(e)?a.typeOutHTMLString(e,n,!0):(e&&a.addEventToQueue(b.PASTE_STRING,{character:e,node:n}),a)},this.typeOutHTMLString=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2?arguments[2]:void 0,r=m(e);if(r.length>0)for(var i=0;i<r.length;i++){var o=r[i],s=o.innerHTML;o&&3!==o.nodeType?(o.innerHTML="",a.addEventToQueue(b.ADD_HTML_TAG_ELEMENT,{node:o,parentNode:n}),t?a.pasteString(s,o):a.typeString(s,o)):o.textContent&&(t?a.pasteString(o.textContent,n):a.typeString(o.textContent,n))}return a},this.deleteAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"natural";return a.addEventToQueue(b.REMOVE_ALL,{speed:e}),a},this.changeDeleteSpeed=function(e){if(!e)throw Error("Must provide new delete speed");return i.addEventToQueue(b.CHANGE_DELETE_SPEED,{speed:e}),i},this.changeDelay=function(e){if(!e)throw Error("Must provide new delay");return i.addEventToQueue(b.CHANGE_DELAY,{delay:e}),i},this.changeCursor=function(e){if(!e)throw Error("Must provide new cursor");return i.addEventToQueue(b.CHANGE_CURSOR,{cursor:e}),i},this.deleteChars=function(e){if(!e)throw Error("Must provide amount of characters to delete");for(var n=0;n<e;n++)i.addEventToQueue(b.REMOVE_CHARACTER);return i},this.callFunction=function(e,n){if(!e||"function"!=typeof e)throw Error("Callback must be a function");return i.addEventToQueue(b.CALL_FUNCTION,{cb:e,thisArg:n}),i},this.typeCharacters=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||!Array.isArray(e))throw Error("Characters must be an array");return e.forEach(function(e){a.addEventToQueue(b.TYPE_CHARACTER,{character:e,node:n})}),a},this.removeCharacters=function(e){if(!e||!Array.isArray(e))throw Error("Characters must be an array");return e.forEach(function(){i.addEventToQueue(b.REMOVE_CHARACTER)}),i},this.addEventToQueue=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.addEventToStateProperty(e,n,t,"eventQueue")},this.addEventToStateProperty=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i={eventName:e,eventArgs:n||{}};return t?a.state[r]=[i].concat((0,h._)(a.state[r])):a.state[r]=(0,h._)(a.state[r]).concat([i]),a},this.runEventLoop=function(){i.state.lastFrameTime||(i.state.lastFrameTime=Date.now());var e=Date.now(),n=e-i.state.lastFrameTime;if(i.state.eventQueue.length&&(i.state.eventLoop=p()(i.runEventLoop),!i.state.eventLoopPaused)){if(i.state.pauseUntil){if(e<i.state.pauseUntil)return;i.state.pauseUntil=null}var t=(0,h._)(i.state.eventQueue),r=t.shift(),a=0;n<=(a=r.eventName===b.REMOVE_LAST_VISIBLE_NODE||r.eventName===b.REMOVE_CHARACTER?"natural"===i.options.deleteSpeed?g(40,80):i.options.deleteSpeed:"natural"===i.options.delay?g(120,160):i.options.delay)||(i.logInDevMode({currentEvent:r,state:i.state,delay:a}),i.runEvent(r,t),i.state.lastFrameTime=e)}},this.changeCursorImmediate=function(e){return i.options.cursor=e,i.state.elements.cursor.innerHTML=e,i},n){if("string"==typeof n){var o=document.querySelector(n);if(!o)throw Error("Could not find container element");this.state.elements.container=o}else this.state.elements.container=n}t&&(this.options=(0,r._)({},this.options,t)),this.state.initialOptions=(0,r._)({},this.options),this.initVisibilityListener(),this.init(),this.measureRAFInterval().then(function(e){i.state.rafInterval=e.averageInterval})}return(0,d._)(e,[{key:"init",value:function(){this.setupWrapperElement(),this.addEventToQueue(b.CHANGE_CURSOR,{cursor:this.options.cursor},!0),this.addEventToQueue(b.REMOVE_ALL,null,!0),!window||window.___TYPEWRITER_JS_STYLES_ADDED___||this.options.skipAddStyles||(x(".Typewriter__cursor{-webkit-animation:Typewriter-cursor 1s infinite;animation:Typewriter-cursor 1s infinite;margin-left:1px}@-webkit-keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}@keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}"),window.___TYPEWRITER_JS_STYLES_ADDED___=!0),!0===this.options.autoStart&&this.options.strings&&this.typeOutAllStrings().start()}},{key:"runEvent",value:function(e,n){var t=e.eventName,r=e.eventArgs;switch(t){case b.PASTE_STRING:case b.TYPE_CHARACTER:var i=r.character,a=r.node,o=document.createTextNode(i),s=o;this.options.onCreateTextNode&&"function"==typeof this.options.onCreateTextNode&&(s=this.options.onCreateTextNode(i,o)),s&&(a?a.appendChild(s):this.state.elements.wrapper.appendChild(s)),this.state.visibleNodes=(0,h._)(this.state.visibleNodes).concat([{type:w.TEXT_NODE,character:i,node:s}]);break;case b.REMOVE_CHARACTER:n.unshift({eventName:b.REMOVE_LAST_VISIBLE_NODE,eventArgs:{removingCharacterNode:!0}});break;case b.PAUSE_FOR:var l=e.eventArgs.ms;this.state.pauseUntil=Date.now()+parseInt(l);break;case b.CALL_FUNCTION:var c=e.eventArgs,u=c.cb,d=c.thisArg;u.call(d,{elements:this.state.elements});break;case b.ADD_HTML_TAG_ELEMENT:var f=e.eventArgs,p=f.node,v=f.parentNode;v?v.appendChild(p):this.state.elements.wrapper.appendChild(p),this.state.visibleNodes=(0,h._)(this.state.visibleNodes).concat([{type:w.HTML_TAG,node:p,parentNode:v||this.state.elements.wrapper}]);break;case b.REMOVE_ALL:var m=this.state.visibleNodes,g=r.speed,x=[];g&&x.push({eventName:b.CHANGE_DELETE_SPEED,eventArgs:{speed:g,temp:!0}});for(var y=0,C=m.length;y<C;y++)x.push({eventName:b.REMOVE_LAST_VISIBLE_NODE,eventArgs:{removingCharacterNode:!1}});g&&x.push({eventName:b.CHANGE_DELETE_SPEED,eventArgs:{speed:this.options.deleteSpeed,temp:!0}}),n.unshift.apply(n,(0,h._)(x));break;case b.REMOVE_LAST_VISIBLE_NODE:var S=e.eventArgs.removingCharacterNode;if(this.state.visibleNodes.length){var j=this.state.visibleNodes.pop(),k=j.type,E=j.node,_=j.character;this.options.onRemoveNode&&"function"==typeof this.options.onRemoveNode&&this.options.onRemoveNode({node:E,character:_}),E&&E.parentNode.removeChild(E),k===w.HTML_TAG&&S&&n.unshift({eventName:b.REMOVE_LAST_VISIBLE_NODE,eventArgs:{}})}break;case b.CHANGE_DELETE_SPEED:this.options.deleteSpeed=e.eventArgs.speed;break;case b.CHANGE_DELAY:this.options.delay=e.eventArgs.delay;break;case b.CHANGE_CURSOR:this.options.cursor=e.eventArgs.cursor,this.state.elements.cursor.innerHTML=e.eventArgs.cursor}this.state.eventQueue=n}},{key:"logInDevMode",value:function(e){this.options.devMode}}]),e}();t(59309);var C=t(94508),S=t(25060),j=(0,c.memo)(function(e){var n=e.autoScrollToBottom,t=void 0===n||n,u=e.messages,d=e.className,h=e.style,f=e.animation,p=void 0===f||f,v=e.control,m=(0,i._)((0,c.useState)([]),2),g=m[0],x=m[1],b=(0,i._)((0,c.useState)(!!p),2),w=b[0],j=b[1],k=(0,c.useRef)(!1);(0,c.useEffect)(function(){!k.current&&u.length?(k.current=!0,u.length>2&&j(!1)):j(!!p),x(u)},[u]);var E=(0,c.useRef)(null),_=(0,c.useRef)(null),T=function(e){return'<span class="blink-typewriter-cursor '.concat((null==e?void 0:e.class)||"",'" style="').concat((null==e?void 0:e.style)||"",'"></span>')};(0,c.useEffect)(function(){if(E.current)return _.current=new y(E.current,{delay:10,cursor:T(),onCreateTextNode:function(e,n){return _.current.changeCursorImmediate(T({style:"display: none"})),requestAnimationFrame(function(){N()}),n},wrapperClassName:"flex w-full flex-col"}),function(){var e;null===(e=_.current)||void 0===e||e.destroy()}},[E.current]);var I=function(e){return e.map(function(e){var n=e.texts.reduce(function(e,n){return e=e.concat('<span style="color: '.concat(n.color||"inherit",';">').concat(n.text,"<span>"))},"");return'<p class="inline-block break-all m-0">'.concat(n,"</p>")}).join("")},L=(0,i._)((0,c.useState)(0),2),R=L[0],Z=L[1];(0,o.Z)(function(){if(E.current&&g.length&&!(g.length-R<=0)){Z(g.length);var e=I(g.slice(R,g.length))||"";_.current.flush(),w?_.current.callFunction(function(){N()}).typeString(e).changeCursor(T()).callFunction(function(){N()}).start():(E.current.children[0].appendChild(document.createRange().createContextualFragment(e)),setTimeout(function(){var e;null===(e=E.current)||void 0===e||e.scrollTo({top:E.current.scrollHeight,behavior:"instant"})}))}},[g]),(0,c.useEffect)(function(){if(_.current)switch(null==v?void 0:v.status){case"stoped":_.current.state.eventQueue=[],_.current.stop(),(null==v?void 0:v.texts)&&_.current.typeString(I([{texts:v.texts}])||"").start();break;case"running":_.current.start()}},[null==v?void 0:v.status]);var M=(0,c.useRef)(!0),D=(0,c.useRef)(!1),A=(0,c.useRef)(0),O=(0,c.useRef)(null),N=(0,s.Z)(function(){var e;M.current&&t&&(D.current||null===(e=E.current)||void 0===e||e.scrollTo({top:E.current.scrollHeight,behavior:(0,S.pb)(navigator.userAgent)?"instant":"smooth"}))}),P=(0,s.Z)(function(){if(E.current&&!D.current){var e=E.current.scrollTop,n=E.current,t=n.scrollHeight,r=n.clientHeight;Math.abs(e-A.current)>5&&(O.current&&clearTimeout(O.current),e<A.current-5?M.current=!1:e+r>=t-20&&(M.current=!0),O.current=setTimeout(function(){if(E.current){var e=E.current,n=e.scrollTop,t=e.scrollHeight;n+e.clientHeight>=t-20&&(M.current=!0)}},1e3)),A.current=e}});return(0,c.useEffect)(function(){return function(){O.current&&clearTimeout(O.current)}},[]),(0,l.Z)("scroll",P,{target:E}),(0,a.jsx)("div",{className:(0,C.cn)("inline-flex flex-col overflow-y-auto h-full",d),ref:E,style:(0,r._)({overscrollBehavior:"contain"},h)})})},59309:function(){},10464:function(e){e.exports={"ppt-dialog-header":"ppt-dialog_ppt-dialog-header__2Goch"}},14801:function(e){e.exports={metaDragUploadBox:"Activity_metaDragUploadBox__5rQfq",rotatingElement:"Activity_rotatingElement__qd4YF",rotate:"Activity_rotate__gHZAb"}},10995:function(e){e.exports={"item-button":"kit-common_item-button__7RqHS","active-item-button":"kit-common_active-item-button__rGSxq","primary-btn":"kit-common_primary-btn__eb9rT","search-right-extra-content":"kit-common_search-right-extra-content__p6jIp","search-right-extra-content__pin":"kit-common_search-right-extra-content__pin__BxcHU","extra-kit-container":"kit-common_extra-kit-container__0QAZt"}},49409:function(e){e.exports={"search-domain-tabs-root":"search-domain-kits_search-domain-tabs-root__Vw1o6","sd--borderBtm":"search-domain-kits_sd--borderBtm__WEFWD","search-domain-tab":"search-domain-kits_search-domain-tab__4O_vu","search-domain-tab--active":"search-domain-kits_search-domain-tab--active__SudVn","menu-title":"search-domain-kits_menu-title__GSqLe","range-item":"search-domain-kits_range-item__kr72h","range-item-name":"search-domain-kits_range-item-name__C4VQv",active:"search-domain-kits_active__xpzC4","item-button":"search-domain-kits_item-button__dLOVk","active-item-button":"search-domain-kits_active-item-button__0udTw","attach-box":"search-domain-kits_attach-box__4iP_e","filter-item":"search-domain-kits_filter-item__EQD8L","filter-item--active":"search-domain-kits_filter-item--active__dDq2a","filter-check-button":"search-domain-kits_filter-check-button__U78pH","arrow-icon":"search-domain-kits_arrow-icon__Wporx","arrow-icon-reverse":"search-domain-kits_arrow-icon-reverse__nW3On","search-domain-tabs-topicName":"search-domain-kits_search-domain-tabs-topicName__eAZvr"}},6955:function(e){e.exports={"search-consult-input-wrapper":"search-consult-input_search-consult-input-wrapper__n65cu",shadow:"search-consult-input_shadow__qsBXK","search-consult-input-partition":"search-consult-input_search-consult-input-partition__uoHkZ","search-consult-textarea":"search-consult-input_search-consult-textarea__8KI6O","search-consult-textarea-icon":"search-consult-input_search-consult-textarea-icon__cRTpx","search-consult-textarea-root":"search-consult-input_search-consult-textarea-root__DJbK3","clear-btn":"search-consult-input_clear-btn__cO7TY","menu-item":"search-consult-input_menu-item__2ISFE","engine-chip":"search-consult-input_engine-chip__mAkPI"}}}]);