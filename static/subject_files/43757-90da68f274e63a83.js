"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43757],{61980:function(n,e,t){var r,o=t(94746);function i(){return(i=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(null,arguments)}e.Z=function(n){return o.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},n),r||(r=o.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m6 9 6 6 6-6"})))}},28484:function(n,e,t){var r,o,i=t(94746);function a(){return(a=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(null,arguments)}e.Z=function(n){return i.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none",viewBox:"0 0 28 28"},n),r||(r=i.createElement("rect",{width:28,height:28,fill:"var(--gray-2)",rx:6})),o||(o=i.createElement("path",{stroke:"#667085",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m16.5 19-5-5 5-5"})))}},69479:function(n,e,t){t.d(e,{Z:function(){return w}});var r=t(2403),o=t(5194),i=t(1780),a=t(50059),c=t(5853),s=t(57437),u=t(2265),l=t(36706),d=t(6065),f=t(46387),h=t(39207),x=t(22322),p=t(79943),m=t(61839),g=t(96339),v=t(23760),b=t(7870),C=t(9298),j=t(71931),k=t(85425);function w(n){var e=n.detailRemote,t=n.subjectId,w=n.recordRemote,Z=(0,p.WS)(),_=(0,a._)((0,u.useState)(0),2),y=_[0],S=_[1],N=(0,m.Z)(e),M=(0,u.useCallback)(function(n){(0,l.vC)(Z,n,!1,null,!1)},[]),E=(0,a._)((0,u.useState)(!1),2),I=E[0],F=E[1],R=(0,a._)((0,u.useState)(null),2),W=R[0],P=R[1],L=(0,u.useCallback)(function(n){N("移动")&&(P(n),F(!0))},[N]),D=(0,a._)((0,u.useState)(!0),2),z=D[0],B=D[1],O=(0,u.useMemo)(function(){return{handleNameChange:function(n){if(!n){(0,x.y)("专题名不能为空",{variant:"warning"});return}if(n.length>50&&(n=n.substring(0,50)),n!==e.data.name){if(!v.LM.getState().login){(0,g.x3)({showTips:!0,tipsHtml:"请登录后再修改专题名称",logDesc:"update-subject-title-not-login"});return}var r=e.data.name;e.setData(function(e){return(0,i._)((0,o._)({},e),{name:n})}),(0,h.qCN)(t,n,e.data.description).then(function(n){if(0===n.data.errCode){(0,x.y)("修改专题名成功",{variant:"success"});return}(0,x.y)(n.data.errMsg,{variant:"error"}),e.setData(function(n){return(0,i._)((0,o._)({},n),{name:r})})}).catch(function(n){(0,x.y)("修改专题名称失败,请稍后再试",{variant:"error"}),e.setData(function(n){return(0,i._)((0,o._)({},n),{name:r})})})}}}},[e.data]),T=k.H.useAPI("h5SubjectLayout"),H=(0,u.useCallback)(function(){w.doRequest(),(0,h.t6W)(t).then(function(n){if(0===n.data.errCode){var e;S(n.data.data),null===(e=T.current)||void 0===e||e.updateNum(n.data.data)}})},[]),A=(0,j.y1)(H,500);(0,u.useEffect)(function(){if(!e.isPending&&e.data){var n;S(e.data.knowledgeNum),null===(n=T.current)||void 0===n||n.updateNum(e.data.knowledgeNum)}},[e.isPending,e.data.knowledgeNum]);var q=(0,a._)((0,u.useState)(null),2),U=q[0],V=q[1],J=(0,u.useCallback)(function(n){V(n)},[]),Q=(0,u.useCallback)(function(n){N("删除文章")&&(0,d.W)("确定删除",(0,s.jsx)(f.Z,{sx:{fontWeight:400,color:"var(--black3)"},children:"您确定要将此文章删除吗？"}),{sx:{mx:1},onConfirm:function(){(0,b.v_)("subject-record",t),(0,b.v_)("subject-detail",t),(0,h.jy7)(n.id,null).then(function(e){0===e.data.errCode?(w.setData(function(e){return e.filter(function(e){return e.id!==n.id})}),n.sessionId&&w.setData(function(e){return e.filter(function(e){return e.sessionId!==n.sessionId})}),A(),(0,x.y)("删除成功",{variant:"success"})):(0,x.y)(e.data.errMsg,{variant:"error"})})}})},[N]),G=(0,a._)((0,u.useState)(!1),2),K=G[0],$=G[1];return{onDeleteQuestion:Q,movementPopoverOpen:I,setMovementPopoverOpen:F,movingRecord:W,onMoveQuestion:L,editNameHandlers:O,cardCheckId:U,handleCardMenuChecked:J,showContent:z,setShowContent:B,onEditQuestion:M,knowledgeNum:y,updateKnowledgeNum:A,onAddArticleClick:(0,u.useCallback)((0,r._)(function(){var n;return(0,c.Jh)(this,function(e){return K||((0,b.dW)(C.Z.SUBJECT_CREATE_PRO_FILE,{subjectId:t}),(0,b.v_)("subject-record",t),(0,b.v_)("subject-detail",t),$(!0),n="新建文章",(0,l.vC)(Z,"1",!1,{type:l.dC.CREATE_TOPIC_FILE,topicId:t,fileName:n})),[2]})}),[w.data,K])}}},61839:function(n,e,t){t.d(e,{Z:function(){return s}});var r=t(2265),o=t(96339),i=t(47812),a=t(22322),c=t(23760);function s(n){return(0,r.useCallback)(function(e,t){return c.LM.getState().login?!n||!n.data||n.data.permissionType!=i.nc.Read||((0,a.y)("您暂无权限".concat(e,",如有需要请联系专题创建人赋予权限"),{variant:"warning"}),!1):((0,o.x3)({showTips:!0,tipsHtml:"请登录后再".concat(e),logDesc:"check-edit-view-permission".concat(t?"-"+t:"")}),!1)},[n,n.data])}},36331:function(n,e,t){var r=t(5194),o=t(1780),i=t(46796),a=t(50059),c=t(45008),s=t(57437),u=t(54632),l=t(16210),d=t(2265),f=t(74634),h=t(36760),x=t.n(h);function p(){var n=(0,c._)(["\n    border: 1px solid transparent;\n    &.checkbutton--checked{\n        border-color: var(--border-color);\n        background-color: var(--action-btn-hover,#FBFBFA);\n    }\n    border-radius: 0;\n    padding: 5px;\n"]);return p=function(){return n},n}var m=(0,d.forwardRef)(function(n,e){var t=n.children,c=n.onClick,u=n.onCheckedChange,l=n.className,d=(0,i._)(n,["children","onClick","onCheckedChange","className"]),h=(0,a._)((0,f.U8)(n.checked,n.defaultChecked||!1,{onChange:u}),2),p=h[0],m=h[1];return(0,s.jsxs)(g,(0,o._)((0,r._)({ref:e,className:x()({"checkbutton--checked":p},l),onClickCapture:function(n){m(!p),null==c||c(n)}},d),{children:[t,(0,s.jsx)("input",{hidden:!0,type:"checkbox",value:String(p)})]}))});m.displayName="CheckButton",e.Z=m;var g=(0,l.ZP)(u.Z,{name:"CheckButton"})(p())},91746:function(n,e,t){t.d(e,{Z:function(){return p}});var r=t(5194),o=t(1780),i=t(46796),a=t(45008),c=t(57437),s=t(2265),u=t(78693),l=t(16210),d=t(36760),f=t.n(d);function h(){var n=(0,a._)(["\n    min-width: 0;\n    display: inline-block;\n"]);return h=function(){return n},n}function x(){var n=(0,a._)(["\n    outline: none;\n    margin: 0;\n    color: inherit;\n    font-size: inherit;\n    font-family: inherit;\n    font-weight: inherit;\n    display: block;\n    width: 100%;\n    padding: 5px 4px;\n    height: 40px;\n    box-sizing: border-box;\n    border: 1px solid transparent;\n    background-color: transparent;\n    \n    &.editing {\n        border-color: var(--border-color2);\n        &::selection {\n            background: #84caff;\n            color: white;\n        }\n    }\n    &:disabled {\n        cursor: text;\n    }\n"]);return x=function(){return n},n}function p(n){var e=n.onSubmit,t=n.editable,a=void 0!==t&&t,l=n.autoFocus,d=void 0!==l&&l,h=n.className,x=void 0===h?"":h,p=n.focusWithFullSelection,v=void 0!==p&&p,b=n.focusWithScroll,C=void 0!==b&&b,j=n.formSx,k=n._ref,w=(0,i._)(n,["onSubmit","editable","autoFocus","className","focusWithFullSelection","focusWithScroll","formSx","_ref"]),Z=(0,s.useRef)(null),_=(0,s.useRef)(null);return(0,s.useImperativeHandle)(k,function(){return{inputRef:Z,formRef:_}}),(0,s.useEffect)(function(){a&&d&&(v?setTimeout(function(){Z.current.select(),Z.current.focus()}):Z.current.focus())},[v,a,d]),(0,s.useEffect)(function(){a&&d&&C&&setTimeout(function(){Z.current.scrollIntoView(!1)})},[C,a,d]),(0,c.jsx)(m,{onSubmit:function(n){null==e||e(n),n.preventDefault()},ref:_,sx:(0,r._)({flex:1},j),children:a?(0,c.jsx)(g,(0,r._)({disabled:!a,ref:Z,className:f()(x,{editing:a})},w)):(0,c.jsx)(u.Z,(0,o._)((0,r._)({className:x,title:n.value||void 0},w),{sx:(0,r._)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},(null==w?void 0:w.sx)||{}),children:n.value}))})}var m=(0,l.ZP)("form")(h()),g=(0,l.ZP)("input")(x())},38818:function(n,e,t){t.d(e,{NE:function(){return P},Zq:function(){return W},hg:function(){return D},mt:function(){return L}});var r=t(50059),o=t(45008),i=t(57437),a=t(2265),c=t(40100),s=t(19643),u=t(78693),l=t(46387),d=t(47080),f=t(35389),h=t(16210),x=t(85860),p=t(59832),m=t(25590),g=t(91746),v=t(54632),b=t(11741),C=t(36760),j=t.n(C),k=t(19547),w=t.n(k),Z=t(41043),_=t(15102),y=t(28484),S=t(27648);function N(){var n=(0,o._)(["\n    scroll-snap-type: y proximity;\n    overflow-y: auto;\n    \n    .client-desktop &{\n\n        &::-webkit-scrollbar {\n            width: 10px;\n        }\n\n        &::-webkit-scrollbar-track {\n            border-left: 1px solid var(--border-color2);\n            background: #f9fafb;\n            padding-left: 1px;\n        }\n\n        &::-webkit-scrollbar-thumb {\n\n            border: 2px solid transparent;\n        }\n    }\n    height: 100%;\n    width: 100%;\n\n"]);return N=function(){return n},n}function M(){var n=(0,o._)(["\n    font-weight: 700;\n"]);return M=function(){return n},n}function E(){var n=(0,o._)(["\n    &[class] {\n        margin: 0;\n        scroll-snap-align: end;\n    }\n    .MuiFormControlLabel-label{\n        flex: 1;\n    }\n"]);return E=function(){return n},n}function I(){var n=(0,o._)(["\n    height: 63px;\n    display: flex;\n    align-items: center;\n    padding-left: 9px;\n    border-bottom: 1px solid var(--border-color2);\n    &:hover {\n      background-color: var(--item-hover) !important;\n    };\n    & > .MuiTouchRipple-root {\n      color: #E0F2FE !important;\n    };\n    &.Mui-focusVisible {\n      background-color:transparent !important\n   }\n"]);return I=function(){return n},n}var F=(0,a.forwardRef)(function(n,e){var t=n.open,r=n.onClose,o=n.conformable,a=n.onConform,h=n.onCancel,x=n.pending,p=n.children,g=n.leftBottomSlot,b=n.topSlot,C=n.title,j=n.loading;return(0,i.jsx)(c.k,{open:t,sx:{pt:"8px !important",borderRadius:"0 !important",width:"95vw",boxSizing:"border-box",maxWidth:658,height:"90vh",maxHeight:610},onClose:function(n){null==r||r(n)},children:(0,i.jsxs)(s.Z,{sx:{height:1,position:"relative"},children:[(0,i.jsxs)(u.Z,{className:"fr-ac",sx:{justifyContent:"space-between"},children:[(0,i.jsxs)(l.Z,{fontSize:18,fontWeight:700,my:1,children:[C||"移动到","..."]}),(0,i.jsx)(m.P,{placeStrategy:"static",onClick:h})]}),b,(0,i.jsx)(u.Z,{className:"fr-ac fr-jc",sx:{minHeight:0,mt:1,flex:1},children:(0,i.jsx)(R,{children:x?(0,i.jsxs)(u.Z,{className:"fr-ac",sx:{mt:1,height:63,pl:"9px"},children:[(0,i.jsx)(d.Z,{variant:"rounded",width:28,height:28}),(0,i.jsx)(d.Z,{sx:{ml:1},height:24,width:100})]}):p})}),(0,i.jsxs)(u.Z,{className:"fr-ac",sx:{mt:3,justifyContent:"space-between"},children:[g||(0,i.jsx)(u.Z,{}),(0,i.jsxs)(u.Z,{sx:{display:"flex"},children:[(0,i.jsx)(v.Z,{sx:{width:90,height:42,mr:1,color:"var(--black2)"},onClick:h,children:"取消"}),(0,i.jsx)(v.Z,{sx:{width:90,height:42},disabled:!o||!!j,variant:"contained",onClick:function(){a()},children:j?(0,i.jsx)(f.Z,{size:"2em",sx:{color:"white"},thickness:2}):"确认"})]})]})]})})}),R=(0,h.ZP)(u.Z)(N());(0,h.ZP)(g.Z)(M()),(0,h.ZP)(x.Z)(E());var W=(0,h.ZP)(b.Z)(I());function P(n){var e=n.item;return(0,i.jsx)(u.Z,{className:j()(w()["card-icon"]),sx:{height:"35px"},children:e.share?(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",viewBox:"0 0 35 35",fill:"none",children:[(0,i.jsx)("rect",{x:"0.5",y:"0.5",width:"34",height:"34",rx:"2.5",fill:n.fill}),(0,i.jsx)("rect",{x:"0.5",y:"0.5",width:"34",height:"34",rx:"2.5",stroke:n.stroke1}),(0,i.jsx)("path",{d:"M14.6583 18.7583L20.35 22.075M20.3417 12.925L14.6583 16.2417M25 11.6667C25 13.0474 23.8807 14.1667 22.5 14.1667C21.1193 14.1667 20 13.0474 20 11.6667C20 10.286 21.1193 9.16666 22.5 9.16666C23.8807 9.16666 25 10.286 25 11.6667ZM15 17.5C15 18.8807 13.8807 20 12.5 20C11.1193 20 10 18.8807 10 17.5C10 16.1193 11.1193 15 12.5 15C13.8807 15 15 16.1193 15 17.5ZM25 23.3333C25 24.714 23.8807 25.8333 22.5 25.8333C21.1193 25.8333 20 24.714 20 23.3333C20 21.9526 21.1193 20.8333 22.5 20.8333C23.8807 20.8333 25 21.9526 25 23.3333Z",stroke:n.stroke2,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}):(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",viewBox:"0 0 35 35",fill:"none",children:[(0,i.jsx)("rect",{x:"0.5",y:"0.5",width:"34",height:"34",rx:"2.5",fill:n.fill}),(0,i.jsx)("rect",{x:"0.5",y:"0.5",width:"34",height:"34",rx:"2.5",stroke:n.stroke1}),(0,i.jsx)("path",{d:"M18.3333 13.3333L17.4037 11.4741C17.1361 10.939 17.0023 10.6714 16.8028 10.476C16.6263 10.3031 16.4136 10.1716 16.18 10.0911C15.9159 10 15.6168 10 15.0185 10H11.8333C10.8999 10 10.4332 10 10.0766 10.1817C9.76304 10.3414 9.50807 10.5964 9.34828 10.91C9.16663 11.2665 9.16663 11.7332 9.16663 12.6667V13.3333M9.16663 13.3333H21.8333C23.2334 13.3333 23.9335 13.3333 24.4683 13.6058C24.9387 13.8455 25.3211 14.228 25.5608 14.6984C25.8333 15.2331 25.8333 15.9332 25.8333 17.3333V21C25.8333 22.4001 25.8333 23.1002 25.5608 23.635C25.3211 24.1054 24.9387 24.4878 24.4683 24.7275C23.9335 25 23.2334 25 21.8333 25H13.1666C11.7665 25 11.0664 25 10.5316 24.7275C10.0612 24.4878 9.67879 24.1054 9.43911 23.635C9.16663 23.1002 9.16663 22.4001 9.16663 21V13.3333Z",stroke:n.stroke2,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})}function L(n){var e=n.routes,t=n.onNavigate,r=e.length>2;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(Z.Gg,{sx:{margin:"20px 0 5px 0",".MuiBreadcrumbs-ol":{minHeight:40},".MuiBreadcrumbs-li":{minWidth:0,"&:first-child + .MuiBreadcrumbs-separator":{display:r?"none":"list-item"}},".MuiBreadcrumbs-separator":{margin:"0 12px"},lineHeight:"38px"},children:[r&&(0,i.jsx)(S.default,{legacyBehavior:!1,passHref:!0,href:"#",className:"file-path-back-btn pure-button",onClick:function(){t(e[e.length-2],e.length-2)},children:(0,i.jsx)(p.Z,{component:"a",sx:{color:"var(--black)",padding:"5px"},children:(0,i.jsx)(y.Z,{})})}),e.map(function(r,o){var a=(0,i.jsxs)(i.Fragment,{children:[(e.length<4||o!=e.length-2)&&(0,i.jsxs)(i.Fragment,{children:[(1==e.length||o==e.length-1)&&(0,i.jsx)(Z.Lm,{children:r.label}),e.length>1&&o!=e.length-1&&(0,i.jsx)(Z.Ak,{className:"truncate",sx:{maxWidth:"4em",bgcolor:"unset"},onClick:function(){t(r,o)},href:"#",children:r.label})]}),e.length>=4&&o==e.length-2&&(0,i.jsx)(Z.Lm,{children:"..."})]});return n.isH5?a:(0,i.jsx)(_.MI,{placement:"top",effect:"dark",anchorChildren:a,children:r.label},r.id)})]})})}function D(n){var e=n.editing,t=n.onChange,o=n.value,c=(0,r._)((0,a.useState)(o),2),s=c[0],u=c[1];return(0,a.useEffect)(function(){e&&u(o)},[e]),(0,i.jsx)(g.Z,{value:e?s:o,editable:e,autoFocus:!0,focusWithFullSelection:!0,focusWithScroll:!0,onSubmit:function(){t(s)},onBlur:function(){t(s)},onChange:function(n){u(n.target.value)},sx:{fontSize:"14px",color:"var(--black4,#475467)"},formSx:{border:e?"1.5px solid #1570EF":""}})}e.ZP=F},85425:function(n,e,t){t.d(e,{H:function(){return o}});var r=t(14382),o=t.n(r)()()()},81366:function(n,e,t){t.d(e,{T:function(){return x},h:function(){return h}});var r=t(50059),o=t(57437),i=t(2265),a=t(43180),c=t(85425),s=t(38882),u=t(11741),l=t(74634),d=t(36331),f=t(41628);function h(n){var e=n.onDelete,t=n.onMove,l=(0,r._)((0,i.useState)(null),2),d=l[0],f=l[1],h=(0,r._)((0,i.useState)(!1),2),x=h[0],p=h[1],m=(0,i.useRef)(null),g=(0,r._)((0,a.bQ)({anchor:d},x,function(){p(!1),m.current=null}),1)[0];c.H.useRegister("cardMenuPopover",function(){return{setMenuOpen:function(n,e,t){p(n),m.current=e,f(t)}}},[]);var v=(0,i.useMemo)(function(){return[{id:"0",title:n.readonly?"查看":"编辑",effect:function(){p(!1),n.onEdit(m.current.id)}},{id:"1",title:"移动到",effect:function(){p(!1),t(m.current)}},{id:"2",title:"删除",effect:function(){p(!1),e(m.current)}}]},[e]);return(0,o.jsx)(a.ZP,{placement:"bottom-end",offsetOptions:{mainAxis:5},anchor:d,ref:g,open:x,isAutoUpdate:!0,children:(0,o.jsx)(s.R,{items:v,sx:{width:100,p:.5,".MuiListItemButton-root":{fontSize:14},fontWeight:700,fontSize:16},renderItem:function(n){return(0,o.jsx)(u.Z,{onClick:n.effect,color:"action3",children:n.title})}})})}function x(n){var e=n.card.id==n.checkedId,t=c.H.useAPI("cardMenuPopover");(0,l.g4)(e,function(e){n.onChecked(null)},[],"click");var r=n.smallSize?30:40,a=(0,l.fl)();(0,i.useEffect)(function(){a.current&&e&&n.onChecked(n.card.id)},[n.onChecked,e]);var s=(0,i.useRef)(null);return(0,o.jsx)(d.Z,{ref:s,checked:e,onClick:function(n){n.stopPropagation()},onCheckedChange:function(e){t.current.setMenuOpen(e,n.card,s.current),n.card.id==n.checkedId?n.onChecked(null):n.onChecked(n.card.id)},sx:{ml:"auto",color:"inherit",width:r,height:r,minWidth:0},children:(0,o.jsx)(f.Z,{})})}},80774:function(n,e,t){t.d(e,{_:function(){return S}});var r=t(12249),o=t(5194),i=t(1780),a=t(46796),c=t(50059),s=t(57437),u=t(2265),l=t(7870),d=t(19643),f=t(78693),h=t(46387),x=t(67162),p=t.n(x),m=t(47812),g=t(81366),v=t(99376),b=t(39207),C=t(36760),j=t.n(C),k=t(36956),w=t(74634),Z=t(79943),_=t(23048),y=t(36706);function S(n){var e=n.data,t=n.onCardMenuChecked,r=n.checkedId,f=n.subjectId,h=(0,a._)(n,["data","onCardMenuChecked","checkedId","subjectId"]),x=(0,c._)((0,k.L)("subjectQALayout"),1)[0],p=!!(0,w.F)(),g=x===m.Z8.Grid,v=(0,u.useMemo)(function(){return g?{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(".concat(p?"150px":"188px",", 1fr))"),gap:"10px"}:{}},[g]);return(0,s.jsx)(d.Z,(0,i._)((0,o._)({spacing:g?0:2},h),{sx:(0,l.Vc)(v,h.sx),children:e&&e.map(function(n){return(0,s.jsx)(N,{subjectId:f,layout:x,record:n,onCardMenuChecked:t,checkedId:r},n.id)})}))}function N(n){var e,t=n.record,a=n.onCardMenuChecked,x=n.checkedId,C=n.layout,k=(0,c._)((0,u.useState)(!1),2),S=k[0],N=k[1],M=(0,v.useSearchParams)(),E=(0,u.useMemo)(function(){return(0,l.Qe)(t.updateTime)},[t.updateTime]),I=(0,u.useMemo)(function(){return t.answer.replace(/\[\[\d+\]\]/g,"").replace(/\*\*/g,"").replace(/\#/g,"").replace(/!\[.*\]\(.*\)/g,"").replace(/```/g,"")},[t.answer]),F=(0,u.useMemo)(function(){if(!t)return t;var n=t.coverUrl;return n?(n.startsWith("http")||(n="https://metaso.cn"+n,n=(0,b.SkV)(n)),(0,i._)((0,o._)({},t),{coverUrl:n})):t},[t]),R=!!(0,w.F)(),W=(0,Z.WS)(),P=C===m.Z8.Grid;return(0,s.jsx)(f.Z,{className:j()(p()["subject-card"],(0,r._)({},p()["grid-form"],P),"pure-button"),onMouseEnter:function(){N(!0)},onMouseLeave:function(){N(!1)},onClick:function(){t.sessionId?(0,y.T0)(W,R,t.sessionId,n.subjectId,t.question,!0,M.get(m.Vp.COMMON),!0):(0,y.vC)(W,t.id,!1,null)},children:(0,s.jsxs)(d.Z,{spacing:P?0:1,sx:{width:1},className:p()["subject-card-content"],children:[(0,s.jsx)(h.Z,{sx:{color:S?"#1570EF":"var(--black)",fontSize:"16px",fontWeight:700,cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block !important"},className:"fr-ac",children:null!==(e=t.question)&&void 0!==e?e:"未知"}),(0,s.jsxs)(f.Z,{sx:{display:"flex"},children:[F.coverUrl?(0,s.jsx)(f.Z,{className:p()["subject-card-cover"],children:(0,s.jsx)("img",{src:F.coverUrl,style:{display:"block",objectPosition:"center",objectFit:"cover",width:"100%",height:"100%"}})}):P?(0,s.jsx)(_.K,{className:p()["subject-card-cover"],sx:{bgcolor:"#f7f7f7",width:1,height:1},children:(0,s.jsx)(f.Z,{sx:{padding:"10px",width:"calc(100%-20px)",height:"calc(100%-20px)",overflow:"hidden"},children:(0,s.jsx)(h.Z,{className:j()("meta-multi-rows",p()["subject-card-desc"]),style:{"--multi-row-count":5},sx:{fontSize:"12px",color:"rgba(55, 53, 47, 0.65)"},children:I})})}):(0,s.jsx)(s.Fragment,{}),(0,s.jsxs)(d.Z,{spacing:1,sx:{width:1},children:[!P&&(0,s.jsx)(h.Z,{className:j()("meta-multi-rows",p()["subject-card-desc"]),style:{"--multi-row-count":2,height:"42px"},sx:{fontSize:"14px",color:"var(--black4)"},children:I}),(0,s.jsxs)(f.Z,{className:j()("fr-ac",p()["subject-card-bottom"]),sx:{color:"var(--content-op-color)"},children:[(0,s.jsx)(h.Z,{sx:{fontSize:"inherit"},children:E}),(0,s.jsx)(g.T,{card:t,onChecked:a,checkedId:x,smallSize:P})]})]})]})]})})}},48047:function(n,e,t){t.d(e,{Z:function(){return k}});var r=t(2403),o=t(50059),i=t(85735),a=t(5853),c=t(57437),s=t(2265),u=t(78693),l=t(54632),d=t(25001),f=t(39207),h=t(54493),x=t(22322);t(94746);var p=t(7870),m=t(38818),g=t(22252),v=t(25922),b=t(41043),C=t(62221),j=t(9298);function k(n){var e,t=n.open,k=n.onClose,w=n.onConform,Z=n.onCancel,_=n.ownSubjectId,y=(0,v.F)().theme,S=(0,o._)((0,s.useState)(_),2),N=S[0],M=S[1],E=(0,o._)((0,s.useState)(null),2),I=E[0],F=E[1],R=(0,d.W)({autoRequest:!1,request:(e=(0,r._)(function(n,e){return(0,a.Jh)(this,function(n){return null==e||e.abort("取消上次拉取subjectData请求"),[2,(0,f.oOz)().then(h.Jj).then(function(n){return n.data.data.filter(function(n){return!n.share||2==n.permissionType})})]})}),function(n,t){return e.apply(this,arguments)}),defaultData:[],onError:function(){(0,x.y)("获取专题数据失败",{variant:"error"})}});(0,s.useEffect)(function(){if(t)return R.doRequest(),function(){M(_)}},[t]);var W=(0,o._)((0,s.useState)(!1),2),P=(W[0],W[1]),L=(0,o._)((0,s.useState)(""),2),D=L[0],z=L[1];return(0,s.useCallback)(function(n){z(n)},[]),(0,s.useCallback)(function(){var n=(0,i._)(R.data),e=n.find(function(n){return n.id===I});if(!D){(0,x.y)("专题名不能为空",{variant:"warning"});return}(0,f.qCN)(I,D,"").then(function(t){0===t.data.errCode?(F(null),e.name=D,R.setData(n)):(0,x.y)(t.data.errMsg,{variant:"error"})})},[D,I]),(0,s.useMemo)(function(){return[{label:"专题",id:"专题"}]},[]),(0,c.jsx)(m.ZP,{open:t,onClose:k,onCancel:Z,conformable:N!==_,onConform:function(){w(N)},topSlot:(0,c.jsx)(u.Z,{className:"fr-ac",children:(0,c.jsx)(b.Lm,{children:"专题"})}),leftBottomSlot:(0,c.jsx)(l.Z,{sx:{width:104,height:42},variant:"text",onClick:(0,r._)(function(){var n,e,t;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return P(!0),[4,(0,C.Z)()];case 1:return e=(n=r.sent()).fileName,t=n.description,(0,f.vRe)(e,t).then(h.Jj).then(function(n){var e=n.data.data;R.setData([e].concat((0,i._)(R.data))),(0,p.dW)(j.Z.SUBJECT_CREATE_NEW,{subjectName:newDataName,res:e}),M(e.id)}).finally(function(){P(!1)}),[2]}})}),children:"创建专题"}),children:(0,c.jsx)(c.Fragment,{children:R.data.map(function(n){var e="light"===y?n?n.share?"rgba(249, 245, 255, 1)":"rgba(239, 248, 255, 1)":"rgba(249, 250, 251, 1)":n?n.share?"rgba(249, 245, 255, 0.2)":"rgba(239, 248, 255, 0.2)":"rgba(249, 250, 251, 0.2)",t="light"===y?n?n.share?"rgba(233, 215, 254, 1)":"rgba(178, 221, 255, 1)":"rgba(234, 236, 240, 1)":n?n.share?"rgba(233, 215, 254, 0.5)":"rgba(178, 221, 255, 0.5)":"rgba(234, 236, 240, 0.5)",r=n?n.share?"rgba(127, 86, 217, 1)":"rgba(21, 112, 239, 1)":"rgba(102, 112, 133, 1)",o=I===n.id;return(0,c.jsxs)(m.Zq,{onClick:function(e){o||M(n.id)},sx:{backgroundColor:n.id===N?"var(--subject-selected-color)":""},children:[(0,c.jsx)(g.CA,{sx:{mr:"10px"},children:(0,c.jsx)(m.NE,{item:n,fill:e,stroke1:t,stroke2:r})}),(0,c.jsx)(m.hg,{editing:o,value:n.name,onChange:function(e){F(null),(0,f.qCN)(n.id,e,"").then(function(t){0===t.data.errCode?(n.name=e,R.setData((0,i._)(R.data))):(0,x.y)(t.data.errMsg,{variant:"error"})})}})]},n.id)})})})}},53231:function(n,e,t){t.d(e,{Z:function(){return g}});var r=t(5194),o=t(1780),i=t(46796),a=t(50059),c=t(57437),s=t(34040),u=t(53820),l=t(48365),d=t(92664),f=t(2265),h=t(85721),x=t(38305),p=t(54632),m=t(27030);function g(){var n=(0,m.I)(),e=n.resolve,t=n.done,r=n.reject,o=document.createElement("div"),i=(0,s.createRoot)(o);function a(){i.unmount(),o.remove()}return i.render((0,c.jsx)(v,{onCancel:function(){r(),a()},onConfirm:function(n){e(n),a()},onClose:function(){a()}})),t}function v(n){var e=n.onConfirm,t=n.onClose,s=(0,i._)(n,["onConfirm","onClose"]),m=(0,a._)((0,f.useState)(!0),2),g=m[0],v=m[1],b=(0,a._)((0,f.useState)(""),2),C=b[0],j=b[1],k=(0,l.Q$)(),w=function(){k.current.validate().every(function(n){return 0===n.hitRules.length})&&e(C)};return(0,c.jsx)(u.F2,(0,o._)((0,r._)({},s),{onConfirm:w,onClose:function(){v(!1),t()},open:g,title:"上传网页",noFooter:!0,children:(0,c.jsxs)(l.mG,{_ref:k,sx:{width:"100%"},onFormSubmit:w,style:{display:"flex",justifyContent:"space-between"},children:[(0,c.jsx)(l.xf,{name:"fileName",children:(0,c.jsxs)(h.W,{sx:{width:"80%"},children:[(0,c.jsx)(d.H,{type:"text",autoComplete:"off",placeholder:"https://www.example.com",autoFocus:!0,sx:{bgcolor:"var(--white-gray-2)"},value:C,onChange:function(n){return j(n.target.value)},onKeyDown:function(n){"Enter"===n.key&&(n.preventDefault(),w())}}),(0,c.jsx)(x.R,{rules:[x.n,{validate:function(n){return!!n.value.match(/[((https?):\/\/)]?[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g)},message:"请输入正确格式的URL",isSkip:function(n){return!n.dirty||n.focused}}]})]})}),(0,c.jsx)(l.xf,{children:(0,c.jsx)(p.Z,{variant:"contained",onClick:w,children:"确定"})})]})}))}},41043:function(n,e,t){t.d(e,{Ak:function(){return h},Gg:function(){return f},Lm:function(){return x}});var r=t(5194),o=t(45008),i=t(57437),a=t(80868),c=t(16210),s=t(46387),u=t(27648),l=t(61980);function d(){var n=(0,o._)(["\n    color: var(--black4);\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    min-width: 0;\n    max-width:  8em;\n    line-height: 1.5;\n    font-size: 14px;\n    -webkit-tap-highlight-color: transparent;\n    display: block;\n    text-decoration: none;\n    padding: 4px 4px;\n    :hover{\n        text-decoration: underline;\n    }\n"]);return d=function(){return n},n}var f=function(n){return(0,i.jsx)(a.Z,(0,r._)({separator:(0,i.jsx)(l.Z,{style:{width:16,height:16,color:"#D0D5DD",transform:"rotate(-90deg)"}})},n))},h=(0,c.ZP)(u.default,{name:"subject-bootstrapped-link"})(d()),x=(0,c.ZP)(s.Z)(function(n){return{backgroundColor:"var(--white-gray-2)",fontSize:14,padding:"4px 4px",borderRadius:"6px",color:"var(--black4)",maxWidth:"8em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}})}}]);