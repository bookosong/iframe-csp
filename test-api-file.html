<!DOCTYPE html>
<html>
<head>
    <title>API文件请求测试</title>
</head>
<body>
    <h1>API文件请求测试页面</h1>
    
    <h2>测试图片加载</h2>
    <p>测试原始的API文件URL是否能正确代理：</p>
    
    <!-- 使用你提供的API文件URL进行测试 -->
    <img id="test-img" 
         src="http://localhost:10101/api/file/8633750210809888768/figures?type=1&filename=1_0.jpg&sessionId=8647800048711024640" 
         alt="测试图片"
         style="max-width: 500px; border: 1px solid #ccc;"
         onload="console.log('图片加载成功')"
         onerror="console.log('图片加载失败')">
    
    <h2>测试结果</h2>
    <div id="result">加载中...</div>
    
    <script>
        const img = document.getElementById('test-img');
        const result = document.getElementById('result');
        
        img.onload = function() {
            result.innerHTML = '<span style="color: green;">✅ 图片加载成功！API文件代理工作正常。</span>';
            console.log('图片尺寸:', img.naturalWidth, 'x', img.naturalHeight);
        };
        
        img.onerror = function() {
            result.innerHTML = '<span style="color: red;">❌ 图片加载失败。API文件代理可能有问题。</span>';
            console.error('图片加载失败');
        };
        
        // 5秒后如果还没加载，认为超时
        setTimeout(() => {
            if (result.innerHTML === '加载中...') {
                result.innerHTML = '<span style="color: orange;">⏰ 图片加载超时。可能网络问题或API不存在。</span>';
            }
        }, 5000);
    </script>
</body>
</html>
